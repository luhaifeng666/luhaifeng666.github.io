<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://luhaifeng666.github.io</id>
    <title>é…±è±†è…ç²¾çš„å°ç«™</title>
    <updated>2022-04-13T08:24:25.519Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://luhaifeng666.github.io"/>
    <link rel="self" href="https://luhaifeng666.github.io/atom.xml"/>
    <subtitle>æˆ‘å¹ï¼Œä½ å¬</subtitle>
    <logo>https://luhaifeng666.github.io/images/avatar.png</logo>
    <icon>https://luhaifeng666.github.io/favicon.ico</icon>
    <rights>All rights reserved 2022, é…±è±†è…ç²¾çš„å°ç«™</rights>
    <entry>
        <title type="html"><![CDATA[Obsidian é“¾æ¥æ”¶è—æ’ä»¶å¼€å‘]]></title>
        <id>https://luhaifeng666.github.io/post/obsidian-lian-jie-shou-cang-cha-jian-kai-fa/</id>
        <link href="https://luhaifeng666.github.io/post/obsidian-lian-jie-shou-cang-cha-jian-kai-fa/">
        </link>
        <updated>2022-04-12T04:17:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨ä¸€æ¬¾ Markdown ç¬”è®°åº”ç”¨: <a href="https://obsidian.md/">Obsidian</a>ï¼ŒåŠ ä¹‹å…ˆå‰åšäº†ä¸€ä¸ªå¯ä»¥å¿«æ·æ”¶è—/è·³è½¬åœ°å€çš„å·¥å…·: <a href="https://www.npmjs.com/package/efficient-tools">efficient-tools</a>ï¼Œäºæ˜¯è¿™æ¬¡æ‰“ç®—æ’¸ä¸ª Obsidian çš„æ’ä»¶ï¼Œå€Ÿç”¨ Obsidian ç»™è¿™ä¸ªå°åŠŸèƒ½æä¾›å¯è§†åŒ–ç•Œé¢æ“ä½œçš„èƒ½åŠ›ï¼ˆèµ‹ã€‚ã€‚ã€‚ã€‚èƒ½ï¼Ÿï¼‰ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨ä¸€æ¬¾ Markdown ç¬”è®°åº”ç”¨: <a href="https://obsidian.md/">Obsidian</a>ï¼ŒåŠ ä¹‹å…ˆå‰åšäº†ä¸€ä¸ªå¯ä»¥å¿«æ·æ”¶è—/è·³è½¬åœ°å€çš„å·¥å…·: <a href="https://www.npmjs.com/package/efficient-tools">efficient-tools</a>ï¼Œäºæ˜¯è¿™æ¬¡æ‰“ç®—æ’¸ä¸ª Obsidian çš„æ’ä»¶ï¼Œå€Ÿç”¨ Obsidian ç»™è¿™ä¸ªå°åŠŸèƒ½æä¾›å¯è§†åŒ–ç•Œé¢æ“ä½œçš„èƒ½åŠ›ï¼ˆèµ‹ã€‚ã€‚ã€‚ã€‚èƒ½ï¼Ÿï¼‰ã€‚</p>
<!-- more -->
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>åœ¨ <strong>efficient-tools</strong> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ·»åŠ ã€åˆ é™¤ä»¥åŠæŸ¥çœ‹å¹¶è·³è½¬é“¾æ¥ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œé‚£åœ¨è¿™ä¸ªæ’ä»¶ä¸­ä¹Ÿéœ€è¦å®ç°è¿™ä¸‰ç§åŠŸèƒ½ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œå…ˆè¦åšå¦‚ä¸‹å‡†å¤‡å·¥ä½œï¼š</p>
<blockquote>
<ol>
<li>å» <a href="https://obsidian.md/">Obsidian å®˜ç½‘</a> ä¸‹è½½ Obsidian åº”ç”¨ï¼›</li>
<li>å‚ç…§ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/getting-started/create-your-first-plugin.html#%E5%BC%80%E5%8F%91%E5%89%8D%E5%87%86%E5%A4%87">åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ’ä»¶</a> è¿™ç¯‡æ–‡æ¡£å‡†å¤‡å¥½å¼€å‘ç¯å¢ƒï¼Œå¹¶å°†æ’ä»¶åç§°æ”¹ä¸º <strong>obsidian-link-keeper</strong> ï¼›</li>
<li>ç”±äº Obsidian çš„æ’ä»¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­åªèƒ½é€šè¿‡åœç”¨/å¯ç”¨æ’ä»¶çš„æ–¹å¼è®©æœ€æ–°çš„ä»£ç ç”Ÿæ•ˆï¼Œä¸ºäº†é¿å¼€è¿™ä¸ªç¹ççš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://github.com/pjeby/hot-reload">Hot-Relod</a> è¿™ä¸ªå·¥å…·æ¥è®©æˆ‘ä»¬çš„æ’ä»¶å¯ä»¥çƒ­é‡è½½ã€‚</li>
</ol>
</blockquote>
<p>åœ¨åšå®Œä¸Šè¿°å‡†å¤‡å·¥ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç›®å½•ç»“æ„:</p>
<pre><code>â”œâ”€â”€ README.md
â”œâ”€â”€ esbuild.config.mjs
â”œâ”€â”€ main.ts // å…¥å£æ–‡ä»¶
â”œâ”€â”€ manifest.json // æ’ä»¶çš„åŸºæœ¬ä¿¡æ¯
â”œâ”€â”€ modals.ts // ç”¨äºåˆ›å»ºæ¨¡æ€æ¡†
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ styles.css // æ ·å¼æ–‡ä»¶
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ version-bump.mjs
â””â”€â”€ versions.json
</code></pre>
<h2 id="è®¾ç½®filepath">è®¾ç½®filepath</h2>
<p>åœ¨ <strong>efficient-tools</strong> ä¸­ï¼Œæ–°å¢çš„åœ°å€ä¼šé»˜è®¤ä¿å­˜åˆ° <strong><code>${process.env.HOME}/etl.json</code></strong> æ–‡ä»¶ä¸­ï¼Œåœ¨ Obsidian ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™æ’ä»¶æ·»åŠ é…ç½®çš„æ–¹å¼æ¥è®¾ç½®ä¿å­˜åœ°å€çš„æ–‡ä»¶è·¯å¾„ã€‚</p>
<p>Obsidian ä¸­æä¾›äº† <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Setting.html#setting">Setting</a> ç±»ä»¥åˆ›å»ºè¯¸å¦‚æ–‡æœ¬æ¡†ï¼Œä¸‹æ‹‰æ¡†ï¼Œæ»‘åŠ¨æ¡ï¼ŒæŒ‰é’®ç­‰è¡¨å•æ§ä»¶ï¼Œä»¥åŠ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/PluginSettingTab.html#pluginsettingtab">PluginSettingTab</a> ç±»å¯ä»¥åˆ›å»ºæ’ä»¶çš„é…ç½® tabã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º <code>settings.ts</code> æ–‡ä»¶ï¼Œç”¨äºè‡ªå®šä¹‰æ’ä»¶çš„è®¾ç½®ï¼š</p>
<pre><code class="language-ts">// settings.ts

// å¯¼å…¥æ’ä»¶
import LinkKeeper from './main'

import { App, PluginSettingTab, Setting } from 'obsidian'

// åˆ›å»ºæ’ä»¶çš„è‡ªå®šä¹‰é…ç½®
export class LinkKeeperSettingTab extends PluginSettingTab {
  plugin: LinkKeeper
  
  /**
  * æ„é€ å‡½æ•°ä¸­æ¥å—ä¸¤ä¸ªå‚æ•°
  * app: Obsidian ä¸­çš„Appå¯¹è±¡
  * plugin: éœ€è¦è‡ªå®šä¹‰è®¾ç½®çš„æ’ä»¶å¯¹è±¡
  */
  constructor (app: App, plugin: LinkKeeper) {
    super (app, plugin)
    this.plugin = plugin
  }

  display(): void {
    // containerEl æ˜¯æ’ä»¶è®¾ç½®é¢æ¿çš„å®¹å™¨
    const { containerEl } = this
    // æ¸…ç©ºé¢æ¿
    containerEl.empty()
    // æ·»åŠ æ§ä»¶åˆ°é¢æ¿å®¹å™¨ä¸­
    new Setting(containerEl)
      .setName(&quot;Link Filepath&quot;) // è®¾ç½®æ§ä»¶åç§°
      .setDesc(&quot;The file where saves the links.&quot;) // è®¾ç½®æ§ä»¶æè¿°æ–‡æ¡ˆ
      .addText((text) =&gt; // addText æ–¹æ³•ç”¨äºåˆ›å»º input æ–‡æœ¬æ¡†, å›è°ƒå‡½æ•°ä¸­çš„å‚æ•°ä¸ºæ–‡æœ¬æ¡†domå¯¹è±¡
        text
          .setPlaceholder(&quot;Enter the full filepath&quot;) // è®¾ç½®æ–‡æœ¬æ¡† placeholder
          .setValue(this.plugin.settings.filepath) // è®¾ç½®æ–‡æœ¬æ¡†å†…å®¹
          .onChange(async (value) =&gt; { // ç›‘å¬æ–‡æœ¬æ¡†çš„ change äº‹ä»¶
            this.plugin.settings.filepath = value
            await this.plugin.saveSettings() // ä¿å­˜è®¾ç½®
          })
      )
  }
}
</code></pre>
<p>åœ¨è‡ªå®šä¹‰è®¾ç½®æ—¶éœ€è¦å¼•å…¥è‡ªå®šä¹‰æ’ä»¶ï¼Œä»¥ä¾¿å°†è®¾ç½®ç»‘å®šåˆ°å¯¹åº”æ’ä»¶ä¸Šã€‚æ‰“å¼€æ’ä»¶çš„å…¥å£æ–‡ä»¶ <code>main.ts</code> ï¼Œç”±äºæ‹‰å–çš„æ’ä»¶æ¨¡æ¿ä¸­å­˜åœ¨å…¶ä»–ç¤ºä¾‹å†…å®¹ï¼Œæˆ‘ä»¬å…ˆâ€œæ¸…ç†â€ä¸€ä¸‹ <code>main.ts</code> æ–‡ä»¶ï¼Œåªä¿ç•™æˆ‘ä»¬éœ€è¦çš„å†…å®¹ï¼š</p>
<pre><code class="language-ts">// main.ts

// å¼•å…¥ Plugin ç±»
import { Plugin } from &quot;obsidian&quot;

// åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶
export default class InsertLinkPlugin extends Plugin {
  async onload() {
     // onload æ–¹æ³•åœ¨æ’ä»¶è¢«å¯ç”¨æ—¶è°ƒç”¨
  }
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æ³¨ï¼š</strong></p>
<p>åœ¨ Obsidian ä¸­ï¼Œè‡ªå®šä¹‰æ’ä»¶çš„ç±»ç»§æ‰¿è‡ªæ’ä»¶åŸºç±» <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Plugin_2.html#plugin-2">Plugin</a>ã€‚æ’ä»¶å­˜åœ¨ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š<strong>onload</strong> ä»¥åŠ <strong>onunload</strong>ï¼Œåˆ†åˆ«åœ¨ç»„ä»¶å¯ç”¨æ—¶ä»¥åŠç¦ç”¨æ—¶è°ƒç”¨ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/concepts/plugin-anatomy.html#%E6%8F%92%E4%BB%B6%E5%89%96%E6%9E%90">æ’ä»¶å‰–æ</a>ã€‚</p>
</blockquote>
<p>&quot;æ¸…ç†&quot;å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>main.ts</code> ä¸­å¼•å…¥æ’ä»¶è®¾ç½®ï¼Œå¹¶åœ¨ <strong>onload</strong> é˜¶æ®µå°†è‡ªå®šä¹‰è®¾ç½®æ³¨å†Œåˆ°æ’ä»¶ä¸Šï¼š</p>
<pre><code class="language-ts">// main.ts

import { Plugin } from &quot;obsidian&quot;
// å¼•å…¥è‡ªå®šä¹‰è®¾ç½®
import { LinkKeeperSettingTab } from './settings'

// å®šä¹‰è‡ªå®šä¹‰è®¾ç½®çš„ç±»å‹
interface LinkKeeperSettings {
  filepath: string
}
// å®šä¹‰è‡ªå®šä¹‰è®¾ç½®çš„é»˜è®¤å€¼
const DEFAULT_SETTINGS: Partial&lt;LinkKeeperSettings&gt; = {
  filepath: `${process.env.HOME}/etl.json`
}

export default class LinkKeeperPlugin extends Plugin {
  settings: LinkKeeperSettings
  
  async onload() {
    // åŠ è½½è‡ªå®šä¹‰è®¾ç½®
    await this.loadSettings()
    // å°†æ’ä»¶çš„é…ç½® tab æ·»åŠ åˆ°è®¾ç½®èœå•ä¸­
    this.addSettingTab(new LinkKeeperSettingTab(this.app, this))
  }
  
  async loadSettings () {
    // å¦‚æœä¿®æ”¹äº†é…ç½®é¡¹ï¼Œå¯ä»¥è¦†ç›–é»˜è®¤é…ç½®
    this.settings = {
      ...DEFAULT_SETTINGS,
      ...await this.loadData()
    }
  }
  
  // ç”¨äºä¿å­˜è®¾ç½®ï¼Œæš´éœ²ç»™è‡ªå®šä¹‰è®¾ç½®ç±»ä¸­ä½¿ç”¨
  async saveSettings () {
    await this.saveData(this.settings)
  }
}
</code></pre>
<p>åšå®Œä¸Šè¿°æ­¥éª¤åï¼Œæ‰§è¡Œ <strong>pnpm run dev</strong>ï¼Œä¹‹åæ‰“å¼€è®¾ç½®ç•Œé¢ï¼Œå¯ç”¨è‡ªå®šä¹‰æ’ä»¶ï¼Œå³å¯åœ¨è®¾ç½®ä¸­çœ‹åˆ°æ’ä»¶çš„è‡ªå®šä¹‰é…ç½®äº†ï¼š</p>
<p align="center">
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0eba8575a67d4c1f9eea944ea70e49e4~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç¬¬ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç€æ‰‹å®ç°æˆ‘ä»¬çš„åŠŸèƒ½äº†~</p>
<h2 id="æ·»åŠ é“¾æ¥">æ·»åŠ é“¾æ¥</h2>
<p>è¦æƒ³æ·»åŠ é“¾æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ·»åŠ é“¾æ¥çš„ç•Œé¢ã€‚æˆ‘ä»¬æ¥è®¾æƒ³ä¸‹è¿™ä¸ªç•Œé¢é‡Œéœ€è¦å®ç°å“ªäº›åŠŸèƒ½ï¼š</p>
<blockquote>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸¤ä¸ªè¾“å…¥æ¡†ç”¨äºè®¾ç½®é“¾æ¥çš„åç§°ä»¥åŠåœ°å€ï¼›</li>
<li>ä¹‹åå†æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åå¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œæ ¡éªŒå¹¶ä¿å­˜ï¼›</li>
<li>å¦‚æœé‡åˆ°å¼‚å¸¸åœºæ™¯ï¼Œæ¯”å¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¾“å…¥å†…å®¹ä¸ºç©ºç­‰æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ç»™å‡ºå‹å¥½çš„å¼¹çª—æç¤ºã€‚</li>
</ol>
</blockquote>
<p>å¥½ï¼ŒåŠŸèƒ½å·²ç»æ˜ç¡®äº†ï¼Œé‚£æˆ‘ä»¬å°±æ¥é€æ­¥å®ç°å®ƒä»¬ï¼Œå†²å†²å†²ï¼</p>
<h3 id="ç¬¬ä¸€æ­¥æ·»åŠ é“¾æ¥çš„ç•Œé¢">ç¬¬ä¸€æ­¥ï¼šæ·»åŠ é“¾æ¥çš„ç•Œé¢</h3>
<p>ä¸Šæ–‡ä¸­æåˆ°çš„ <strong>ç•Œé¢</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Obsidian æä¾›çš„ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Modal.html#modal">Modal</a> æ¥å®ç°ã€‚<strong>Modal</strong> ç”¨äºåˆ›å»ºä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œåœ¨æ¨¡æ€æ¡†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Setting.html#setting">Setting</a> ä»¥åŠ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/guides/html-elements.html#html-elements">createEl</a> çš„æ–¹å¼æ¥è‡ªå®šä¹‰æ‰€éœ€è¦æ˜¾ç¤ºçš„è¡¨å•æ§ä»¶æˆ–è€…è‡ªå®šä¹‰å…ƒç´ å†…å®¹ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º <code>modals.ts</code> æ–‡ä»¶ï¼Œç”¨äºåˆ›å»ºæ¨¡æ€æ¡†ï¼š</p>
<pre><code class="language-ts">// modal.ts

import { App, Modal } from &quot;obsidian&quot;

// åˆ›å»ºæ·»åŠ åœ°å€çš„æ¨¡æ€æ¡†
export class AddLink extends Modal {
  linkName: string // ç”¨äºä¿å­˜é“¾æ¥åç§°
  linkUrl: string // ç”¨äºä¿å­˜é“¾æ¥åœ°å€

  constructor(
    app: App
  ) {
    super(app)
  }
  // åœ¨æ¨¡æ€æ¡†æ‰“å¼€æ—¶è°ƒç”¨
  onOpen (): void {
  }
  // åœ¨æ¨¡æ€æ¡†å…³é—­æ—¶è°ƒç”¨
  onClose(): void {
    // éœ€è¦æ¸…ç©ºæ¨¡æ€æ¡†çš„å†…å®¹
    this.contentEl.empty()
  }
}
</code></pre>
<h3 id="ç¬¬äºŒæ­¥æ·»åŠ åç§°-åœ°å€è¾“å…¥æ¡†">ç¬¬äºŒæ­¥ï¼šæ·»åŠ åç§° &amp;&amp; åœ°å€è¾“å…¥æ¡†</h3>
<p>é€šè¿‡ Obsidian æä¾›çš„ <strong>Setting</strong> ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ›å»ºä¸¤ä¸ªç”¨äºè¾“å…¥çš„æ–‡æœ¬æ¡†ã€‚åˆ›å»ºæ–‡æœ¬æ¡†éœ€è¦ç”¨åˆ° <strong>Setting</strong> ä¸­çš„ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Setting.html#addtext">addText</a> æ–¹æ³•ã€‚</p>
<p>åœ¨ <code>onOpen</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ’å…¥ä»¥ä¸‹ä»£ç </p>
<pre><code class="language-ts">// modal.ts

onOpen (): void {
  // contentEl æ˜¯æ¨¡æ€æ¡†çš„ Element å¯¹è±¡
  const { contentEl } = this
  // è®¾ç½®æ¨¡æ€æ¡†æ ‡é¢˜
  contentEl.createEl(&quot;h1&quot;, { text: &quot;Add Link&quot;, cls: &quot;title&quot; })
  // åˆ›å»ºç”¨äºè®¾ç½®åœ°å€åç§°çš„ input æ¡†
  new Setting(contentEl).setName(&quot;Link name&quot;).addText(text =&gt; 
    text.setValue(this.linkName).setPlaceholder('name').onChange((value) =&gt; {
      this.linkName = value
    })
  )
  // åˆ›å»ºç”¨äºè®¾ç½®åœ°å€ url çš„ input æ¡†
  new Setting(contentEl).setName(&quot;Link url&quot;).addText(text =&gt;
    text.setValue(this.linkUrl).setPlaceholder('url').onChange((value) =&gt; {
      this.linkUrl = value
    })
  )
}
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æ³¨ï¼š</strong></p>
<p><strong>createEl</strong> æ–¹æ³•ç”¨äºè‡ªå®šä¹‰ Html æ ‡ç­¾ï¼Œå…¶ä¸­ <code>cls</code> ç”¨äºè®¾ç½®æ ‡ç­¾çš„ <code>class</code> å±æ€§ï¼Œå¯ä»¥ç”¨äºè®¾ç½®æ ‡ç­¾æ ·å¼ã€‚æ ·å¼ç»Ÿä¸€è®¾ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>style.css</code> æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<h3 id="ç¬¬ä¸‰æ­¥æ·»åŠ ä¿å­˜æŒ‰é’®">ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ ä¿å­˜æŒ‰é’®</h3>
<p>æ·»åŠ æŒ‰é’®éœ€è¦ç”¨åˆ° <strong>Setting</strong> ä¸­çš„ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Setting.html#addbutton">addButton</a> æ–¹æ³•ã€‚</p>
<p>åœ¨ <code>onOpen</code> æ–¹æ³•ä¸­ç»§ç»­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-ts">// modal.ts

onOpen (): void {
  // çœç•¥ä¸Šè¿°ä»£ç 
  
  // åˆ›å»ºä¸€ä¸ªæŒ‰é’®
  new Setting(contentEl).addButton((btn) =&gt;
    btn
      .setButtonText('Add') // è®¾ç½®æŒ‰é’®æ–‡æ¡ˆ
      .setCta()
      .onClick(() =&gt; {
        // æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
      })
  )
}
</code></pre>
<h3 id="ç¬¬å››æ­¥å®ç°æ ¡éªŒ-ä¿å­˜åŠŸèƒ½">ç¬¬å››æ­¥ï¼šå®ç°æ ¡éªŒ &amp;&amp; ä¿å­˜åŠŸèƒ½</h3>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ–‡æœ¬æ¡†ä¸­çš„å†…å®¹è¿›è¡Œæ ¡éªŒï¼Œå¹¶ç»™å‡ºæç¤ºã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä»…æ ¡éªŒæ–‡æœ¬æ¡†ä¸­æ˜¯å¦è¾“å…¥å†…å®¹ï¼Œå¦‚æœæ–‡æœ¬æ¡†ä¸­çš„å†…å®¹ä¸ºç©ºï¼Œåˆ™ç»™å‡º popup æç¤ºï¼Œå¦åˆ™å°±ä¿å­˜è¾“å…¥çš„å†…å®¹ã€‚</p>
<p>Obsidian ä¸­æä¾›äº† <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Notice.html#notice">Notice</a> ç±»ç”¨äºç”Ÿæˆæç¤ºã€‚ç”±äºæç¤ºçš„ popup å¯èƒ½ä¼šåœ¨å¤šå‡ºä½¿ç”¨åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬å°†å…¶æŠ½å–åˆ°å•ç‹¬çš„ <code>utils.ts</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-ts">// utils.ts

import { Notice } from 'obsidian'

export const noticeHandler = (msg: string) =&gt; new Notice(msg) 
</code></pre>
<p>ä¹‹åï¼Œæˆ‘ä»¬åœ¨ <code>modals.ts</code> æ–‡ä»¶ä¸­å¼•å…¥ï¼Œå¹¶æ·»åŠ åˆ°æ£€éªŒåˆ¤æ–­ä¸­å»ï¼š</p>
<pre><code class="language-ts">// modal.ts

import { noticeHandler } from './utils'

// çœç•¥ä¸€å¤§æ³¢ä»£ç 

onOpen (): void {
  
  // çœç•¥ä¸€å°æ³¢ä»£ç 
  
  new Setting(contentEl).addButton((btn) =&gt;
    btn
      .setButtonText('Add') // è®¾ç½®æŒ‰é’®æ–‡æ¡ˆ
      .setCta()
      .onClick(() =&gt; {
        // åœ¨ä¸Šè¿° input çš„ onChange äº‹ä»¶ä¸­å·²ç»ä¿å­˜äº† linkName ä»¥åŠ linkUrl
        // åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–è¿›è¡Œæ ¡éªŒ
        const { linkName, linkUrl } = this
        if (!(linkName.trim())) {
          noticeHandler('Link name is required!')
        } else if (!(linkUrl.trim())) {
          noticeHandler('Link url is required!')
        }
      })
  )
}
</code></pre>
<p>é€šè¿‡æ ¡éªŒåï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¡«å…¥çš„å€¼è¿›è¡Œä¿å­˜ï¼Œæ‰€è°“çš„ä¿å­˜å…¶å®å°±æ˜¯å°†å€¼å†™å…¥æ–‡ä»¶ä¸­ã€‚ä¸ºäº†ä¿è¯æ¨¡æ€æ¡†æ¨¡å—çš„çº¯å‡€ï¼Œæˆ‘ä»¬å°†ä¿å­˜çš„é€»è¾‘æ”¾åœ¨ <code>main.ts</code> ä¸­å®Œæˆã€‚æ‰€ä»¥ï¼Œåœ¨ <code>main.ts</code> ä¸­è°ƒç”¨è¿™ä¸ª <strong>Modal</strong> çš„æ—¶å€™ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºä¿å­˜é“¾æ¥è®¾ç½®ã€‚åŒæ—¶ï¼Œåœ¨ <code>main.ts</code> ä¸­éœ€è¦é€šè¿‡ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Plugin_2.html#addcommand">addCommand</a> æ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨äºå‘¼èµ·æ¨¡æ€æ¡†ã€‚</p>
<p>æ‰“å¼€ <code>main.ts</code>ï¼Œæ·»åŠ ä¿å­˜åœ°å€é…ç½®çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ <code>onload</code> æ–¹æ³•ä¸­åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤çš„é€»è¾‘ï¼š</p>
<pre><code class="language-ts">// main.ts

import { Plugin, Editor } from &quot;obsidian&quot;
import { AddLink } from &quot;./modals&quot;
import { LinkKeeperSettingTab } from './settings'
import { readFile, writeFile } from 'fs/promises'
import { noticeHandler } from './utils'
interface LinkKeeperSettings {
  filepath: string
}

interface Options {
  [key: string]: string
}

const DEFAULT_SETTINGS: Partial&lt;LinkKeeperSettings&gt; = {
  filepath: `${process.env.HOME}/etl.json`
}

export default class LinkKeeperPlugin extends Plugin {
  settings: LinkKeeperSettings

  /**
   * get all links
   * @param cb 
   */
  async getLinks (cb: (data: Options) =&gt; void) {
    try {
      const data = await readFile(this.settings.filepath, { encoding: 'utf-8'})
      cb(JSON.parse(data || '{}'))
    } catch (err) {
      noticeHandler(err.message)
    }
  }
  
  /**
   * save link
   * @param data 
   * @param message 
   */
  async saveLink (data: Options, message: string) {
    try {
      await writeFile(this.settings.filepath, JSON.stringify(data))
      noticeHandler(message)
    } catch (err) {
      noticeHandler(err.message)
    }
  }

  /**
   * add link submission
   * @param name 
   * @param url 
   */
  onSubmit (name: string, url: string) {
    this.getLinks(async (data: Options) =&gt; {
      if (Object.prototype.toString.call(data) === '[object Object]') {
        this.saveLink({...data, [name]: url}, 'Add Link successfully!')
      } else {
        noticeHandler('Data format error! It must be a json object.')
      }
    })
  }

  /**
   * init modal
   * @param type 
   * @param options 
   * @returns 
   */
  initModal (type: string) {
    switch (type) {
      case 'addLink':
        return new AddLink(this.app, this.onSubmit.bind(this))

      default: break
    }
  }

  async onload() {
    // æ·»åŠ å‘¼èµ·æ¨¡æ€æ¡†çš„é€»è¾‘
    this.addCommand({
      id: &quot;add-link&quot;, // ç”¨äºè®¾ç½®æ¨¡æ€æ¡† id
      name: &quot;Add link&quot;, // ç”¨äºè®¾ç½®æ¨¡æ€æ¡†åç§°
      callback: () =&gt; { // æ‰§è¡Œå‘½ä»¤çš„å›è°ƒå‡½æ•°
        // æ‰“å¼€æ¨¡æ€æ¡†
        this.initModal('addLink').open()
      }
    })
  }
}
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬æ·»åŠ äº† <code>onSubmit</code> æ–¹æ³•ï¼Œæä¾›ç»™æ¨¡æ€æ¡†ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åœ°å€è®¾ç½®ã€‚å›åˆ° <code>modal.ts</code> æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æŒ‰é’®çš„å›è°ƒäº‹ä»¶ä¸­åŠ å…¥ä¿å­˜åœ°å€çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-ts">// modal.ts

export class AddLink extends Modal {
  linkName: string
  linkUrl: string

  onSubmit: (linkName: string, linkUrl: string) =&gt; void

  constructor(
    app: App,
    onSubmit: (linkName: string, linkUrl: string) =&gt; void
  ) {
    // çœç•¥ä¸€å°æ³¢ä»£ç 
    
    // ç»‘å®šä¼ è¿‡æ¥çš„ onSubmit æ–¹æ³•
    this.onSubmit = onSubmit
  }

  onOpen (): void {
    // çœç•¥ä¸€å°æ³¢ä»£ç 
    new Setting(contentEl).addButton((btn) =&gt;
      btn
        .setButtonText('Add')
        .setCta()
        .onClick(() =&gt; {
          const { linkName, linkUrl } = this
          if (!(linkName.trim())) {
            noticeHandler('Link name is required!')
          } else if (!(linkUrl.trim())) {
            noticeHandler('Link url is required!')
          } else {
            this.close() // æ·»åŠ å®Œæˆåï¼Œéœ€è¦å…³é—­æ¨¡æ€æ¡†
            this.onSubmit(this.linkName, this.linkUrl) // è°ƒç”¨ä¼ è¿‡æ¥çš„ onSubmit æ–¹æ³•
          }
        })
    )
  }
  
  // çœç•¥ä¸€å°æ³¢ä»£ç 
}
</code></pre>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„æ¨¡æ€æ¡†åŠŸèƒ½å·²ç»å®Œæˆäº†ã€‚è¿˜è®°å¾—æˆ‘ä»¬åœ¨ <code>modal.ts</code> ä¸­æ·»åŠ çš„ç”¨äºå‘¼èµ·æ¨¡æ€æ¡†çš„è‡ªå®šä¹‰æŒ‡ä»¤ä¹ˆï¼Ÿç°åœ¨æˆ‘ä»¬å°±æ¥ç”¨å®ƒå‘¼èµ·æ·»åŠ åœ°å€çš„æ¨¡æ€æ¡†ã€‚</p>
<p>ç‚¹å‡» Obsidian ç•Œé¢å·¦ä¾§çš„å‘½ä»¤è¡Œå›¾æ ‡ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­æœç´¢ <code>Add link</code>ï¼ˆä¹‹å‰åœ¨ <code>addCommand</code> ä¸­è®¾ç½®çš„è‡ªå®šä¹‰æŒ‡ä»¤åç§°ï¼‰:</p>
<p align="center">
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37b2b6e620c04e848558b48d37345d52~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<p>é€‰æ‹©è“æ¡†ä¸­çš„å‘½ä»¤åï¼Œå°±ä¼šå¼¹å‡ºæ·»åŠ åœ°å€çš„æ¨¡æ€æ¡†äº†ï¼š</p>
<p align="center">
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3eb8f27f79c4410abae5afcac274eb3~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<p>ç›´æ¥ç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œä¹Ÿä¼šåœ¨å³ä¸Šè§’çœ‹åˆ°æç¤ºä¿¡æ¯ã€‚</p>
<h2 id="åˆ é™¤é“¾æ¥">åˆ é™¤é“¾æ¥</h2>
<p>è€è§„çŸ©ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥è®¾æƒ³ä¸‹ç”¨äºåˆ é™¤çš„æ¨¡æ€æ¡†éœ€è¦å®ç°å“ªäº›åŠŸèƒ½ï¼š</p>
<blockquote>
<ol>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªä¸‹æ‹‰æ¡†ï¼Œç”¨äºé€‰æ‹©éœ€è¦åˆ é™¤çš„åœ°å€ï¼›</li>
<li>ä¹‹åå†æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»ååˆ é™¤æ‰€é€‰çš„åœ°å€ï¼›</li>
<li>å¦‚æœé‡åˆ°å¼‚å¸¸åœºæ™¯æˆ‘ä»¬éœ€è¦ç»™å‡ºå‹å¥½çš„å¼¹çª—æç¤ºã€‚</li>
</ol>
</blockquote>
<p>æœ‰äº†æ·»åŠ é“¾æ¥çš„ç»éªŒï¼Œåˆ›å»ºåˆ é™¤é“¾æ¥çš„æ¨¡æ€æ¡†å°±å®¹æ˜“å¤šäº†ã€‚åœ¨åˆ é™¤é“¾æ¥çš„æ¨¡æ€æ¡†ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <strong>Setting</strong> ä¸­æä¾›çš„ <a href="">addDropdown</a> æ–¹æ³•æ·»åŠ ä¸€ä¸ªä¸‹æ‹‰æ¡†ï¼Œç”¨äºé€‰æ‹©éœ€è¦åˆ é™¤çš„åœ°å€ã€‚æ­¤å¤„ç›´æ¥ä¸Šä»£ç ï¼š</p>
<pre><code class="language-ts">export class DeleteLink extends Modal {
  linkName: string
  options: Options

  onDelete: (linkName: string) =&gt; void

  constructor (
    app: App,
    options: Options, // ç”¨æ¥æ¥æ”¶ä¸‹æ‹‰é¡¹
    onDelete: (linkName: string) =&gt; void // åˆ é™¤äº‹ä»¶
  ) {
    super(app)
    this.onDelete = onDelete
    this.options = options
    this.linkName = Object.keys(options)[0] || '' // é»˜è®¤åˆ é™¤ç¬¬ä¸€ä¸ª
  }

  onOpen (): void {
    const { contentEl } = this

    contentEl.createEl(&quot;h1&quot;, { text: &quot;Delete Link&quot;, cls: &quot;title&quot; })
    
    // åˆ›å»ºä¸‹æ‹‰æ¡†
    new Setting(contentEl).setName(&quot;Link name&quot;).addDropdown(dp =&gt; 
      dp.addOptions(this.options).onChange(value =&gt; {
        this.linkName = value
      })
    )
    // åˆ›å»ºåˆ é™¤æŒ‰é’®
    new Setting(contentEl).addButton((btn) =&gt;
      btn
        .setButtonText('Delete')
        .setCta()
        .onClick(() =&gt; {
          const { linkName } = this
          if (!linkName) {
            noticeHandler('Link name is required!')
          } else {
            this.close()
            this.onDelete(this.linkName)
          }
        })
    )
  }

  onClose(): void {
    this.contentEl.empty()
  }
}
</code></pre>
<p>ä¹‹åå›åˆ° <code>main.ts</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åŠ å…¥ <strong>åˆ é™¤æ¨¡æ€æ¡†çš„è°ƒå‡ºæŒ‡ä»¤ã€è·å–åˆ é™¤ä¸‹æ‹‰é€‰é¡¹çš„ options ä»¥åŠæ·»åŠ åˆ é™¤æ–¹æ³•</strong>ï¼š</p>
<pre><code class="language-ts">// main.ts

import { Plugin, Editor } from &quot;obsidian&quot;
import { AddLink, DeleteLink } from &quot;./modals&quot;
import { LinkKeeperSettingTab } from './settings'
import { readFile, writeFile } from 'fs/promises'
import { noticeHandler } from './utils'
interface LinkKeeperSettings {
  filepath: string
}

interface Options {
  [key: string]: string
}

const DEFAULT_SETTINGS: Partial&lt;LinkKeeperSettings&gt; = {
  filepath: `${process.env.HOME}/etl.json`
}

export default class LinkKeeperPlugin extends Plugin {
  settings: LinkKeeperSettings

  /**
   * get all links
   * @param cb 
   */
  async getLinks (cb: (data: Options) =&gt; void) {
    try {
      const data = await readFile(this.settings.filepath, { encoding: 'utf-8'})
      cb(JSON.parse(data || '{}'))
    } catch (err) {
      noticeHandler(err.message)
    }
  }
  
  /**
   * delete link by name
   * @param name 
   */
  async onDelete (name: string) {
    await this.getLinks(async (data: Options) =&gt; {
      delete data[name]
      this.saveLink(data, `Link named ${name} has been deleted!`)
    })
  }

  /**
   * init modal
   * @param type 
   * @param options 
   * @returns 
   */
  initModal (type: string, options?: Options) {
    switch (type) {
      // çœç•¥ä¸€å°æ³¢ä»£ç 
      
      // åˆ›å»ºåˆ é™¤åœ°å€çš„æ¨¡æ€æ¡†
      case 'deleteLink':
        return new DeleteLink(this.app, options, this.onDelete.bind(this))

      default: break
    }
  }

  async onload() {
    // çœç•¥ä¸€å°æ³¢ä»£ç 
    
    // æ–°å¢å‘¼å‡ºåˆ é™¤æ¨¡æ€æ¡†çš„è‡ªå®šä¹‰æŒ‡ä»¤
    this.addCommand({
      id: &quot;delete-link&quot;,
      name: 'Delete link',
      callback: () =&gt; {
        this.getLinks(async (data: Options) =&gt; {
          // åˆ›å»ºåˆ é™¤çš„æ¨¡æ€æ¡†ï¼Œå¹¶ä¼ å…¥ options
          this.initModal('deleteLink', Object.keys(data).reduce((obj, key) =&gt; ({
            ...obj,
            [key]: key
          }), {})).open()
        })
      }
    })
  }

  // çœç•¥ä¸€å°æ³¢ä»£ç 
}
</code></pre>
<p>ä¹‹åï¼Œç‚¹å‡» Obsidian ç•Œé¢å·¦ä¾§çš„å‘½ä»¤è¡Œå›¾æ ‡ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­æœç´¢ <code>Delete link</code> å¹¶ç‚¹å‡»ï¼Œå°±å¯ä»¥çœ‹åˆ°åˆ é™¤åœ°å€çš„æ¨¡æ€å¼¹æ¡†å•¦ï¼š</p>
<p align="center">
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92cb761ff8d143848c0d345c6437ef29~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<h2 id="æŸ¥çœ‹-è·³è½¬é“¾æ¥">æŸ¥çœ‹ &amp;&amp; è·³è½¬é“¾æ¥</h2>
<p>åœ¨è¿™ä¸ªæ¨¡æ€æ¡†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä»¥ä¸‹å‡ ç§åŠŸèƒ½ï¼š</p>
<blockquote>
<ol>
<li>æä¾›ä¸€ä¸ªå¯ä»¥æŒ‰ç…§åœ°å€åç§°è¿›è¡Œç­›é€‰çš„æœç´¢æ¡†ï¼›</li>
<li>åˆ—å‡ºå·²ç»ä¿å­˜çš„åœ°å€ï¼Œæ˜¾ç¤ºå¯¹åº”çš„åç§°ä»¥åŠè·³è½¬åœ°å€ï¼Œå¹¶ä¸”ç»™åœ°å€åŠ ä¸Šé“¾æ¥ï¼Œä»¥ä¾¿ç›´æ¥ç‚¹å‡»è·³è½¬</li>
</ol>
</blockquote>
<p>å›åˆ° <code>modals.ts</code> ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºç”¨äºç½—åˆ—åœ°å€çš„æ¨¡æ€æ¡†ï¼š</p>
<pre><code class="language-ts">// modal.ts

export class ListAllLinks extends Modal {
  options: Options

  constructor (
    app: App,
    options: Options // ç”¨äºæ¥æ”¶åœ°å€é…ç½®
  ) {
    super(app)
    this.options = options
  }

  onOpen(): void {
    const { contentEl } = this
    // åˆ›å»ºæ ‡é¢˜
    contentEl.createEl(&quot;h1&quot;, { text: &quot;All Links&quot;, cls: &quot;title&quot; })
  }

  onClose(): void {
    this.contentEl.empty()
  }
}
</code></pre>
<h3 id="æ·»åŠ æœç´¢æ¡†">æ·»åŠ æœç´¢æ¡†</h3>
<p>è¿™é‡Œè¦ç”¨åˆ° <strong>Setting</strong> ä¸­æä¾›çš„ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/classes/Setting.html#addsearch">addSearch</a> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæœç´¢æ¡†ï¼š</p>
<pre><code class="language-ts">// modal.ts

// çœç•¥ä¸€å°æ³¢ä»£ç 

onOpen(): void {
    const { contentEl } = this

    contentEl.createEl(&quot;h1&quot;, { text: &quot;All Links&quot;, cls: &quot;title&quot; })
    // åˆ›å»ºæœç´¢æ¡†
    new Setting(contentEl).setName('Search').addSearch(el =&gt; {
      el.setPlaceholder('Input the link name...').onChange(val =&gt; {
        // ç›‘å¬æœç´¢æ¡†çš„ change äº‹ä»¶ï¼Œåœ¨æœç´¢æ¡†å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ¸²æŸ“åˆ—è¡¨
      })
    })
}
</code></pre>
<h3 id="æ·»åŠ åœ°å€åˆ—è¡¨">æ·»åŠ åœ°å€åˆ—è¡¨</h3>
<p>åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ä¸€ç›´æœ‰ä½¿ç”¨çš„ <strong>Setting</strong> ç±»ä¸»è¦æ˜¯ç”¨æ¥åˆ›å»ºè¡¨å•æ§ä»¶çš„ï¼Œè€Œåˆ—è¡¨å†…å®¹ä¸»è¦ç”±è‡ªå®šä¹‰æ ‡ç­¾æ„æˆï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/guides/html-elements.html#create-html-elements-using-createel">createEl</a> æ–¹æ³•ã€‚ç”±äºåœ¨æ¨¡æ€æ¡†åˆå§‹åŒ–é˜¶æ®µä»¥åŠæœç´¢æ¡†å†…å®¹å˜åŒ–é˜¶æ®µéƒ½éœ€è¦æ¸²æŸ“åˆ—è¡¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†åˆ—è¡¨æ¸²æŸ“çš„é€»è¾‘æŠ½å–å‡ºæ¥ã€‚</p>
<pre><code class="language-ts">// modal.ts

export class ListAllLinks extends Modal {
  options: Options

  constructor (
    app: App,
    options: Options
  ) {
    super(app)
    this.options = options
  }
  
  /**
   * create list item
   * @param container list container
   * @param key link name
   * @param value link url
   * @param isLink determine whether it is a link
   */
  createListItem (container: Element, key: string, value: string, isLink = true) {
    // å‘ list å®¹å™¨ä¸­æ·»åŠ åœ°å€é¡¹
    const box = container.createEl(&quot;div&quot;, { cls: `list-item ${!isLink ? 'list-item-header' : ''}`})
    // æ·»åŠ æ˜¾ç¤ºåœ°å€åç§°çš„å®¹å™¨
    box.createEl(&quot;div&quot;, { text: key })
    // æ·»åŠ æ˜¾ç¤º url çš„å®¹å™¨
    const linkBox = box.createEl(&quot;div&quot;)
    // åˆ¤æ–­æ˜¯å¦æ˜¯é“¾æ¥
    if (isLink) {
      // æ˜¯é“¾æ¥çš„è¯æ·»åŠ  a æ ‡ç­¾ç”¨äºè·³è½¬
      linkBox.createEl('a', { text: value, href: value})
    } else {
      // å¦åˆ™ç›´æ¥æ˜¾ç¤ºå†…å®¹
      linkBox.createSpan({ text: value })
    }
  }
  
  // æ¸²æŸ“åˆ—è¡¨
  renderList (key = ''): Element {
    // è·å–æ‰€æœ‰åœ°å€ä¿¡æ¯
    let options = this.options
    // æ ¹æ®ä¼ è¿‡æ¥çš„ key ç­›é€‰éœ€è¦æ˜¾ç¤ºçš„åœ°å€å†…å®¹
    if (key) {
      options = Object.keys(options).reduce((obj: Options, item) =&gt; {
        if (item.includes(key)) obj = { ...obj, [item]: options[item] }
        return obj
      }, {})
    }
    // åˆ›å»ºæ˜¾ç¤ºåˆ—è¡¨çš„å†…å®¹å®¹å™¨
    const container = this.contentEl.createEl(&quot;div&quot;)
    // æ·»åŠ è¡¨å¤´ä¿¡æ¯
    this.createListItem(container, 'Name', 'Url', false)
    // åˆ›å»º list å®¹å™¨
    const listContainer = container.createEl('div', { cls: 'list-container'})
    const keys = Object.keys(options)
    // éå†æ˜¾ç¤ºåˆ—è¡¨
    if (keys.length) {
      keys.forEach(key =&gt; {
        this.createListItem(listContainer, key, options[key])
      })
    } else {
      // å½“æ²¡æœ‰æœç´¢åˆ°ç›¸åº”ç»“æœæ—¶ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
      listContainer.createEl('div', { text: 'No results!', cls: 'list-empty' })
    }

    return container
  }

  onOpen(): void {
    const { contentEl } = this

    contentEl.createEl(&quot;h1&quot;, { text: &quot;All Links&quot;, cls: &quot;title&quot; })

    let contentBox: Element = null

    new Setting(contentEl).setName('Search').addSearch(el =&gt; {
      el.setPlaceholder('Input the link name...').onChange(val =&gt; {
        // å½“æœç´¢å†…å®¹å˜åŒ–æ—¶ï¼Œæ¸…ç©ºåˆ—è¡¨
        contentBox.empty()
        // é‡æ–°æ¸²æŸ“åˆ—è¡¨
        contentBox = this.renderList(val)
      })
    })
    // é¦–æ¬¡åŠ è½½æ—¶æ¸²æŸ“åˆ—è¡¨
    contentBox = this.renderList()
  }

  onClose(): void {
    this.contentEl.empty()
  }
}
</code></pre>
<p>ä¹‹åï¼Œæˆ‘ä»¬è¦å°†åˆ—è¡¨çš„æ ·å¼å†™å…¥ <code>style.css</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-css">// style.css
/* Sets all the text color to red! */
.title {
  text-align: center;
  font-size: 20px;
}

.list-container {
  max-height: 300px;
  overflow-y: scroll;
}

.list-item-header {
  font-size: 18px;
  font-weight: bold;
}

.list-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.list-item div {
  flex: 1;
}

.list-item:not(.list-item-header) div:first-child {
  color: #222;
  font-weight: bold;
}

.list-item div:last-child {
  text-align: right;
}

.list-item:not(.list-item-header) {
  background-color: #c0c0c0;
  padding: 8px;
  border-radius: 4px;
}

.list-empty {
  text-align: center;
  font-size: 16px;
}

</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>main.ts</code> æ–‡ä»¶ä¸­æ·»åŠ å‘¼èµ·æ˜¾ç¤ºåˆ—è¡¨çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå¹¶å°†åœ°å€ä¿¡æ¯ä¼ ç»™æ¨¡æ€æ¡†ï¼š</p>
<pre><code class="language-ts">// main.ts

import { Plugin, Editor } from &quot;obsidian&quot;
import { AddLink, DeleteLink, ListAllLinks } from &quot;./modals&quot;
import { LinkKeeperSettingTab } from './settings'
import { readFile, writeFile } from 'fs/promises'
import { noticeHandler } from './utils'
interface LinkKeeperSettings {
  filepath: string
}

interface Options {
  [key: string]: string
}

const DEFAULT_SETTINGS: Partial&lt;LinkKeeperSettings&gt; = {
  filepath: `${process.env.HOME}/etl.json`
}

export default class LinkKeeperPlugin extends Plugin {
  settings: LinkKeeperSettings

  /**
   * get all links
   * @param cb 
   */
  async getLinks (cb: (data: Options) =&gt; void) {
    try {
      const data = await readFile(this.settings.filepath, { encoding: 'utf-8'})
      cb(JSON.parse(data || '{}'))
    } catch (err) {
      noticeHandler(err.message)
    }
  }
  
  // çœç•¥ä¸€å°æ³¢ä»£ç 
  
  /**
   * init modal
   * @param type 
   * @param options 
   * @returns 
   */
  initModal (type: string, options?: Options) {
    switch (type) {
      // çœç•¥ä¸€å°æ³¢ä»£ç 
      
      case 'listLink':
        return new ListAllLinks(this.app, options)

      default: break
    }
  }

  async onload() {
    // çœç•¥ä¸€å°æ³¢ä»£ç 
    
    // æ·»åŠ å‘¼èµ·æ˜¾ç¤ºåœ°å€åˆ—è¡¨æ¨¡æ€æ¡†çš„æŒ‡ä»¤
    this.addCommand({
      id: 'list-links',
      name: 'List links',
      icon: 'link',
      callback: () =&gt; {
        this.getLinks(async (data: Options) =&gt; {
          this.initModal('listLink', data).open()
        })
      }
    })
  }
  
  // çœç•¥ä¸€å°æ³¢ä»£ç 
}
</code></pre>
<p>ä¹‹åï¼Œç‚¹å‡» Obsidian ç•Œé¢å·¦ä¾§çš„å‘½ä»¤è¡Œå›¾æ ‡ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­æœç´¢ <code>List link</code> å¹¶ç‚¹å‡»ï¼Œå°±å¯ä»¥çœ‹åˆ°åœ°å€åˆ—è¡¨çš„æ¨¡æ€å¼¹æ¡†å•¦~åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ç›¸åº”çš„æœç´¢ç»“æœï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæœç´¢å†…å®¹çš„åœ°å€ä¿¡æ¯ï¼Œåˆ™ä¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼š</p>
<p align="center">
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b112c98bf394ec1b3f6134f16af0f78~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ’ä»¶å°±åŸºæœ¬å¼€å‘å®Œæˆå•¦~~</p>
<h1 id="æ’ä»¶ä¼˜åŒ–">æ’ä»¶ä¼˜åŒ–</h1>
<h2 id="hotkeys">Hotkeys</h2>
<p>åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„æ–¹å¼æ¥å‘¼èµ·æ¨¡æ€æ¡†ï¼Œè™½ç„¶è¿‡ç¨‹å¹¶ä¸å¤æ‚ï¼Œä½†å¤šå°‘è¿˜æ˜¯æœ‰äº›ç¹çã€‚Obsidian ç»™æ’ä»¶çš„è‡ªå®šä¹‰æŒ‡ä»¤æä¾›äº†è®¾ç½®çƒ­é”®çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è‡ªå®šä¹‰æŒ‡ä»¤çš„çƒ­é”®æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<p align="center">
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/67c6ab5528714e5790c21de10d93e417~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<h2 id="æ·»åŠ é€‰ä¸­çš„åœ°å€">æ·»åŠ é€‰ä¸­çš„åœ°å€</h2>
<p>å¦‚æœåœ¨ä½¿ç”¨ Obsidian çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æƒ³è¦ä¿å­˜æ–‡æ¡£ä¸­æŸä¸ªåœ°å€çš„æƒ…å†µï¼Œå¦‚æœè¦å…ˆå¤åˆ¶åœ°å€ï¼Œç„¶åå†ç²˜è´´åˆ°æ¨¡æ€æ¡†ä¸­å»ä¿å­˜ï¼Œæ„Ÿè§‰å¤šå°‘æœ‰äº›éº»çƒ¦ã€‚é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥é€‰ä¸­æƒ³è¦æ·»åŠ çš„åœ°å€ç›´æ¥è¿›è¡Œæ·»åŠ å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼ï¼</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <strong>addCommand</strong> æ–¹æ³•ä¸­çš„ <a href="https://luhaifeng666.github.io/obsidian-plugin-docs-zh/zh/api/interfaces/Command.html#editorcallback">editorCallback</a> äº‹ä»¶ä¸­è·å–åˆ°å½“å‰ç¼–è¾‘å™¨çš„ <code>editor</code> å¯¹è±¡ï¼Œå¹¶å€Ÿæ­¤è·å–åˆ°é€‰ä¸­çš„åœ°å€ï¼Œä¹‹åè‡ªåŠ¨å¡«å…¥æ¨¡æ€æ¡†ä¸­ã€‚ç¾æ»‹æ»‹~</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…ˆå‰æ·»åŠ çš„ <code>Add link</code> è‡ªå®šä¹‰æŒ‡ä»¤ä»¥åŠæ·»åŠ åœ°å€çš„æ¨¡æ€æ¡†é€»è¾‘åšäº›ä¿®æ”¹ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°† <code>callback</code> æ–¹æ³•æ”¹ä¸º <code>editorCallback</code> æ–¹æ³•ï¼Œå¹¶å°†é€‰ä¸­çš„å†…å®¹ä¼ ç»™æ¨¡æ€æ¡†ï¼š</p>
<pre><code class="language-ts">// main.ts

// çœç•¥ä¸€å¤§æ³¢ä»£ç 

initModal (type: string, options?: Options) {
  switch (type) {
    case 'addLink':
      return new AddLink(this.app, options.link, this.onSubmit.bind(this))
    // çœç•¥ä¸€å°æ³¢ä»£ç   
    default: break
  }
}

async onload() {
  // çœç•¥ä¸€å°æ³¢ä»£ç 
  this.addCommand({
    id: &quot;add-link&quot;,
    name: &quot;Add link&quot;,
    editorCallback: (editor: Editor) =&gt; {
      // è·å–é€‰ä¸­çš„åœ°å€
      const selection = editor.getSelection()
      this.initModal('addLink', { link: selection }).open()
    }
  })
}
</code></pre>
<p>ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æ·»åŠ åœ°å€çš„æ¨¡æ€æ¡†ä»£ç ï¼Œæ¥å—ä¼ å…¥çš„åœ°å€ï¼Œå¹¶å°†å…¶ä½œä¸ºé»˜è®¤å€¼è®¾ç½®åˆ°é“¾æ¥åœ°å€çš„æ–‡æœ¬æ¡†ä¸­ï¼š</p>
<pre><code class="language-ts">// modals.ts

export class AddLink extends Modal {
  linkName: string
  linkUrl: string

  onSubmit: (linkName: string, linkUrl: string) =&gt; void

  constructor(
    app: App,
    linkUrl: string, // æ¥å—ä¼ å…¥çš„åœ°å€ä¿¡æ¯
    onSubmit: (linkName: string, linkUrl: string) =&gt; void
  ) {
    super(app)
    this.linkName = ''
    this.linkUrl = linkUrl // å°†ä¼ å…¥çš„åœ°å€ä¿¡æ¯è®¾ç½®ä¸ºé»˜è®¤å€¼
    this.onSubmit = onSubmit
  }
  
  // çœç•¥ä¸€å¤§æ³¢ä»£ç 
}
</code></pre>
<p>æ”¹é€ å®Œæˆåï¼Œæ­¤æ—¶æˆ‘ä»¬é€‰ä¸­æƒ³è¦æ·»åŠ çš„é“¾æ¥åœ°å€ï¼Œç„¶åé€šè¿‡ <strong>çƒ­é”®</strong> çš„æ–¹å¼å‘¼èµ·æ¨¡æ€æ¡†ï¼Œå³å¯çœ‹åˆ°åœ°å€å·²ç»è¢«å¡«å…¥å…¶ä¸­ï¼š</p>
<p align="center">
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4891cd74fd64787887104770ddd315a~tplv-k3u1fbpfcp-watermark.image?" />
</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œlink-keeper æ’ä»¶å°±å·²ç»å®Œæˆå•¦~æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥<a href="https://github.com/luhaifeng666/obsidian-link-keeper">ä¸‹è½½</a>ä½¿ç”¨ã€‚å¦‚æœè§‰å¾—æ’ä»¶è¿˜å¯çš„å°ä¼™ä¼´ä»¬æ¬¢è¿  star ~</p>
<p>å¦å¤–ï¼Œç¬”è€…æœ€è¿‘åœ¨ç¿»è¯‘ Obsidian çš„<a href="https://github.com/luhaifeng666/obsidian-plugin-docs-zh">æ’ä»¶å¼€å‘æ–‡æ¡£</a>ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åŠ å…¥æˆ‘~ ç”±äºæœ¬äººæ°´å¹³æœ‰é™ï¼Œå¦‚æœæœ‰ç¿»è¯‘ä¸åˆ°ä½ä¹‹å¤„ä¹Ÿæ¬¢è¿å¤§ä½¬ä»¬æ issueï¼Œä»¥ä¾¿æˆ‘åŠæ—¶æ›´æ­£ã€‚</p>
<p align="center">
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b8c4600b4ca4e35bcebd0dd8bba4505~tplv-k3u1fbpfcp-watermark.image?" />
</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Tauri åˆä½“éªŒ ]]></title>
        <id>https://luhaifeng666.github.io/post/tauri-chu-ti-yan/</id>
        <link href="https://luhaifeng666.github.io/post/tauri-chu-ti-yan/">
        </link>
        <updated>2022-02-16T14:13:50.000Z</updated>
        <summary type="html"><![CDATA[<p>æåˆ°æ¡Œé¢å®¢æˆ·ç«¯å¼€å‘ï¼Œå¤§å®¶ä¼™å„¿ç¬¬ä¸€æ—¶é—´ä¼šæƒ³åˆ°çš„å¯èƒ½æ˜¯å…ƒè€çº§åˆ«çš„ <code>Electron</code>, äº¦æˆ–è€…æ˜¯å»å¹´å¾®è½¯æ–°å‘å¸ƒçš„<code>Webview2</code>ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥ç»“è¯†ä¸‹ä¸€ä¸ªåèµ·ä¹‹ç§€ -- <a href="https://tauri.studio/">Tauri</a>ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>æåˆ°æ¡Œé¢å®¢æˆ·ç«¯å¼€å‘ï¼Œå¤§å®¶ä¼™å„¿ç¬¬ä¸€æ—¶é—´ä¼šæƒ³åˆ°çš„å¯èƒ½æ˜¯å…ƒè€çº§åˆ«çš„ <code>Electron</code>, äº¦æˆ–è€…æ˜¯å»å¹´å¾®è½¯æ–°å‘å¸ƒçš„<code>Webview2</code>ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥ç»“è¯†ä¸‹ä¸€ä¸ªåèµ·ä¹‹ç§€ -- <a href="https://tauri.studio/">Tauri</a>ã€‚</p>
<!-- more -->
<p>æˆªæ­¢ç›®å‰ï¼Œ<a href="https://github.com/tauri-apps/tauri">Tauri</a> çš„ star æ•°å·²ç»è¾¾åˆ°äº† <code>31.4k+</code> ä¹‹å¤šï¼Œæ—¢ç„¶å®ƒå¦‚æ­¤å—æ¬¢è¿ï¼Œé‚£æˆ‘ä»¬å°±ä¸€èµ·æ¥ä½“éªŒä¸€æŠŠï¼Œçœ‹çœ‹å®ƒåˆ°åº•æœ‰ä½•è¿‡äººä¹‹å¤„ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œæ’¸èµ·è¢–å­ï¼Œå¼€å§‹</p>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68de4bc54a06486890513fe3255d3c77~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h1 id="ä»€ä¹ˆæ˜¯-tauri">ä»€ä¹ˆæ˜¯ Tauri</h1>
<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>Tauri æ˜¯ä¸€ä¸ªç”¨æ¥å¸®åŠ©å¼€å‘è€…ä»¬å¼€å‘ä¸»æµæ¡Œé¢å¹³å°åº”ç”¨çš„å·¥å…·åŒ… - å‡ ä¹å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ä¸ªç°åœ¨å·²æœ‰çš„å‰ç«¯æ¡†æ¶ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ä½¿ç”¨ <code>Rust</code> è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”è„šæ‰‹æ¶å€ŸåŠ© <code>Node.js</code> ä½¿ Tauri æˆä¸ºä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨å¤šè¯­è¨€å¼€å‘ä¸ç»´æŠ¤appçš„å·¥å…·ã€‚</p>
<h2 id="ä¼˜åŠ¿">ä¼˜åŠ¿</h2>
<p>é‚£ Tauri ä¸å…¶ä»–æ¡†æ¶ç›¸æ¯”ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿåœ¨ Tauri çš„ github ä»“åº“ä¸­ï¼Œå®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªè¡¨æ ¼ï¼Œå°† Tauri ä¸ Electron åšäº†ä¸ªå¯¹æ¯”ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Detail</th>
<th>Tauri</th>
<th>Electron</th>
</tr>
</thead>
<tbody>
<tr>
<td>Installer Size Linux</td>
<td>3.1 MB</td>
<td>52.1 MB</td>
</tr>
<tr>
<td>Memory Consumption Linux</td>
<td>180 MB</td>
<td>462 MB</td>
</tr>
<tr>
<td>Launch Time Linux</td>
<td>0.39s</td>
<td>0.80s</td>
</tr>
<tr>
<td>Interface Service Provider</td>
<td>WRY</td>
<td>Chromium</td>
</tr>
<tr>
<td>Backend Binding</td>
<td>Rust</td>
<td>Node.js (ECMAScript)</td>
</tr>
<tr>
<td>Underlying Engine</td>
<td>Rust</td>
<td>V8 (C/C++)</td>
</tr>
<tr>
<td>FLOSS</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Multithreading</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Bytecode Delivery</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Multiple Windows</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Auto Updater</td>
<td>Yes</td>
<td>Yes1</td>
</tr>
<tr>
<td>Custom App Icon</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Windows Binary</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>MacOS Binary</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Linux Binary</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>iOS Binary</td>
<td>Soon</td>
<td>No</td>
</tr>
<tr>
<td>Android Binary</td>
<td>Soon</td>
<td>No</td>
</tr>
<tr>
<td>Desktop Tray</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Sidecar Binaries</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<blockquote>
<ol>
<li>ç›¸æ¯”äº Electron çš„å®‰è£…åŒ…å¤§å°ï¼Œä»…ä»…åªæœ‰ 3.1MB çš„ Tauri æ˜¾ç„¶æ›´å°æ›´è½»ä¾¿ã€‚å› ä¸º Tauri æ”¾å¼ƒäº†åºå¤§çš„ Chromium å†…æ ¸ï¼Œæ”¹ç”¨ <a href="https://github.com/tauri-apps/wry">WRY(Webview Rendering library)</a> (ä¸€ç§è·¨å¹³å°çš„ Webview æ¸²æŸ“å™¨ï¼Œæ”¯æŒä¸»æµçš„æ“ä½œç³»ç»Ÿï¼Œä¾‹å¦‚ <strong>Windows, macOS, ä»¥åŠ Linuxã€‚</strong>)ï¼Œè€Œä¸”ä¹Ÿæ”¾å¼ƒäº† <code>Nodejs</code>ï¼Œæ”¹ç”¨ <code>Rust</code>;</li>
<li>åœ¨å†…å­˜å ç”¨ä»¥åŠå¯åŠ¨é€Ÿåº¦ä¸Šï¼ŒTauri ä¹Ÿæ›´èƒœä¸€ç­¹ï¼›</li>
<li>é™¤å´ <strong>Windows, macOS, ä»¥åŠ Linux</strong> ä»¥å¤–ï¼ŒTauri å®˜æ–¹åç»­æœ‰è®¡åˆ’æ”¯æŒ <code>Android</code> ä»¥åŠ <code>iOS</code> å¹³å°ï¼Œè¿™ä¹Ÿæ˜¯ Electron æ‰€ä¸å…·å¤‡çš„ï¼›</li>
<li>å†…éƒ¨é›†æˆäº†å¤šç§æ¨¡æ¿ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œå¯¹äºå¼€å‘è€…ä¹Ÿæ›´åŠ å‹å¥½ã€‚ä½¿ç”¨ <code>vue-cli</code> çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…å®˜æ–¹æä¾›çš„æ’ä»¶ï¼š <a href="https://github.com/tauri-apps/vue-cli-plugin-tauri">vue-cli-plugin-tauri</a>ã€‚</li>
</ol>
</blockquote>
<h1 id="tauri-åˆä½“éªŒ">Tauri åˆä½“éªŒ</h1>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ç¬”è€…çš„ç¯å¢ƒæ­å»ºåŸºäº <code>MacOS</code>, æƒ³è¦äº†è§£åœ¨ <code>Windows</code> æˆ–è€… <code>Linux</code> å¹³å°ç¯å¢ƒæ­å»ºçš„å°ä¼™ä¼´ä»¬å¯ä»¥ç§»æ­¥è‡³<a href="https://tauri.studio/docs/getting-started/prerequisites">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<h2 id="tauri-ç¯å¢ƒé…ç½®">Tauri ç¯å¢ƒé…ç½®</h2>
<h3 id="ç¬¬ä¸€æ­¥å®‰è£…-xcode">ç¬¬ä¸€æ­¥ï¼šå®‰è£… Xcode</h3>
<p>ä½ å¯ä»¥é€‰æ‹©ä» App Store ä¸­ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre><code>$ xcode-select --install
</code></pre>
<h3 id="ç¬¬äºŒæ­¥å®‰è£…-node">ç¬¬äºŒæ­¥ï¼šå®‰è£… Node</h3>
<p>ç›¸ä¿¡å‰ç«¯çš„å°ä¼™ä¼´ä»¬éƒ½å·²ç»å®‰è£…äº†ã€‚å¦‚æœæ­£åœ¨çœ‹è¿™ç¯‡æ–‡ç« çš„ä½ å°šæœªå®‰è£… Nodejsï¼Œè¯·ç§»æ­¥è‡³ <a href="http://nodejs.cn/">Nodejså®˜ç½‘</a> ä¸‹è½½ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥å®‰è£…-rust-ç¼–è¯‘å™¨-rustup">ç¬¬ä¸‰æ­¥ï¼šå®‰è£… Rust ç¼–è¯‘å™¨ <a href="https://rustup.rs/">rustup</a></h3>
<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœæœ‰å°ä¼™ä¼´åœ¨è¿™ä¸€æ­¥éª¤å¡å£³ï¼Œé‡åˆ°äº†å®‰è£…å¤±è´¥æˆ–è€…å®‰è£…è¿‡äºç¼“æ…¢çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•ç§‘å­¦ä¸Šç½‘ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰ã€‚</p>
</blockquote>
<p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code>$ rustc --version
</code></pre>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ç¯å¢ƒå°±å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥å¼€å‘ä¸€ä¸ªç®€å•çš„æ–‡æ¡£åº”ç”¨ã€‚</p>
<h2 id="tauri-vuepress-å¼€å‘ä¸€ä¸ªæ–‡æ¡£åº”ç”¨">Tauri + Vuepress å¼€å‘ä¸€ä¸ªæ–‡æ¡£åº”ç”¨</h2>
<h3 id="èƒŒæ™¯">èƒŒæ™¯</h3>
<p>æˆ‘ä»¬æ—¥å¸¸åœ¨æŸ¥æ‰¾æ–‡æ¡£çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šä¼˜å…ˆæƒ³åˆ°å»å¯¹åº”çš„å®˜ç½‘æŸ¥çœ‹ Docs æ–‡æ¡£ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³å»æŸ¥çœ‹ Webpack å¯¹åº”çš„æ–‡æ¡£æ—¶ï¼Œæ“ä½œæµç¨‹ä¸€èˆ¬å°±æ˜¯ï¼š</p>
<blockquote>
<ol>
<li>æ‰“å¼€æµè§ˆå™¨</li>
<li>æ‰“å¼€ Webpack å®˜æ–¹ç½‘ç«™</li>
<li>ç‚¹å¼€æ–‡æ¡£åœ°å€</li>
<li>æŸ¥çœ‹å¯¹åº”çš„æ–‡æ¡£</li>
</ol>
</blockquote>
<p>Webpack å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªæœ¬åœ°çš„åº”ç”¨ï¼Œæ–¹ä¾¿å°ä¼™ä¼´ä»¬ç›´æ¥åœ¨æœ¬åœ°å°±å¯ä»¥æŸ¥çœ‹ç›¸åº”çš„æ–‡æ¡£ï¼ŒèŠ‚çœä¸€äº›ç¹ççš„æ“ä½œ</p>
<figure data-type="image" tabindex="2"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc980ab20f3c49ccafcabdcc04051bf6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>è€Œæˆ‘ä»¬è¦å®ç°è¿™ä¸ªåº”ç”¨çš„åŠŸèƒ½å°±ä¸ä¹‹ç±»ä¼¼ã€‚</p>
<p>ä¹‹å‰æˆ‘ä¸€ç›´åœ¨åˆ· Leetcode çš„ç®—æ³•é¢˜ï¼Œå¹¶æŠŠ <a href="https://github.com/luhaifeng666/arithmetic-practice">ç®—æ³•ç»ƒä¹ </a> è¾“å‡ºåˆ°äº† Github ä¸Šï¼Œä¸æ­¤åŒæ—¶ä½¿ç”¨ <code>Vuepress</code> åˆ›å»ºäº†å¯¹åº”ç®—æ³•é¢˜çš„æ–‡æ¡£ï¼ˆå¦‚æœå¯ä»¥çš„è¯ï¼Œå¸Œæœ›çœ‹åˆ°è¿™é‡Œçš„å¤§ä½¬ç»™ä¸ªâ­ï¸ï¼ˆæ‚è„¸å¥”é€ƒ~ï¼‰ï¼‰ã€‚æœ¬æ–‡å°±ä½¿ç”¨ Tauri å°†æ¬¡è¯¥æ¡£æ‰“åŒ…æˆä¸€ä¸ªæœ¬åœ°åº”ç”¨ã€‚</p>
<h3 id="å¼€å§‹å¼€å‘">å¼€å§‹å¼€å‘</h3>
<h4 id="æ­¥éª¤ä¸€åˆ›å»º-tauri-åº”ç”¨">æ­¥éª¤ä¸€ï¼šåˆ›å»º Tauri åº”ç”¨</h4>
<p><strong>ç¬¬ä¸€æ­¥ï¼š</strong> æ‰“å¼€æ–‡æ¡£æ‰€åœ¨ç›®å½•ï¼Œå¹¶å®‰è£… Tauri è„šæ‰‹æ¶ï¼ˆæœ¬æ–‡æ˜¯åœ¨å·²ç»å­˜åœ¨çš„è·¯å¾„ä¸‹åˆ›å»º Tauri åº”ç”¨ï¼Œå¦‚æœç›´æ¥åˆ›å»ºï¼Œå¯ä»¥é€šè¿‡ <code>yarn create tauri-app</code> å‘½ä»¤åˆ›å»ºã€‚è¯¦æƒ…å¯æŸ¥é˜… <a href="https://tauri.studio/docs/getting-started/beginning-tutorial">æ­¤æ–‡æ¡£</a>ï¼‰ï¼š</p>
<pre><code>yarn add -D @tauri-apps/cli
</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>è¯¥è„šæ‰‹æ¶å¯ä»¥æœ¬åœ°å®‰è£…ï¼Œä¹Ÿå¯ä»¥å…¨å±€å®‰è£…ï¼Œå®˜æ–¹æ¨èæœ¬åœ°å®‰è£…ï¼›</li>
<li>å¦‚æœä½¿ç”¨ npm å‘½ä»¤(è€Œä¸æ˜¯ä½¿ç”¨yarnå‘½ä»¤)åœ¨æœ¬åœ°å®‰è£…äº†è¯¥è„šæ‰‹æ¶ï¼Œéœ€è¦åœ¨ <code>package.json</code> æ–‡ä»¶çš„ <code>scripts</code> é…ç½®ä¸­æ·»åŠ  <code>&quot;tauri&quot;: &quot;tauri&quot;</code> è„šæœ¬ã€‚</li>
</ol>
</blockquote>
<p><strong>ç¬¬äºŒæ­¥ï¼š</strong> æ‰§è¡Œå®Œæˆåï¼Œå°† tauri-cli æ·»åŠ åˆ° <a href="https://cargo.budshome.com/getting-started/installation.html">cargo</a>(<code>Rust</code> çš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å™¨) å­å‘½ä»¤ä¸­ï¼š</p>
<pre><code>cargo install tauri-cli --locked --version ^1.0.0-rc
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼š</strong> å®‰è£… <strong>@tauri-apps/api</strong>:</p>
<pre><code>yarn add @tauri-apps/api
</code></pre>
<p>è¿™ä¸ªåŒ…çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† ES modulesï¼Œæˆ–è€…æ˜¯ä½¿ç”¨äº†ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ä¸€äº›æ‰“åŒ…æ„å»ºå·¥å…·ï¼Œæ¯”å¦‚ <code>Webpack</code>ã€<code>Vite</code> ç­‰ç­‰ï¼Œä½¿ç”¨è¿™ä¸ªåŒ…å°±å¯ä»¥æ¯”è¾ƒå®‰å…¨çš„è®¿é—® Tauri çš„æ¥å£ï¼ˆå…³äºå®‰å…¨æ€§ï¼Œå®˜æ–¹æœ‰ä¸“é—¨æ’°å†™ç›¸åº”çš„æ–‡æ¡£ï¼Œæƒ³äº†è§£å…·ä½“å†…å®¹å°ä¼™ä¼´ä»¬å¯ä»¥å‚è€ƒ <a href="https://tauri.studio/docs/development/security">è¿™ç¯‡æ–‡ç« </a>ï¼‰ã€‚</p>
<p><strong>ç¬¬å››æ­¥ï¼š</strong> åˆå§‹åŒ– Tauri åº”ç”¨ï¼š</p>
<pre><code>yarn tauri init
</code></pre>
<p>é¡¹ç›®åç§°ä»¥åŠçª—å£æ ‡é¢˜æˆ‘ä»¬é€‰æ‹©é»˜è®¤ä¸ºé¡¹ç›®åç§°ï¼Œä¹‹åä¼šè®©ä½ è®¾ç½®é™æ€èµ„æºçš„åœ°å€ï¼Œé»˜è®¤è®¾ç½®ä¸º <code>../dist</code>ã€‚è¿™é‡Œæˆ‘ä»¬è®¾ç½®æˆ Vuepress æ‰“åŒ…åçš„ dist ç›®å½•ï¼š <code>../docs/.vuepress/dist</code>ã€‚æœ€åçš„ <code>devServer</code> æˆ‘ä»¬ä¹Ÿé»˜è®¤å³å¯ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6c436c17b9b4a5bb1a461d50ad50688~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ Tauri é¡¹ç›®å°±å·²ç»åˆå§‹åŒ–å®Œæˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹è¯¥é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯ï¼š</p>
<pre><code>yarn tauri info
</code></pre>
<p>æ‰§è¡Œå®Œæˆåï¼Œä¼šåˆ—å‡ºé¡¹ç›®æ‰€å¯¹åº”çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ Tauri è„šæ‰‹æ¶çš„ç‰ˆæœ¬ï¼ŒNodejs çš„ç‰ˆæœ¬ï¼Œé¡¹ç›®çš„ç›®å½•ç»“æ„ç­‰ç­‰ï¼š</p>
<pre><code>Operating System - Mac OS, version 12.0.1 X64

Node.js environment
  Node.js - 14.15.0
  @tauri-apps/cli - 1.0.0-rc.4
  @tauri-apps/api - 1.0.0-rc.1

Global packages
  npm - 6.14.15
  pnpm - 6.19.0
  yarn - 1.22.17

Rust environment
  rustup - 1.24.3
  rustc - 1.58.1
  cargo - 1.58.0
  toolchain - stable-x86_64-apple-darwin 

App directory structure
/constants
/node_modules
/utils
/docs
/.github
/src-tauri
/Arithmetic
/preview
/.git
/coverage
/.idea
/src

App
  tauri - 1.0.0-rc.2 (no lockfile)
  tauri-build - no manifest (no lockfile)
  tao - no manifest (no lockfile)
  wry - no manifest (no lockfile)
  build-type - bundle
  CSP - unset
  distDir - ../docs/.vuepress/dist
  devPath - http://localhost:8080/
  framework - Vue.js
</code></pre>
<h4 id="æ­¥éª¤äºŒä¿®æ”¹é…ç½®">æ­¥éª¤äºŒï¼šä¿®æ”¹é…ç½®</h4>
<p>åœ¨åˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªç›®å½•ï¼š<code>src-tauri</code>ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>â””â”€â”€ src-tauri
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ Cargo.toml
    â”œâ”€â”€ rustfmt.toml
    â”œâ”€â”€ tauri.conf.json // tauri é…ç½®æ–‡ä»¶
    â”œâ”€â”€ icons // åº”ç”¨å›¾è¡¨æ–‡ä»¶
    â””â”€â”€ src // æ‰“åŒ…ç›¸å…³
        â”œâ”€â”€ build.rs
        â”œâ”€â”€ cmd.rs
        â””â”€â”€ main.rs
</code></pre>
<p>æ‰“å¼€ <code>tauri.conf.json</code> æ–‡ä»¶ï¼Œä¿®æ”¹ <code>build</code> é…ç½®ï¼ˆé…ç½®ä¸­è¿˜å¯ä»¥ä¿®æ”¹åº”ç”¨çš„ iconï¼Œå°ºå¯¸ç­‰å…¶ä»–ä¿¡æ¯ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œæ¢ç©¶ï¼‰ï¼š</p>
<pre><code class="language-js">&quot;build&quot;: {
  &quot;distDir&quot;: &quot;../docs/.vuepress/dist&quot;,
  &quot;devPath&quot;: &quot;http://localhost:8080&quot;,
  &quot;beforeDevCommand&quot;: &quot;yarn docs:dev&quot;, // åœ¨è¿è¡Œ yarn tauri dev å‘½ä»¤å‰æ‰§è¡Œçš„å‘½ä»¤
  &quot;beforeBuildCommand&quot;: &quot;yarn docs:build&quot; // åœ¨è¿è¡Œ yarn tauri build å‘½ä»¤å‰æ‰§è¡Œçš„å‘½ä»¤
},
</code></pre>
<p>ä¿®æ”¹å®Œæˆåï¼Œåœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ tauri æœ‰å“ªäº›å‘½ä»¤ã€‚æ‰§è¡Œ <code>yarn tauri help</code>ï¼š</p>
<pre><code class="language-js">USAGE:
    yarn run tauri &lt;SUBCOMMAND&gt; // ä½¿ç”¨

OPTIONS:
    -h, --help       Print help information // æ‰“å°å¸®åŠ©ä¿¡æ¯
    -V, --version    Print version information // æ‰“å°ç‰ˆæœ¬ä¿¡æ¯

SUBCOMMANDS:
    build     Tauri build // æ„å»º tauri åŒ…
    dev       Tauri dev // æœ¬åœ°å¼€å‘å‘½ä»¤
    help      Print this message or the help of the given subcommand(s) // æ‰“å°å¸®åŠ©ä¿¡æ¯
    info      Shows information about Tauri dependencies and project configuration // æ‰“å°é¡¹ç›®ä¿¡æ¯
    init      Initializes a Tauri project // åˆå§‹åŒ– tauri é¡¹ç›®
    plugin    Manage Tauri plugins // tauri æ’ä»¶ç®¡ç†
    signer    Tauri updater signer // tauri æ›´æ–°

</code></pre>
<p>äº†è§£å®Œç›¸å…³æ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬æ‰§è¡Œ <code>yarn tauri dev</code> å‘½ä»¤ã€‚ä¹‹åï¼Œä¼šå…ˆæ‰§è¡Œæˆ‘ä»¬å…ˆå‰é…ç½®çš„ <code>beforeDevCommand</code> å‘½ä»¤ï¼Œåœ¨æœ¬åœ°å¯åŠ¨é¡¹ç›®ï¼Œç„¶åä¼šæ„å»ºä¸€ä¸ªæœ¬åœ°åº”ç”¨ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæœ¬åœ° Vuepress é¡¹ç›®çš„ç«¯å£å·è¦ä¸ <code>devPath</code> ä¸­é…ç½®çš„ä¸€è‡´ï¼</p>
</blockquote>
<p>åœ¨ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œä¾¿ä¼šå¯åŠ¨æœ¬åœ°çš„åº”ç”¨ï¼š</p>
<figure data-type="image" tabindex="4"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23ee939a31854ea3af2f0c7aa920f4b5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>æˆªæ­¢ç›®å‰ï¼Œæˆ‘ä»¬çš„æœ¬åœ°é¡¹ç›®å°±å·²ç»å¯ä»¥æˆåŠŸè¿è¡Œå•¦~</p>
<h4 id="æ­¥éª¤ä¸‰æ‰“åŒ…åº”ç”¨">æ­¥éª¤ä¸‰ï¼šæ‰“åŒ…åº”ç”¨</h4>
<p>æ‰“åŒ…åº”ç”¨åªéœ€è¦è¿è¡Œ <code>build</code> å‘½ä»¤å³å¯ï¼š</p>
<pre><code>yarn tauri build
</code></pre>
<p>æ‰“åŒ…å®Œæˆåï¼Œä¼šåœ¨ <code>src-tauri/target/release/bundle</code> ç›®å½•ä¸‹ç”Ÿæˆç›¸åº”çš„åº”ç”¨å®‰è£…æ‰§è¡Œæ–‡ä»¶</p>
<figure data-type="image" tabindex="5"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/599f452f49724a45b2e4817918e15890~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>ç›´æ¥åŒå‡»å®‰è£…ï¼Œä¹‹åä¾¿å¯ä»¥åœ¨æœ¬åœ°ä½¿ç”¨è¿™ä¸ªåº”ç”¨æ¥æŸ¥çœ‹æ–‡æ¡£å•¦~ å¤§åŠŸå‘Šæˆï¼Œå®Œç»“æ’’èŠ±~</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»¬å¿ƒä¸­å¤šå°‘å¯¹ <code>Tauri</code> è¿™ä¸ªåèµ·ä¹‹ç§€æœ‰äº†ä¸€äº›äº†è§£ï¼Œæœ‰å…´è¶£æˆ–è€…æœ‰éœ€æ±‚çš„å°ä¼™ä¼´ä»¬ä¸å¦¨æ¥å°è¯•ä¸€ä¸‹~</p>
<p>æœ¬æ–‡æ˜¯å…³äº Tauri çš„ä¸€æ¬¡æµ…å°ï¼Œæ›´å¤šç©æ³•å¤§å®¶å¯ä»¥å‚è€ƒ<a href="https://tauri.studio/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Piniaåˆä½“éªŒ]]></title>
        <id>https://luhaifeng666.github.io/post/pinia-chu-ti-yan/</id>
        <link href="https://luhaifeng666.github.io/post/pinia-chu-ti-yan/">
        </link>
        <updated>2022-01-27T18:58:57.000Z</updated>
        <summary type="html"><![CDATA[<p>1æœˆ20æ—¥ï¼Œå°¤å¤§åœ¨çŸ¥ä¹å¹³å°å‘å¸ƒ <a href="https://zhuanlan.zhihu.com/p/460055155"><code>Vue3</code> å°†è‡ª2æœˆ7æ—¥èµ·æˆä¸ºé»˜è®¤ç‰ˆæœ¬</a>çš„æ¶ˆæ¯</p>
]]></summary>
        <content type="html"><![CDATA[<p>1æœˆ20æ—¥ï¼Œå°¤å¤§åœ¨çŸ¥ä¹å¹³å°å‘å¸ƒ <a href="https://zhuanlan.zhihu.com/p/460055155"><code>Vue3</code> å°†è‡ª2æœˆ7æ—¥èµ·æˆä¸ºé»˜è®¤ç‰ˆæœ¬</a>çš„æ¶ˆæ¯</p>
<!-- more -->
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/690b04d56e8d4672bc59056611c95967~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p><code>Vue3</code> ç›¸å…³çš„æŠ€æœ¯æ ˆä¹Ÿå¯ä»¥å­¦ä¹ èµ·æ¥å•¦~æœ¬æ–‡å°±åŒå¤§å®¶ä¸€èµ·åˆæ­¥ä½“éªŒä¸‹ â€œä¸‹ä¸€ä»£çš„Vuexâ€ -- <a href="https://pinia.vuejs.org/">Pinia</a>ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯pinia">ä»€ä¹ˆæ˜¯Pinia</h1>
<h2 id="pinia-ä»‹ç»">Pinia ä»‹ç»</h2>
<p>å¤§æ¦‚åœ¨2019å¹´11æœˆä»½å·¦å³ï¼ŒPinia çš„ä½œè€…å¼€å§‹å°è¯•é‡æ–°è®¾è®¡ Store çŠ¶æ€ç®¡ç†ä»¥é€‚ç”¨äº Composition APIï¼Œå…¶è®¾è®¡åŸåˆ™è·Ÿæ€æƒ³ä¸ Vuex ä¿æŒä¸€è‡´ã€‚</p>
<p>åœ¨ä¸åŒç‰ˆæœ¬çš„ Vue ä¸­ï¼Œæ‰€ä½¿ç”¨çš„ Vuex ç‰ˆæœ¬æ˜¯ä¸ä¸€æ ·çš„ã€‚Vue2 ä¸­éœ€è¦ä½¿ç”¨ Vuex 3.xçš„ç‰ˆæœ¬ï¼Œè€Œåœ¨ Vue3 ä¸­éœ€è¦ä½¿ç”¨ Vuex 4.xã€‚ä½†æ˜¯ Pinia æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œæ— è®ºæ˜¯åœ¨ Vue2 ä¸­ï¼Œè¿˜æ˜¯åœ¨ Vue3 ä¸­å‡å¯ä»¥ä½¿ç”¨ Piniaï¼Œ<strong>ä¸”ä¸ä¸€å®šè¦ä¸ Composition API ä¸€èµ·ä½¿ç”¨</strong>ï¼ŒAPI çš„ä½¿ç”¨æ–¹å¼åœ¨ä¸¤è€…ä¸­ä¹Ÿæ˜¯ä¿æŒä¸€è‡´çš„ã€‚</p>
<p>ç°åœ¨ï¼ŒPinia ä¹Ÿå·²ç»æ­£å¼è¢«çº³å…¥ Vue å®˜æ–¹ä½“ç³»ä¸­ã€‚ç¬”è€…å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œå…¶ç‰ˆæœ¬å·²æ›´æ–°è‡³ <strong>v2.0.9</strong> ã€‚</p>
<h2 id="ä¸ºå•¥è¦ç”¨-pinia">ä¸ºå•¥è¦ç”¨ Pinia</h2>
<p>Pinia æ˜¯ç”¨äº Vue ä¸­çš„çŠ¶æ€ç®¡ç†å™¨ï¼Œå…è®¸ä½ è·¨ç»„ä»¶/é¡µé¢å…±äº«çŠ¶æ€ã€‚</p>
<p>å¦‚æœå°ä¼™ä¼´ä»¬å·²ç»å¯¹ Composition API æ¯”è¾ƒç†Ÿæ‚‰äº†çš„è¯ï¼Œå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç±»ä¼¼ä¸‹é¢è¿™ç§å†™æ³•å»å…±äº«å…¨å±€çŠ¶æ€ï¼š</p>
<pre><code class="language-vue">export const state = reactive({})
</code></pre>
<p>åœ¨ SPA åº”ç”¨ä¸­ï¼Œè¿™æ ·å»åšæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯åœ¨ SSR ä¸­å»ä½¿ç”¨çš„è¯ä¼šå­˜åœ¨å®‰å…¨éšæ‚£ã€‚æ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨ Piniaã€‚</p>
<p>ä½¿ç”¨ Pinia æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ol>
<li>
<p><strong>è°ƒè¯•å·¥å…·æ”¯æŒ</strong></p>
<p>ç¬”è€…ç›®å‰å®‰è£…çš„æ˜¯ beta ç‰ˆæœ¬çš„ Vue devtoolï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥å» <a href="chrome://extensions">è°·æ­Œåº”ç”¨å•†åº—</a> ä¸­æœç´¢ <code>Vue devtool</code> ä¸‹è½½å¯¹åº”çš„ beta ç‰ˆæœ¬ã€‚</p>
</li>
</ol>
<figure data-type="image" tabindex="2"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8acca1566bfe4502bc35cee45a4f0589~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<blockquote>
<ol>
<li>è°ƒè¯•å·¥å…·ä¸­æ”¯æŒè¿½è¸ª actionsï¼Œmutations çš„timeline(æ—¶é—´çº¿)ï¼›</li>
<li>å¯ä»¥æ˜¾ç¤ºå½“å‰ç»„ä»¶ä¸­ä½¿ç”¨çš„ store ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºæ‰€æœ‰ store å®¹å™¨çš„ä¿¡æ¯ï¼Œæ”¯æŒç›´æ¥ä¿®æ”¹æ•°æ®è¿›è¡Œè°ƒè¯•ï¼›</li>
<li>æ”¯æŒ Time travel(æ—¶é—´æ—…è¡Œ) ä»¥æ–¹ä¾¿è°ƒè¯•ã€‚</li>
</ol>
</blockquote>
<ol start="2">
<li><strong>çƒ­æ¨¡å—æ›¿æ¢</strong>ï¼šæ”¹å˜çŠ¶æ€æ—¶æ— éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢ã€‚</li>
<li><strong>æ’ä»¶æ”¯æŒ</strong>ï¼šå¯ä»¥é€šè¿‡æ’ä»¶æ‰©å±• Pinia çš„èƒ½åŠ›ã€‚</li>
<li><strong>è‰¯å¥½çš„ Typescript æ”¯æŒ</strong>ï¼šå¯ä»¥æä¾›è¾ƒä¸ºå®Œå–„çš„ä»£ç æç¤ºä»¥åŠä»£ç è‡ªåŠ¨è¡¥å……ã€‚</li>
<li><strong>æ”¯æŒ SSR</strong>ã€‚</li>
</ol>
<h2 id="pinia-ä¸-vuex-çš„å¯¹æ¯”">Pinia ä¸ Vuex çš„å¯¹æ¯”</h2>
<p>Pinia ä¸ Vuex4.x ä»¥ä¸‹ç‰ˆæœ¬ç›¸æ¯”ï¼Œæœ‰å¦‚ä¸‹åŒºåˆ«ï¼š</p>
<blockquote>
<ol>
<li><strong>ç§»é™¤äº† mutations</strong>ï¼š åœ¨ Vuex ä¸­ï¼Œæƒ³è¦æ”¹å˜çŠ¶æ€ï¼Œéœ€è¦é€šè¿‡æäº¤ mutations æ¥å®ç°ï¼Œè€Œ mutations ä¸èƒ½æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå› æ­¤è¯ç”Ÿäº† actions ï¼Œåœ¨å¼‚æ­¥è·å–æ•°æ®åï¼Œé€šè¿‡ actions è°ƒç”¨ mutations ä¿®æ”¹æ•°æ®ã€‚ç°åœ¨åœ¨ Pinia ä¸­ï¼Œactions åŒæ—¶æ”¯æŒåŒæ­¥ä¸å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ mutations æ˜¾å¾—æœ‰äº›å†—ä½™äº†ï¼Œå› æ­¤ä¸å†éœ€è¦ï¼›</li>
<li><strong>å¯¹äº Typescript çš„æ”¯æŒæ›´åŠ å‹å¥½</strong>ï¼šä½¿ç”¨ Pinia æ—¶,ä¸å†éœ€è¦å®šä¹‰å¤æ‚çš„ wrappersï¼ˆåŒ…è£…å™¨ï¼‰å»æ”¯æŒTypescript;</li>
<li><strong>ä¸ä¼šæ³¨å…¥é­”æ³•å­—ç¬¦ä¸²</strong>ï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Vuex æ—¶ï¼Œç»å¸¸ä¼šå‡ºç°ç±»ä¼¼ <code>this.$store.commit(&quot;xxxxx&quot;)</code> è¿™æ ·çš„é­”æ³•å­—ç¬¦ä¸²ï¼Œè™½ç„¶ä¼šå°†è¿™äº›å­—ç¬¦ä¸²æŠ½ä¸ºå¸¸é‡æš´éœ²å‡ºæ¥ï¼Œä½†æ˜¯ç»´æŠ¤èµ·æ¥è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ã€‚åœ¨ Pinia ä¸­ä¸å†éœ€è¦ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ <code>defineStore</code> åæš´éœ²å‡ºæ¥çš„æ–¹æ³•ï¼Œè€Œåé€šè¿‡ <code>$patch</code>, <code>action</code> çš„æ–¹å¼ï¼Œæˆ–è€…ç›´æ¥ä¿®æ”¹ store ä¸­çš„å€¼å³å¯ï¼›</li>
<li><strong>ä¸éœ€è¦åŠ¨æ€æ·»åŠ  stores</strong>ï¼šåªè¦ä½ æ„¿æ„ï¼Œä½ å¯ä»¥éšæ—¶å®šä¹‰ storesï¼Œå®ƒä»¬é»˜è®¤æ˜¯åŠ¨æ€çš„ï¼›</li>
<li><strong>ä¸å†éœ€è¦åµŒå¥—ç»“æ„çš„ modules</strong>;</li>
<li><strong>æ²¡æœ‰å¸¦å‘½åç©ºé—´çš„æ¨¡å—</strong>ã€‚</li>
</ol>
</blockquote>
<h1 id="pinaçš„ä½¿ç”¨">Pinaçš„ä½¿ç”¨</h1>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>æˆ‘ä»¬å…ˆåœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªVue3çš„é¡¹ç›®ï¼Œç”¨äºæ¼”ç¤º <code>Pinia</code> çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <a href="https://cn.vitejs.dev/">Vite</a> æ¥æ­å»ºï¼š</p>
<blockquote>
<p>Vite éœ€è¦Â <a href="https://nodejs.org/en/">Node.js</a>Â ç‰ˆæœ¬ &gt;= 12.0.0ã€‚ç„¶è€Œï¼Œæœ‰äº›æ¨¡æ¿éœ€è¦ä¾èµ–æ›´é«˜çš„ Node ç‰ˆæœ¬æ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œå½“ä½ çš„åŒ…ç®¡ç†å™¨å‘å‡ºè­¦å‘Šæ—¶ï¼Œè¯·æ³¨æ„å‡çº§ä½ çš„ Node ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p>Viteå®˜æ–¹æä¾›äº†ä½¿ç”¨æ¨¡æ¿çš„æ–¹å¼æ„å»ºæœ¬åœ°é¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡ <a href="https://www.pnpm.cn/">pnpm</a> æ¥æ„å»ºä¸€ä¸ª <code>Vite + Vue</code> çš„æœ¬åœ°é¡¹ç›®ã€‚ç°åœ¨ Vue3 ä»¥åŠ Pinia å¯¹äº Typescript çš„æ”¯æŒå·²ç»éå¸¸è‰¯å¥½äº†,å»ºè®®å¤§å®¶åœ¨ä½¿ç”¨æ¨¡æ¿æ„å»ºé¡¹ç›®çš„æ—¶å€™ç›´æ¥é€‰æ‹© Typescript å¯¹åº”çš„æ¨¡æ¿ï¼š</p>
<pre><code>pnpm create vite pinia-useage-examples -- --template vue-ts
</code></pre>
<p>ä¹‹åï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å®‰è£… <code>Pinia</code>:</p>
<pre><code> pnpm add pinia
</code></pre>
<p>å‡†å¤‡å·¥ä½œå®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ¥ä¸€èµ·ä½“éªŒä¸€ä¸‹ <code>Pinia</code> å§~</p>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>createPinia</code> åˆå§‹åŒ– Piniaï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ° Vue çš„å®ä¾‹ä¸Šï¼š</p>
<pre><code class="language-ts">// src/main.ts

import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'

// åˆ›å»º pinia
const pinia = createPinia()

const app = createApp(App)
// æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Š
app.use(pinia)
app.mount('#app')
</code></pre>
<p>ä¹‹åæŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬å…ˆåˆ›å»º <code>src/store/index.ts</code> æ–‡ä»¶ï¼Œç”¨äºå­˜æ”¾ store:</p>
<pre><code class="language-ts">// src/store/index.ts

import { defineStore } from 'pinia'

// å®šä¹‰store, myFirstStoreæ˜¯storeçš„åç§°ï¼Œè¯¥åç§°å¿…é¡»å”¯ä¸€ï¼Œä¸å¯é‡å¤
export const useStore = defineStore('myFirstStore', {
  
})
</code></pre>
<p><strong>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>defineStore</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºè®¾ç½® store çš„å®¹å™¨åç§°ï¼Œè¯¥åç§°å¿…é¡»å”¯ä¸€ï¼Œä¸å¯é‡å¤ï¼</strong></p>
<p>ä¸Šæ–‡ä¸­æåˆ°ï¼Œç›¸æ¯”äº Vuexï¼ŒPinia ä¸­ç§»é™¤äº† mutationsï¼Œå‰©ä½™éœ€è¦äº†è§£çš„å†…å®¹ä¸»è¦åŒ…å«å››ä¸ªéƒ¨åˆ†ï¼š</p>
<blockquote>
<ol>
<li><strong>State</strong>: ç”¨äºå­˜æ”¾æ•°æ®ï¼Œæœ‰ç‚¹å„¿ç±»ä¼¼ <code>data</code> çš„æ¦‚å¿µï¼›</li>
<li><strong>Getters</strong>: ç”¨äºè·å–æ•°æ®ï¼Œæœ‰ç‚¹å„¿ç±»ä¼¼ <code>computed</code> çš„æ¦‚å¿µï¼›</li>
<li><strong>Actions</strong>: ç”¨äºä¿®æ”¹æ•°æ®ï¼Œæœ‰ç‚¹å„¿ç±»ä¼¼ <code>methods</code> çš„æ¦‚å¿µï¼›</li>
<li><strong>Plugins</strong>: Pinia æ’ä»¶ã€‚</li>
</ol>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬ä¾æ¬¡æ¥çœ‹ä¸€çœ‹å®ƒä»¬çš„ç”¨æ³•ã€‚</p>
<h2 id="state">State</h2>
<h3 id="å®šä¹‰-state">å®šä¹‰ State</h3>
<p>åœ¨ Vuex ä¸­ï¼Œé€šè¿‡å¯¹è±¡çš„å½¢å¼æ¥å®šä¹‰ state ï¼Œè€Œåœ¨ Pinia ä¸­åˆ™éœ€è¦é€šè¿‡å‡½æ•°çš„æ–¹å¼å®šä¹‰ stateï¼Œè¿™ç§æ–¹å¼æœ‰ç‚¹å„¿ç±»ä¼¼ç»„ä»¶ä¸­ <code>data</code> çš„æ¦‚å¿µ:</p>
<pre><code class="language-ts">// src/store/index.ts

import { defineStore } from 'pinia'

// å®šä¹‰store, myFirstStoreæ˜¯storeçš„åç§°ï¼Œè¯¥åç§°å¿…é¡»å”¯ä¸€ï¼Œä¸å¯é‡å¤
export const useStore = defineStore('myFirstStore', {
  state: () =&gt; {
    return {
      count: 0,
      name: 'foo',
      list: [1, 2, 3]
    }
  }
})
</code></pre>
<h3 id="è¯»å–-state">è¯»å– State</h3>
<p>state å®šä¹‰å®Œæˆåï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸­å¯ä»¥é€šè¿‡å¼•å…¥æš´éœ²å‡ºå»çš„ <code>useStore</code> æ¥è¯»å– state ä¸­çš„æ•°æ®ï¼š</p>
<pre><code class="language-js">// src/App.vue

&lt;template&gt;
  &lt;p&gt;count: {{ myStore.count }}&lt;/p&gt;
  &lt;p&gt;name: {{ myStore.name }}&lt;/p&gt;
  &lt;p&gt;list: {{ myStore.list }}&lt;/p&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { useStore } from './store'

const myStore = useStore()
&lt;/script&gt;
</code></pre>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæœ‰çš„å°ä¼™ä¼´ä¸ç¦ä¼šé—®ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€ç›´è¦å†™ <code>myStore.xxx</code> ä¸æ˜¯å¾ˆéº»çƒ¦ä¹ˆï¼Ÿèƒ½å¦é€šè¿‡è§£æ„çš„æ–¹å¼æ¥ä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>é‚£æˆ‘ä»¬å°±ä¸€èµ·æ¥è¯•ä¸€è¯•ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥é€šè¿‡è§£æ„çš„æ–¹å¼æ¥è·å– store ä¸­çš„å€¼:</p>
<pre><code class="language-js">// src/App.vue

&lt;template&gt;
  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;
  &lt;p&gt;count: {{ count }}&lt;/p&gt;
  &lt;p&gt;name: {{ name }}&lt;/p&gt;
  &lt;p&gt;list: {{ list }}&lt;/p&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { useStore } from './store'

const { count, name, list } = useStore()
&lt;/script&gt;
</code></pre>
<p>é€šè¿‡è¿™æ¬¡å°è¯•æˆ‘ä»¬å‘ç°ï¼Œç¡®å®å¯ä»¥é€šè¿‡è§£æ„çš„æ–¹å¼æ¥è·å–åˆ° store çš„å€¼ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š<strong>ç›´æ¥é€šè¿‡è§£æ„çš„æ–¹å¼è·å–stateä¸­çš„å€¼æ˜¯éå“åº”å¼çš„ï¼</strong> è¿™å°±æ„å‘³ç€åé¢åœ¨å¯¹ store ä¸­çš„å€¼è¿›è¡Œä¿®æ”¹ä¹‹åï¼Œé¡µé¢ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<p>é‚£æˆ‘ä»¬æ”¹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡ Pinia ä¸­æä¾›çš„ <code>storeToRefs</code> æ–¹æ³•ï¼Œå°†ç»“æ„å‡ºæ¥çš„å€¼è½¬æ¢ä¸ºå“åº”å¼çš„å€¼å³å¯ï¼š</p>
<pre><code class="language-ts">// src/App.vue

&lt;script setup lang=&quot;ts&quot;&gt;
import { storeToRefs } from 'pinia'
import { useStore } from './store'

const { count, name, list } = storeToRefs(useStore())
&lt;/script&gt;
</code></pre>
<p>é™¤äº†ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼ä»¥å¤–ï¼ŒPinia ä¹Ÿæä¾›äº† <code>mapState</code> ä¸ <code>computed</code> ç›¸ç»“åˆçš„æ–¹å¼å»è·å– store ä¸­çš„å€¼ï¼Œè¿™ç§æ–¹å¼ä¸ Vuex ä¸­çš„ <code>mapState</code> ç±»ä¼¼ï¼š</p>
<pre><code class="language-js">// src/App.vue

&lt;template&gt;
  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;
  &lt;p&gt;count: {{ res.count }}&lt;/p&gt;
  &lt;p&gt;name: {{ res.name }}&lt;/p&gt;
  &lt;p&gt;list: {{ res.list }}&lt;/p&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { mapState } from 'pinia'
import { useStore } from './store'
import { computed } from 'vue'

const res = computed(() =&gt; {
  const data = {
    ...mapState(useStore, ['count', 'name', 'list'])
  }
  return {
    count: data.count(),
    name: data.name(),
    list: data.list()
  }
})
&lt;/script&gt;
</code></pre>
<p>ç”±äºæ˜¯é€šè¿‡ <code>computed</code> è·å–åˆ°çš„å€¼ï¼Œæ‰€ä»¥ç»“æ„ä¹‹åçš„å€¼å°±æ˜¯å“åº”å¼çš„ï¼Œä¸éœ€è¦ä½¿ç”¨ <code>stateToRefs</code> æ–¹æ³•è¿›è¡Œè½¬æ¢ã€‚</p>
<p>åœ¨ <code>computed</code> å†…éƒ¨ä¹Ÿå¯ä»¥å¯¹å±æ€§è¿›è¡Œé‡å‘½åï¼Œæˆ–è€…é‡æ–°å®šä¹‰æ–°çš„è¿”å›å€¼è¿”å›å€¼ï¼š</p>
<pre><code class="language-js">&lt;script setup lang=&quot;ts&quot;&gt;
import { mapState } from 'pinia'
import { useStore } from './store'
import { computed } from 'vue'

const res = computed(() =&gt; {
  const data = {
    ...mapState(useStore, {
      // é‡å‘½åcountä¸ºmyCount, å¹¶è¿”å›count + 1çš„ç»“æœ
      myCount: state =&gt; state.count += 1,
      // é‡å‘½ånameä¸ºæ²¡æœ‰Nameï¼Œå¹¶è¿”å›nameçš„å€¼
      myName: 'name',
      // é‡å‘½ålistä¸ºmyListï¼Œå¹¶è¿”å›æ’å…¥4ä¹‹åçš„list
      myList: state =&gt; {
        state.list.push(4)
        return state.list
      }
    })
  }
  return {
    count: data.myCount(),
    name: data.myName(),
    list: data.myList()
  }
})
&lt;/script&gt;
</code></pre>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>æœ¬æ–‡çš„ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ˜¯ <code>setup</code> è¯­æ³•ç³–ï¼Œå¦‚æœä¸ä½¿ç”¨ <code>setup</code> è¯­æ³•ç³–çš„è¯ï¼Œ<code>mapState</code> çš„ä½¿ç”¨æ–¹å¼ä¸æœ¬æ–‡ä¸­æ‰€ä¸¾çš„ğŸŒ°æœ‰äº›å·®åˆ«(å…³äºè¿™ä¸ªé—®é¢˜ï¼Œç½‘ä¸Šæœ‰ä½¿ç”¨ <code>bind</code> çš„æ–¹å¼çš„æ —å­ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/WaiTinglw/article/details/122091494">è¿™ç¯‡æ–‡ç« </a>)ã€‚è¯¦æƒ…å¯ä»¥æŸ¥é˜…<a href="https://pinia.vuejs.org/core-concepts/state.html#usage-with-the-options-api">å®˜æ–¹æ–‡æ¡£</a>ã€‚å¦‚æœæœ¬æ–‡ä¸­æœ‰ä½¿ç”¨ä¸å½“ä¹‹å¤„ï¼Œè¿˜è¯·è¯¸ä½å¤§ä½¬æŒ‡æ­£~ Orzï¼›</li>
<li>é€šè¿‡ <code>computed</code> è¿”å›çš„ state æ— æ³•ä½¿ç”¨ç»“æ„çš„æ–¹å¼è·å–å…¶ä¸­çš„å€¼ï¼Œå› ä¸ºè¿”å›çš„ä¸æ˜¯å•çº¯çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ª <code>ComputedRefImpl</code> ç±»å‹çš„å€¼ã€‚</li>
<li>é€šè¿‡ <code>mapState</code> è·å–åˆ°çš„å€¼æ˜¯<strong>åªè¯»</strong>çš„ï¼Œå¦‚æœæƒ³è¦å…¶å¯å†™ï¼Œå¯ä»¥ä½¿ç”¨ <code>mapWritableState</code> çš„æ–¹å¼ã€‚</li>
</ol>
</blockquote>
<h3 id="ä¿®æ”¹-state">ä¿®æ”¹ State</h3>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»å¯ä»¥è·å–åˆ° State ä¸­å­˜å‚¨çš„å€¼äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•å»ä¿®æ”¹ State ä¸­çš„å€¼å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
<h4 id="ç¬¬ä¸€ç§ç›´æ¥ä¿®æ”¹">ç¬¬ä¸€ç§ï¼šç›´æ¥ä¿®æ”¹</h4>
<p>ç›´æ¥ä¿®æ”¹ State ä¸­çš„å€¼å³å¯ï¼š</p>
<pre><code class="language-js">// src/App.vue

&lt;template&gt;
  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;
  &lt;p&gt;count: {{ count }}&lt;/p&gt;
  &lt;button @click=&quot;handleChangeStore&quot;&gt;change store&lt;/button&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { useStore } from './store'

const store = useStore()
// ä¿®æ”¹storeä¸­çš„å€¼
const handleChangeStore = () =&gt; {
  // ç›´æ¥ä¿®æ”¹
  store.count += 1
}
&lt;/script&gt;
</code></pre>
<p>ç”šè‡³å¯ä»¥é€šè¿‡æš´åŠ›è¦†ç›– <code>$state</code> çš„æ–¹å¼å°†æ‰€æœ‰å€¼è¿›è¡Œæ›¿æ¢ä¿®æ”¹ï¼š</p>
<pre><code class="language-ts">// src/App.vue

// çœç•¥å¥½å¤šå¥½å¤šä»£ç ã€‚ã€‚ã€‚

// ç›´æ¥æ¸…ç©ºstore
store.$state = {}
</code></pre>
<h4 id="ç¬¬äºŒç§-é€šè¿‡-patch-çš„æ–¹å¼ä¿®æ”¹">ç¬¬äºŒç§: é€šè¿‡ <code>$patch</code> çš„æ–¹å¼ä¿®æ”¹</h4>
<p>å½“æˆ‘ä»¬éœ€è¦ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$patch</code> æ–¹æ³•æ¥æ‰¹é‡ä¿®æ”¹å¤šä¸ªå€¼ï¼š</p>
<pre><code class="language-js">// src/App.vue

&lt;template&gt;
  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;
  &lt;p&gt;name: {{ name }}&lt;/p&gt;
  &lt;p&gt;list: {{ list }}&lt;/p&gt;
  &lt;button @click=&quot;handleChangeStore&quot;&gt;change store&lt;/button&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot; setup&gt;
import { useStore } from './store'

const store = useStore()

// ä¿®æ”¹storeä¸­çš„å€¼
const handleChangeStore = () =&gt; {
  // é€šè¿‡ $patch çš„æ–¹å¼ä¿®æ”¹
  store.$patch({
    name: 'test',
    list: [...store.list, 4]
  })
}
&lt;/script&gt;
</code></pre>
<p><code>$patch</code> ä¼šå°†ä¼ å…¥çš„å¯¹è±¡ä¸ Store ä¸­çš„ state è¿›è¡Œ merge è¦†ç›–ã€‚</p>
<p>é™¤äº†ç›´æ¥ä¼ å…¥å¯¹è±¡å¤–ï¼Œå¦‚æœå­˜åœ¨è¾ƒä¸ºå¤æ‚çš„æ“ä½œï¼Œ<code>$patch</code> æ–¹æ³•ä¹Ÿæ¥å—ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¯¹éœ€è¦ä¿®æ”¹çš„æ•°æ®è¿›è¡Œæ“ä½œï¼š</p>
<pre><code>// src/App.vue

// çœç•¥å¥½å¤šå¥½å¤šä»£ç ã€‚ã€‚ã€‚
store.$patch(state =&gt; {
  state.name = `æˆ‘çš„åå­—æ˜¯ï¼š${state.name}`
})

</code></pre>
<h4 id="ç¬¬ä¸‰ç§é€šè¿‡-reset-æ–¹æ³•æ¢å¤åŸå€¼">ç¬¬ä¸‰ç§ï¼šé€šè¿‡ <code>$reset</code> æ–¹æ³•æ¢å¤åŸå€¼</h4>
<p>å½“æˆ‘ä»¬ä¿®æ”¹äº† state ä¸­çš„å€¼ä»¥åï¼Œå€˜è‹¥æˆ‘ä»¬æƒ³è®©å®ƒä»¬æ¢å¤åˆ°åˆå§‹å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>$reset</code> æ–¹æ³•ã€‚</p>
<h4 id="ç¬¬å››ç§é€šè¿‡è°ƒç”¨-actions-ä¸­çš„æ–¹æ³•å»ä¿®æ”¹å€¼">ç¬¬å››ç§ï¼šé€šè¿‡è°ƒç”¨ <code>actions</code> ä¸­çš„æ–¹æ³•å»ä¿®æ”¹å€¼</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Store å®¹å™¨ä¸­å®šä¹‰ <code>actions</code>:</p>
<pre><code class="language-ts">// src/store/index.ts

// å®šä¹‰store
export const useStore = defineStore('myFirstStore', {
  // çœç•¥ä¸€äº›ä»£ç 
  actions: {
    changeCount () {
      this.count ++
    }
  }
})
</code></pre>
<p>åœ¨ <code>actions</code> ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code>this</code> æ¥è®¿é—® state ä¸­çš„å±æ€§ï¼Œè€Œæ— éœ€åƒ Vuex é‚£æ ·ä¼ å…¥ä¸Šä¸‹æ–‡æ‰å¯ä»¥ï¼Œä½¿ç”¨æ–¹å¼æœ‰ç‚¹å„¿ç±»ä¼¼ <code>methods</code>ã€‚</p>
<p>å®šä¹‰å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¼•ç”¨å¤„ç›´æ¥ä½¿ç”¨å®ƒäº†ï¼š</p>
<pre><code class="language-ts">// src/App.vue

&lt;template&gt;
  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot; /&gt;
  &lt;p&gt;count: {{ count }}&lt;/p&gt;
  &lt;button @click=&quot;handleChangeStore&quot;&gt;change store&lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { useStore } from './store'

const store = useStore()

// ä¿®æ”¹storeä¸­çš„å€¼
const handleChangeStore = () =&gt; {
  // é€šè¿‡actionsçš„æ–¹å¼ä¿®æ”¹
  store.changeCount()
}
&lt;/script&gt;
</code></pre>
<p>å½“ç„¶ï¼Œ<code>actions</code> ä¸­çš„æ–¹æ³•ä¹Ÿå¯ä»¥æ¥æ”¶å…¥å‚ï¼Œä½¿ç”¨æ–¹å¼ä¸ <code>methods</code> å¹¶æ— åŒºåˆ«ï¼Œè¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°ã€‚</p>
<h3 id="è°ƒè¯•-state">è°ƒè¯• State</h3>
<p>æ‰“å¼€æ§åˆ¶å°ï¼Œåˆ‡æ¢åˆ° Vue devtool ä¸­ï¼Œé€‰æ‹© <code>Pinia</code> é€‰é¡¹ï¼Œå°±å¯ä»¥çœ‹åˆ° store å®¹å™¨çš„ä¿¡æ¯ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e6e06b6634e4ec8bfdcac7aeaf3c55d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>å¹¶ä¸”ç‚¹å‡»æ•°æ®åé¢çš„ç¼–è¾‘æŒ‰é’®ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ store ä¸­çš„å€¼è¿›è¡Œè°ƒè¯•ï¼Œéå¸¸æ–¹ä¾¿ï¼š</p>
<figure data-type="image" tabindex="4"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c99a0e1af8e74eefa41784219996ad81~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h2 id="getters">Getters</h2>
<p><code>getters</code> çš„ä½¿ç”¨æ–¹å¼æœ‰ç‚¹å„¿ç±»ä¼¼äº <code>computed</code>, è¿”å›ä¸€ä¸ªå€¼(<strong>æ²¡æœ‰è¿”å›å€¼ä¹Ÿå¯ä»¥</strong>)ä¸”åœ¨é¡µé¢ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœ <code>getters</code> ä¸­ä½¿ç”¨äº† <code>state</code> é‡Œçš„æ•°æ®ï¼Œå½“å¯¹åº”çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>getters</code> çš„å€¼ä¹Ÿä¼šç›¸åº”å‘ç”Ÿå˜åŒ–ï¼š</p>
<pre><code class="language-ts">// src/store/index.ts

// å®šä¹‰store
export const useStore = defineStore('myFirstStore', {
  // çœç•¥ä¸€äº›ä»£ç 
  getters: {
    countPlusOne (state) {
      console.log('------countPlusOne------')
      return state.count + 1
    }
  }
})
</code></pre>
<p>ç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸” <code>getters</code> ä¹Ÿæœ‰ç¼“å­˜ï¼Œåœ¨é¡µé¢ä¸­å¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œåªä¼šè®¡ç®—ä¸€æ¬¡ï¼š</p>
<pre><code class="language-ts">// src/App.vue

&lt;template&gt;
  &lt;p&gt;countPlusOne: {{ store.countPlusOne }}&lt;/p&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { useStore } from './store'

const store = useStore()
&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acf3831592af4344a1cfe7483c520ec6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ—¥å¿—åªæ‰“å°äº†ä¸€æ¬¡ï¼Œè¯´æ˜åé¢ä¸¤æ¬¡æ˜¯å–çš„ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li><code>getters</code> ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå…¥å‚ <code>state</code> æ˜¯å¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ å…¥ <code>state</code>, å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>this</code> è®¿é—® <code>state</code> ä¸­çš„æ•°æ®ï¼›</li>
<li>å¦‚æœä¸ä¼ å…¥ <code>state</code> çš„è¯ï¼ŒTypescript ä¼šæœ‰æŠ¥é”™æç¤ºï¼Œå› ä¸ºæ— æ³•æ¨å¯¼å‡º <code>getters</code> ä¸­æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œéœ€è¦æ‰‹åŠ¨å£°æ˜è¿”å›å€¼ç±»å‹ã€‚</li>
</ol>
</blockquote>
<h2 id="actions">Actions</h2>
<p>ä¸Šæ–‡ä¸­æåˆ°å¯ä»¥é€šè¿‡ <code>Actions</code> çš„æ–¹å¼ä¿®æ”¹ <code>State</code> ä¸­çš„å€¼ï¼Œåªä¸è¿‡æ‰€ä½¿ç”¨çš„æ˜¯åŒæ­¥çš„æ–¹å¼ã€‚åœ¨ä¸€å¼€å§‹å¯¹ Pinia çš„ä»‹ç»ä¸­ä¹Ÿæåˆ°ï¼Œ<code>Actions</code> åŒæ—¶æ”¯æŒåŒæ­¥ä¸å¼‚æ­¥ä¸¤ç§ä¿®æ”¹æ•°æ®çš„æ–¹å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•é€šè¿‡ <code>Actions</code> å¼‚æ­¥ä¿®æ”¹æ•°æ®ã€‚</p>
<pre><code class="language-ts">// src/store/index.ts

// çœç•¥å¥½å¤šå¥½å¤šä»£ç ã€‚ã€‚ã€‚
actions: {
  async changeName () {
    const newName: string = await new Promise((resolve, reject) =&gt; {
      setTimeout(() =&gt; {
        resolve('newName')
      }, 1000)
    }).catch(err =&gt; {
    })
    this.name = newName
  }
}
</code></pre>
<p>é€šè¿‡ä¸Šè¿°ä»£ç æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œå…¶å® <code>Actions</code> é€šè¿‡å¼‚æ­¥ä¿®æ”¹æ•°æ®çš„æ–¹å¼ä¸å¯»å¸¸ä½¿ç”¨ <code>methods</code> å¼‚æ­¥ä¿®æ”¹ <code>data</code> ä¸­çš„æ•°æ®ç±»ä¼¼ï¼Œç›¸è¾ƒäº Vuex ç®€ä¾¿è®¸å¤šã€‚</p>
<h2 id="plugins">Plugins</h2>
<h3 id="æ’ä»¶ä»‹ç»">æ’ä»¶ä»‹ç»</h3>
<p>é€šè¿‡è‡ªå®šä¹‰ <code>Plugins</code> å¯ä»¥æ‰©å±• <code>Stores</code>ï¼Œå®ƒå¯ä»¥å®Œæˆä»¥ä¸‹è¿™äº›äº‹æƒ…ï¼š</p>
<blockquote>
<ol>
<li>æ–°å¢ <code>store</code> ä¸­çš„å±æ€§;</li>
<li>å®šä¹‰ <code>store</code> æ—¶ä¼ å…¥æ–°çš„é…ç½®é¡¹;</li>
<li>æ–°å¢ <code>store</code> ä¸­çš„æ–¹æ³•;</li>
<li>åŒ…è£… <code>store</code> ä¸­çš„æ—¢æœ‰æ–¹æ³•;</li>
<li>ä¿®æ”¹ç”šè‡³å–æ¶ˆ <code>actions</code>;</li>
<li>å®ç°ä¸€äº›å‰¯ä½œç”¨æ“ä½œï¼Œä¾‹å¦‚è®¾ç½® local storage ç¼“å­˜ç­‰ç­‰;</li>
<li>åªä¼šåº”ç”¨äºç‰¹å®šçš„ <code>store</code>: åœ¨ Pinia æŒ‚è½½åˆ° app ä¸Šåï¼Œæ’ä»¶ä¼šæŒ‚è½½åˆ°ä¹‹ååˆ›å»ºçš„ Stores ä¸Šï¼Œåœ¨æ­¤ä¹‹å‰ Plugins ä¸ä¼šè¢«æŒ‚è½½ã€‚</li>
</ol>
</blockquote>
<h3 id="æ’ä»¶å®šä¹‰-ä½¿ç”¨">æ’ä»¶å®šä¹‰ &amp; ä½¿ç”¨</h3>
<p>æ’ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ’ä»¶æ¥å—ä¸€ä¸ªå¯é€‰å…¥å‚ï¼š <code>context</code>, æ”¹å…¥å‚æ˜¯ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å››é¡¹å†…å®¹ï¼š</p>
<ol>
<li><strong>context.pinia:</strong> é€šè¿‡ <code>createPinia()</code> æ–¹å¼åˆ›å»ºçš„ Pinia å®ä¾‹</li>
<li><strong>context.app:</strong> é€šè¿‡ <code>createApp()</code> æ–¹å¼åˆ›å»ºçš„ app å®ä¾‹(ä»…æ”¯æŒVue 3)</li>
<li><strong>context.store:</strong> store å¯¹è±¡</li>
<li><strong>context.options:</strong> è·å–å®šä¹‰ store æ—¶ä¼ å…¥çš„é…ç½®é¡¹</li>
</ol>
<p>å‡½æ•°å¯ä»¥é€šè¿‡è¿”å›å¯¹è±¡çš„æ–¹å¼ï¼Œå°†å¯¹è±¡ä¸­çš„å€¼ç»‘å®šåˆ°<strong>æ‰€æœ‰çš„</strong> store ä¸Šå»ï¼š</p>
<pre><code class="language-ts">// src/main.ts

function SecretPiniaPlugin() {
  return { secret: 'the cake is a lie' }
}
</code></pre>
<p>å®šä¹‰å®Œæˆåï¼Œé€šè¿‡ <code>pinia.use()</code> çš„æ–¹å¼ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼š</p>
<pre><code class="language-ts">// src/main.ts
import { createPinia } from 'pinia'

const pinia = createPinia()

pinia.use(SecretPiniaPlugin)
</code></pre>
<p>ä¹‹åï¼Œåœ¨é¡µé¢ä¸­æ‰“å° Store ä¸­çš„ <code>secret</code> å±æ€§æ—¶ï¼Œå³å¯çœ‹åˆ°æˆ‘ä»¬è®¾å®šçš„å€¼ã€‚å¹¶ä¸”é€šè¿‡è¿™ç§æ–¹å¼æ–°å¢åˆ° store ä¸­çš„å±æ€§å¯ä»¥è¢« Vue devtool æ•è·åˆ°ï¼š</p>
<figure data-type="image" tabindex="6"><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa5de1b7353e4de3b4a5deca838997c2~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ç›´æ¥å°†å€¼ç»‘å®šåˆ° store å¯¹è±¡ä¸Šï¼Œä½†æ˜¯è¿™æ ·<strong>æ— æ³•è¢« Vue devtoolæ•è·</strong>ï¼š</p>
<pre><code class="language-ts">// src/main.ts

// å®šä¹‰æ’ä»¶
function SecretPiniaPlugin({ store }) {
  // ç›´æ¥å°†å±æ€§ç»‘å®šåˆ°storeä¸Šå»
  store.secret = 'the cake is a lie'
}
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7178d567ae64a8d9a61e9c40bb0a93a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>æ­¤æ—¶æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œä¸Šè¿°æ­¥éª¤ä¸­çš„ <code>customProperties</code> å±æ€§ä¸è§äº†ã€‚å¦‚æœåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­éœ€è¦åœ¨ Vue devtool ä¸­çœ‹åˆ°æ’ä»¶ä¸­å®šä¹‰çš„ store å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼š</p>
<pre><code class="language-ts">// src/main.ts

// å®šä¹‰æ’ä»¶
function SecretPiniaPlugin({ store }) {
  // ç›´æ¥å°†å±æ€§ç»‘å®šåˆ°storeä¸Šå»
  store.secret = 'the cake is a lie'
  // åœ¨å¼€å‘ç¯å¢ƒä¸­æ‰‹åŠ¨æ·»åŠ è¯¥å±æ€§ï¼Œä»¥ä¾¿ Vue devtool å¯ä»¥æ•è·åˆ°
  if (process.env.NODE_ENV === 'development') {
    // add any keys you set on the store
    store._customProperties.add('secret')
  }
}
</code></pre>
<p>æ·»åŠ å®Œå±æ€§åï¼Œå½“æˆ‘ä»¬ç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨æ—¶ï¼Œå‘ç°é¡µé¢ä¸Šå¹¶ä¸èƒ½æ˜¾ç¤ºå‡ºæ’ä»¶æ’å…¥åˆ° store ä¸­çš„å±æ€§ï¼Œè¿™æ˜¯å› ä¸ºæ’å…¥çš„å±æ€§æ˜¯<strong>éå“åº”å¼çš„</strong>ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€å°†æ’å…¥çš„å±æ€§å€¼å˜ä¸º<strong>å“åº”å¼æ•°æ®</strong>å³å¯ï¼š</p>
<pre><code class="language-ts">import { createApp, ref } from 'vue'
import { createPinia } from 'pinia'

// åˆ›å»º pinia
const pinia = createPinia()

// å®šä¹‰æ’ä»¶
function SecretPiniaPlugin({ store }) {
  // ç›´æ¥å°†å±æ€§ç»‘å®šåˆ°storeä¸Šå»
  store.secret = ref('the cake is a lie')
  // åœ¨å¼€å‘ç¯å¢ƒä¸­æ‰‹åŠ¨æ·»åŠ è¯¥å±æ€§ï¼Œä»¥ä¾¿ Vue devtool å¯ä»¥æ•è·åˆ°
  if (process.env.NODE_ENV === 'development') {
    // add any keys you set on the store
    store._customProperties.add('secret')
  }
}

// ä½¿ç”¨æ’ä»¶
pinia.use(SecretPiniaPlugin)
</code></pre>
<p>è®¾ç½®å®Œæˆåï¼Œå†åœ¨é¡µé¢ä¸­ä½¿ç”¨æ—¶ï¼Œå°±å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ°æ•°æ®å•¦~</p>
<p>æ­¤å¤–ï¼Œåœ¨æ’ä»¶ä¸­å¯ä»¥é€šè¿‡ <code>store.$subscribe</code> ä»¥åŠ <code>store.$onActions</code> æ–¹æ³•ç›‘å¬ actions çš„è§¦å‘ã€‚</p>
<p>å…³äºæ’ä»¶çš„æ›´å¤šç©æ³•å¯ä»¥å‚è€ƒ<a href="https://pinia.vuejs.org/core-concepts/plugins.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œç›¸ä¿¡å¤§å®¶å¯¹äº <code>Pinia</code> å·²ç»æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„å°è±¡ã€‚æ–‡ç« ä¸­è‹¥æœ‰æè¿°ä¸å½“ä¹‹å¤„è¿˜è¯·è¯¸ä½å¤§ä½¬æŒ‡æ­£ã€‚</p>
<p>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œå…³äº Pinia çš„å…¶ä»–æ›´å¤šç©æ³•ç­‰å¾…ç€å°ä¼™ä¼´ä»¬å»æŒ–æ˜ã€‚èµ¶å¿«åŠ¨æ‰‹ <s>å·èµ·æ¥</s> å°ä¸ªé²œå§~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ‰‹å†™ç»ƒä¹ ï¼šé˜²æŠ–èŠ‚æµ]]></title>
        <id>https://luhaifeng666.github.io/post/shou-xie-lian-xi-fang-dou-jie-liu/</id>
        <link href="https://luhaifeng666.github.io/post/shou-xie-lian-xi-fang-dou-jie-liu/">
        </link>
        <updated>2022-01-18T16:45:06.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸è®ºåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œè¿˜æ˜¯åœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œ<code>é˜²æŠ–èŠ‚æµ</code> æ€»æ˜¯ä¼šæ—¶ä¸æ—¶çš„å‡ºç°åœ¨æˆ‘ä»¬çš„è§†é‡é‡Œã€‚åœ¨æ—¥å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç›´æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°è£…å¥½çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>lodash</code> ä¸­çš„é˜²æŠ–æ–¹æ³• <a href="https://lodash.com/docs/4.17.15#debounce"><em>.debounce</a> å’ŒèŠ‚æµæ–¹æ³• <a href="https://lodash.com/docs/4.17.15#throttle"></em>.throttle</a>ã€‚æŠ‘æˆ–æ˜¯ä½¿ç”¨å¼€å‘å›¢é˜Ÿçš„å°ä¼™ä¼´ä»¬å°è£…å¥½çš„æ–¹æ³•ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸è®ºåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œè¿˜æ˜¯åœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œ<code>é˜²æŠ–èŠ‚æµ</code> æ€»æ˜¯ä¼šæ—¶ä¸æ—¶çš„å‡ºç°åœ¨æˆ‘ä»¬çš„è§†é‡é‡Œã€‚åœ¨æ—¥å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šç›´æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°è£…å¥½çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>lodash</code> ä¸­çš„é˜²æŠ–æ–¹æ³• <a href="https://lodash.com/docs/4.17.15#debounce"><em>.debounce</a> å’ŒèŠ‚æµæ–¹æ³• <a href="https://lodash.com/docs/4.17.15#throttle"></em>.throttle</a>ã€‚æŠ‘æˆ–æ˜¯ä½¿ç”¨å¼€å‘å›¢é˜Ÿçš„å°ä¼™ä¼´ä»¬å°è£…å¥½çš„æ–¹æ³•ã€‚</p>
<!-- more -->
<p>åœ¨å¿™ç¢Œçš„å·¥ä½œä¸­ï¼Œä¹Ÿè®¸å°ä¼™ä¼´ä»¬çŸ¥é“å®ƒä»¬çš„ä½œç”¨ï¼Œä½†æ˜¯å¯¹å…¶ä¸­çš„åŸç†é€æ¸é™Œç”Ÿã€‚ä»Šå¤©æˆ‘ä»¬å°±æŠŠè¿™ä¸¤ä¸ª <code>è€æœ‹å‹</code> è¯·å‡ºæ¥ï¼Œå†æ¥ä¸€èµ·çœ‹çœ‹æ˜¯å¦‚ä½•å®ç°çš„å§~</p>
<h1 id="èŠ‚æµæ–¹æ³•throttle">èŠ‚æµæ–¹æ³•ï¼šthrottle</h1>
<h2 id="ä»€ä¹ˆæ˜¯èŠ‚æµ">ä»€ä¹ˆæ˜¯èŠ‚æµ</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬èŠ‚æµï¼š</p>
<blockquote>
<p>åœ¨è§„å®šçš„å»¶æ—¶æ—¶é—´å†…ï¼Œä¸ç®¡ä½ æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæˆ‘éƒ½åªè®¤ç¬¬ä¸€æ¬¡ã€‚</p>
</blockquote>
<h2 id="èŠ‚æµçš„å®ç°">èŠ‚æµçš„å®ç°</h2>
<pre><code class="language-js">/**
 * èŠ‚æµå‡½æ•°
 * @param fn
 * @param delay
 */
function throttle (fn, delay) {
 // ä¸Šä¸€æ¬¡çš„è°ƒç”¨æ—¶é—´
 let lastTime = 0

 // å°†throttleç»“æœä»¥å‡½æ•°å½¢å¼è¿”å›
 return function () {
  // ä¿å­˜æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡
  const context = this
  // ä¿å­˜è°ƒç”¨throttleç»“æœå‡½æ•°æ—¶ä¼ å…¥çš„å‚æ•°
  const args = arguments
  // æœ¬åœ°è°ƒç”¨çš„æ—¶é—´
  const time  = new Date()
  // å¦‚æœæœ¬æ¬¡è°ƒç”¨æ—¶é—´å‡å»ä¸Šä¸€æ¬¡çš„è°ƒç”¨æ—¶é—´å¤§äºå»¶è¿Ÿæ—¶é—´ï¼Œåˆ™è§¦å‘ä¼ å…¥çš„fn
  if (time - lastTime &gt; delay) {
   lastTime = time
   fn.apply(context, args)
  }
 }
}
</code></pre>
<h1 id="é˜²æŠ–æ–¹æ³•debounce">é˜²æŠ–æ–¹æ³•ï¼šdebounce</h1>
<h2 id="ä»€ä¹ˆæ˜¯é˜²æŠ–">ä»€ä¹ˆæ˜¯é˜²æŠ–</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬é˜²æŠ–ï¼š</p>
<blockquote>
<p>åœ¨è§„å®šçš„å»¶æ—¶æ—¶é—´å†…ï¼Œä¸ç®¡ä½ è§¦å‘å¤šå°‘æ¬¡å›è°ƒï¼Œéƒ½åªè®¤æœ€åä¸€æ¬¡ã€‚</p>
</blockquote>
<h2 id="é˜²æŠ–çš„å®ç°">é˜²æŠ–çš„å®ç°</h2>
<pre><code class="language-js">/**
 * é˜²æŠ–
 * @param fn
 * @param delay
 */
function debounce (fn, delay) {
 // ä¿å­˜å»¶æ—¶
 let timer = null
 // å°†debounceçš„å¤„ç†ç»“æœä»¥å‡½æ•°å½¢å¼è¿”å›
 return function () {
  // ä¿å­˜æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡
  const context = this
  // ä¿å­˜æ‰§è¡Œæ—¶ä¼ å…¥çš„å‚æ•°
  const args = arguments
  // å¦‚æœå­˜åœ¨å®šæ—¶å™¨ï¼Œåˆ™å°†å…¶æ¸…é™¤
  timer &amp;&amp; clearTimeout(timer)
  // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œåœ¨è®¡æ—¶ç»“æŸåè§¦å‘å›è°ƒ
  timer = setTimeout(() =&gt; {
   fn.apply(context, args)
  }, delay)
 }
}
</code></pre>
<h1 id="é˜²æŠ–çš„å¼Šç«¯">é˜²æŠ–çš„å¼Šç«¯</h1>
<p>é˜²æŠ–ä¸èŠ‚æµçš„ç›®çš„ï¼Œéƒ½æ˜¯åœ¨ä¸€å®šæ—¶é—´å†…é™åˆ¶å›è°ƒå‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œä»è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡æ€§èƒ½ã€‚</p>
<p>ä½†æ˜¯é˜²æŠ–å­˜åœ¨ä¸€ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯å¦‚æœåœ¨ <code>delay</code> æŒ‡å®šçš„æ—¶é—´å†…ä¸æ–­è§¦å‘é˜²æŠ–ï¼Œå°±ä¼šå¯¼è‡´å›è°ƒå‡½æ•°è¿Ÿè¿Ÿä¸ä¼šæœ‰å“åº”ã€‚åªæœ‰åœ¨ä½  <code>åœæ‰‹</code> ä¹‹åï¼Œç»è¿‡ <code>dealy</code> è¿™æ®µæ—¶é—´åï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæœ‰å“åº”ã€‚</p>
<p>æ—¢ç„¶å¦‚æ­¤ï¼Œå¦‚æœæˆ‘ä»¬èƒ½åœ¨ä¸€å¼€å§‹å°±è§¦å‘å›è°ƒï¼Œç„¶ååœ¨åç»­é¢‘ç¹çš„æ“ä½œé‡Œä¿æŒé˜²æŠ–çš„ç‰¹æ€§ï¼Œå²‚ä¸æ˜¯ç¾æ»‹æ»‹~</p>
<figure data-type="image" tabindex="1"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f590f56f027483396cbd269655ac3e6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h1 id="åŠ å¼ºç‰ˆçš„èŠ‚æµæ–¹æ³•strongerthrottle">åŠ å¼ºç‰ˆçš„èŠ‚æµæ–¹æ³•ï¼šstrongerThrottle</h1>
<p>å›é¡¾æˆ‘ä»¬ä¹‹å‰æ‰€å®ç°çš„ <code>èŠ‚æµ</code> æ–¹æ³•ï¼Œå®ƒä¸æ­£æ˜¯åœ¨ä¸€å¼€å§‹å°±å¯ä»¥ç«‹å³è°ƒç”¨å›è°ƒå‡½æ•°çš„ä¹ˆï¼Ÿæ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>throttle</code> æ–¹æ³•æ¥å¯¹ <code>debounce</code> æ–¹æ³•è¿›è¡Œä¼˜åŒ–ï¼Œå®ç°ä¸€ä¸ªåŠ å¼ºç‰ˆçš„èŠ‚æµæ–¹æ³•ã€‚</p>
<pre><code class="language-js">/**
 * æ›´å¥å£®çš„èŠ‚æµï¼Œç»“åˆäº†é˜²æŠ–
 * @param fn
 * @param delay
 */
function strongerThrottle (fn, delay) {
 // ä¿å­˜è®¡æ—¶å™¨ä¸æœ€åä¸€æ¬¡è°ƒç”¨æ—¶é—´
 let timer = null
 let lastTime = 0
 // å°†è°ƒç”¨strongerThrottleçš„ç»“æœä»¥å‡½æ•°å½¢å¼è¿”å›
 return function () {
  // ä¿å­˜æ‰§è¡Œä¸Šä¸‹æ–‡
  const context = this
  // ä¿å­˜ä¼ å…¥çš„å‚æ•°
  const args = arguments
  // ä¿å­˜å½“å‰è°ƒç”¨æ—¶é—´
  const time = new Date()
  // å¦‚æœå½“å‰è°ƒç”¨çš„æ—¶é—´å‡å»æœ€åä¸€æ¬¡è°ƒç”¨çš„æ—¶é—´å°äºå»¶è¿Ÿæ—¶é—´ï¼Œåˆ™è®¾ç½®å®šæ—¶å™¨
  if (time - lastTime &lt; delay) {
   // å¦‚æœå­˜åœ¨å®šæ—¶å™¨ï¼Œåˆ™å…ˆæ¸…ç©º
   timer &amp;&amp; clearTimeout(timer)
   // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œåœ¨è®¡æ—¶ç»“æŸåè§¦å‘å›è°ƒ
   timer = setTimeout(function () {
    lastTime = time
    fn.apply(context, args)
   }, delay)
  } else {
   // å¦‚æœè¶…å‡ºæ—¶é—´ï¼Œåˆ™ç»™å‡ºå“åº”
   lastTime = time
   fn.apply(context, args)
  }
 }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[CSSå­¦ä¹ ï¼šè¾¹æ¡†å†…åœ†è§’]]></title>
        <id>https://luhaifeng666.github.io/post/css-xue-xi-bian-kuang-nei-yuan-jiao/</id>
        <link href="https://luhaifeng666.github.io/post/css-xue-xi-bian-kuang-nei-yuan-jiao/">
        </link>
        <updated>2022-01-17T13:35:26.000Z</updated>
        <summary type="html"><![CDATA[<p>éœ€æ±‚ï¼š<strong>å…ƒç´ è¾¹æ¡†å†…ä¾§çš„å››ä¸ªè§’ä¸ºåœ†è§’ï¼Œå½¢æˆå†…åœ†è§’çš„æ•ˆæœ</strong>ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>éœ€æ±‚ï¼š<strong>å…ƒç´ è¾¹æ¡†å†…ä¾§çš„å››ä¸ªè§’ä¸ºåœ†è§’ï¼Œå½¢æˆå†…åœ†è§’çš„æ•ˆæœ</strong>ã€‚</p>
<!-- more -->
<h3 id="æƒ³æ³•ä¸€">æƒ³æ³•ä¸€</h3>
<p>è¿™ä¸ªéœ€æ±‚ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè¾¹æ¡†å’Œåœ†è§’ã€‚å®ç°è¾¹æ¡†è·Ÿåœ†è§’å¹¶ä¸å›°éš¾ï¼Œåªè¦ä½¿ç”¨borderä»¥åŠ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-radius">border-radius</a>å±æ€§å³å¯ï¼š</p>
<h4 id="ä»£ç 1">ä»£ç 1</h4>
<pre><code class="language-css">border: 10px solid #67C23A;  
border-radius: 10px;  
</code></pre>
<p>å®ç°æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3508271000114aada421533011a1808c~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆå®ç°çš„æ˜¯å¤–åœ†è§’å†…ç›´è§’çš„æ•ˆæœï¼Œå› ä¸ºåœ¨è®¾ç½® <code>border-radius</code> çš„æ—¶å€™ï¼Œæ˜¯ç®—ä¸Šè¾¹æ¡†çš„ã€‚</p>
<h3 id="æƒ³æ³•äºŒ">æƒ³æ³•äºŒ</h3>
<p>åœ¨<a href="https://juejin.cn/post/7052624943795666974">å¤šé‡è¾¹æ¡†</a>è¿™ç¯‡æ–‡ç« ä¸­æåˆ°è¿‡ <code>outline</code>ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥é€šè¿‡ <code>outline</code> ä»¥åŠ <code>border-radius</code> çš„æ–¹å¼æ¥å®ç°è¿™ä¸ªæ•ˆæœå‘¢ï¼š</p>
<h4 id="ä»£ç 2">ä»£ç 2</h4>
<pre><code class="language-css">outline: 10px solid #67C23A;  
border-radius: 10px;  
</code></pre>
<p>å…·ä½“æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50ebe260ff7d4596841484ddd16b8fe0~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>å®é™…æ•ˆæœè·ç¦»æˆ‘ä»¬çš„é¢„æœŸå·²ç»éå¸¸æ¥è¿‘äº†ï¼Œå¯æ˜¯åœ¨å…ƒç´ çš„å››ä¸ªè§’è¿˜å­˜åœ¨ç™½è‰²çš„ç©ºéš™ï¼Œé‚£è¯¥æ€ä¹ˆå¡«ä¸Šå‘¢ï¼Ÿç­”æ¡ˆæ˜¯<strong>box-shadow!</strong> æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥å®ç°è¿™ä¸ªæ•ˆæœï¼š</p>
<h4 id="ä»£ç 3">ä»£ç 3</h4>
<pre><code class="language-css">outline: 10px solid #67C23A;  
border-radius: 10px;  
box-shadow 0 0 0 4px #67C23A  
</code></pre>
<p>æœ€åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<demo-1-4 :type="'type3'" />  
<figure data-type="image" tabindex="3"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb97b6321e5e4948b5ddf7d757f7bd85~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>é‚£è¿™ä¸ªåç§»é‡æˆ‘ä»¬è¦è®¾ç½®å¤šå°‘åˆé€‚å‘¢ï¼Ÿå…¶å®è®¡ç®—ä¹Ÿéå¸¸ç®€å•ã€‚å››ä¸ªå†…åœ†è§’å…¶å®å°±æ˜¯4ä¸ª1/4åœ†:<br>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa239afce1e942338be271fa28241430~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p>
<p>é€šè¿‡å‹¾è‚¡å®šç†å¯ä»¥æ±‚å¾— <code>L = âˆš2R</code> ï¼Œ<code>box-shadow</code> éœ€è¦è®¾ç½®çš„åç§»é‡ä¸º <code>L - R = (âˆš2 - 1) * R</code>ï¼Œå…¶ä¸­ï¼Œ<code>R</code> æ˜¯ <code>border-radius</code> çš„å€¼ã€‚æ‰€ä»¥åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œåç§»é‡çš„è·ç¦»å¤§æ¦‚ä¸ºï¼š<code>0.414 * 10 = 4px</code>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[èƒŒæ™¯å®šä½]]></title>
        <id>https://luhaifeng666.github.io/post/bei-jing-ding-wei/</id>
        <link href="https://luhaifeng666.github.io/post/bei-jing-ding-wei/">
        </link>
        <updated>2022-01-14T02:19:40.000Z</updated>
        <summary type="html"><![CDATA[<p>CSS2.1ä¸­ï¼Œä½¿ç”¨ <code>background-position</code> å±æ€§è¿›è¡ŒèƒŒæ™¯å®šä½ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>top,left,right,bottom</code> æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å…·ä½“çš„æ•°å€¼æˆ–è€…ç™¾åˆ†æ¯”æ¥å®ç°ï¼Œä½†æ˜¯åœ¨ä¸å›ºå®šå®½é«˜çš„å®¹å™¨ä¸­ï¼Œæƒ³è¦è·Ÿå®¹å™¨çš„è¾¹æ¡†ä¿ç•™å›ºå®šçš„è¾¹è·ï¼Œå°±åªèƒ½é€šè¿‡ç™¾åˆ†æ¯”å®ç°å¤§æ¦‚çš„é—´è·ï¼Œä¸èƒ½ç²¾ç¡®åˆ°å…·ä½“ä½ç½®ã€‚è€Œåœ¨CSS3ä¸­ï¼Œåˆ™å­˜åœ¨ä¸¤ç§æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°èƒŒæ™¯å®šä½çš„ä½ç½®ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>CSS2.1ä¸­ï¼Œä½¿ç”¨ <code>background-position</code> å±æ€§è¿›è¡ŒèƒŒæ™¯å®šä½ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>top,left,right,bottom</code> æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å…·ä½“çš„æ•°å€¼æˆ–è€…ç™¾åˆ†æ¯”æ¥å®ç°ï¼Œä½†æ˜¯åœ¨ä¸å›ºå®šå®½é«˜çš„å®¹å™¨ä¸­ï¼Œæƒ³è¦è·Ÿå®¹å™¨çš„è¾¹æ¡†ä¿ç•™å›ºå®šçš„è¾¹è·ï¼Œå°±åªèƒ½é€šè¿‡ç™¾åˆ†æ¯”å®ç°å¤§æ¦‚çš„é—´è·ï¼Œä¸èƒ½ç²¾ç¡®åˆ°å…·ä½“ä½ç½®ã€‚è€Œåœ¨CSS3ä¸­ï¼Œåˆ™å­˜åœ¨ä¸¤ç§æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°èƒŒæ™¯å®šä½çš„ä½ç½®ã€‚</p>
<!-- more -->
<h3 id="1-background-positionçš„æ‰©å±•è¯­æ³•">1ã€background-positionçš„æ‰©å±•è¯­æ³•</h3>
<p>åœ¨CSS3ä¸­ï¼Œå¯ä»¥æŒ‡å®šèƒŒæ™¯å›¾ç‰‡<strong>è·ç¦»ä»»æ„è§’çš„åç§»é‡</strong>ï¼Œåªè¦æˆ‘ä»¬åœ¨<strong>åç§»é‡å‰æŒ‡å®šå…³é”®å­—å³å¯ã€‚</strong></p>
<pre><code class="language-css">background: url(../public/images/orange.jpeg) no-repeat top 10px left 10px / 30%;  
background-color: #409EFF;  
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42078d94ae5f4eb2b901920556799c96~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>æ­¤æ—¶ï¼Œå›¾ä¸­çš„å–µé…±è·ç¦»ä¸Šè¾¹10pxï¼Œè·ç¦»å·¦è¾¹10pxã€‚è¿™æ ·å°±å¯ä»¥å®ç°ç²¾ç¡®å®šä½ã€‚</p>
<h3 id="2-background-origin">2ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-origin">background-origin</a></h3>
<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘éœ€è¦å›¾ç‰‡çš„åç§»é‡ä¸å†…è¾¹è·ä¸€è‡´ã€‚å¦‚æœç»§ç»­ä½¿ç”¨ä¸Šè¿°æ–¹æ³•çš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-css">padding: 10px;  
background: url(../public/images/orange.jpeg) no-repeat top 10px left 10px / 30%;  
background-color: #409EFF;  
</code></pre>
<p>è¿™æ ·å†™ç¡®å®å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¯æ˜¯å¦‚æœæ­¤æ—¶æˆ‘çš„éœ€æ±‚å‘ç”Ÿå˜åŒ–ï¼Œå†…è¾¹è·éœ€è¦æ”¹ä¸º20pxï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±å¯¼è‡´æˆ‘ä»¬éœ€è¦æ”¹ä¸‰ä¸ªåœ°æ–¹çš„æ•°å€¼ã€‚å¦‚æœåªæ˜¯å°‘æ•°å‡ ä¸ªåœ°æ–¹è¿˜å¥½ï¼Œå¦‚æœæ”¹åŠ¨çš„åœ°æ–¹æ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆä¹…å¢åŠ äº†æ—¥å¸¸ç»´æŠ¤çš„æˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œé™¤å»marginä»¥å¤–ï¼Œå…ƒç´ çš„å†…å®¹ä¸»è¦åˆ†æˆä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28fdd248584a482a8012d40c85b0766d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<p>èƒŒæ™¯å®šä½ä¸­çš„ <code>top,left,right,bottom</code> ï¼Œå®ƒä»¬çš„å®šä½éƒ½æ˜¯ä¾æ® <code>padding-box</code> æ¥çš„ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>background-origin</code> æ¥ä¿®æ”¹é»˜è®¤çš„å‚ç…§ï¼š</p>
<pre><code class="language-css">padding: 10px;  
background: url(../public/images/orange.jpeg) no-repeat top 10px left 10px / 30%;  
background-origin: content-box;  
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ <code>padding</code> ä¸€ä¸ªå€¼ï¼Œå°±å¯ä»¥çµæ´»åº”å¯¹ä¸Šè¿°å˜åŒ–äº†ã€‚<br><br>
ä¸ä¹‹ç›¸ä»¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/calc">calc</a>æ¥å®ç°å®šä½ã€‚</p>
<pre><code class="language-css">padding: 10px;  
background: url(../public/images/orange.jpeg) no-repeat calc(100% - 20px) calc(100% - 10px) / 30%;  
background-origin: content-box;  
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¤šé‡è¾¹æ¡†]]></title>
        <id>https://luhaifeng666.github.io/post/css-xue-xi-duo-chong-bian-kuang/</id>
        <link href="https://luhaifeng666.github.io/post/css-xue-xi-duo-chong-bian-kuang/">
        </link>
        <updated>2022-01-13T09:42:24.000Z</updated>
        <summary type="html"><![CDATA[<p>å¤šé‡è¾¹æ¡†ä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸¤å±‚è¾¹æ¡†ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯2å±‚ä»¥ä¸Šçš„è¾¹æ¡†ã€‚é’ˆå¯¹è¿™ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«å¯¹åº”æœ‰ä¸åŒçš„å¤„ç†æ–¹æ¡ˆã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>å¤šé‡è¾¹æ¡†ä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸¤å±‚è¾¹æ¡†ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯2å±‚ä»¥ä¸Šçš„è¾¹æ¡†ã€‚é’ˆå¯¹è¿™ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«å¯¹åº”æœ‰ä¸åŒçš„å¤„ç†æ–¹æ¡ˆã€‚</p>
<!-- more -->
<h3 id="1-outline">1ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/outline">outline</a></h3>
<p>æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åªéœ€è¦ä¸¤å±‚è¾¹æ¡†ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>outline</code> æ¥å®ç°ã€‚</p>
<pre><code class="language-css">background: #409EFF;  
border: 10px solid #67C23A;  
outline: 5px solid #E6A23C;  
</code></pre>
<p>å¦‚<a href="https://codepen.io/luhaifeng666/pen/QWqzwKO">demo1</a>ã€‚å…¶ä¸­ï¼Œç»¿è‰²çš„æ˜¯ <code>border</code>ï¼Œé»„è‰²çš„æ˜¯ <code>outline</code>ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db1c4a60f8ff486893e11bd1cc5985cc~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<blockquote>
<p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥è‡ªç”±è®¾ç½®è¾¹æ¡†çš„æ ·å¼ï¼›</li>
<li>ä¹Ÿå¯ä»¥é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/outline-offset">outline-offset</a>æ¥è®¾ç½®è·Ÿå…ƒç´ è¾¹ç¼˜ä¹‹é—´çš„è·ç¦»ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥æ¥å—è´Ÿå€¼ã€‚è®¾ç½®è´Ÿå€¼æ—¶åˆ™æ˜¯æ˜¾ç¤ºçš„å†…è¾¹æ¡†ï¼Œç±»ä¼¼äº <code>box-shadow</code> çš„ <code>inset</code> ã€‚</li>
</ol>
</blockquote>
<blockquote>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>åªé€‚ç”¨äºåŒè¾¹æ¡†çš„æ ·å¼ï¼Œå¤šè¾¹æ¡†çš„æ ·å¼ä¸èƒ½ç”¨ï¼›</li>
<li>äº§ç”Ÿçš„è¾¹æ¡†ä¸èƒ½è´´åˆè®¾ç½®äº†åœ†è§’çš„å…ƒç´ ï¼Œéœ€è¦é…åˆ <code>box-shadow</code> æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼ˆåé¢ä¼šæåˆ°ï¼‰;</li>
<li>æ ¹æ®CSSåŸºæœ¬UIç‰¹æ€§(ç¬¬ä¸‰ç‰ˆ)è§„èŒƒï¼Œ<strong>æè¾¹å¯ä»¥ä¸æ˜¯çŸ©å½¢</strong>ï¼Œä½¿ç”¨æ—¶è¦æµ‹è¯•å„ä¸ªæµè§ˆå™¨çš„è¡¨ç°æƒ…å†µã€‚</li>
</ol>
</blockquote>
<h3 id="2-box-shadow">2ã€<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow">box-shadow</a></h3>
<p>å¸¸è§„çš„ <code>box-shadow</code> æ˜¯ç”¨æ¥è®¾ç½®é˜´å½±çš„ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®å¤šå€¼ï¼Œé€šè¿‡å®ƒçš„åç§»ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆå¤šé‡è¾¹æ¡†ã€‚</p>
<pre><code class="language-css">margin: 50px auto;  
box-shadow: 0 0 0 10px #67C23A, 0 0 0 20px #F56C6C, 0 0 0 30px #E6A23C;  
</code></pre>
<p>å‚è€ƒ<a href="https://codepen.io/luhaifeng666/pen/QWqzwKO">demo2</a>ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/185eaf1c75844b09962a19f6694305df~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<blockquote>
<p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>ç›¸æ¯”è¾ƒäº <code>outline</code> ï¼Œè¿™ç§æ–¹å¼å¯ä»¥è®¾ç½®å¤šé‡è¾¹æ¡†ï¼›</li>
<li>é™¤äº†è¾¹æ¡†ï¼Œ<code>box-shadow</code> çš„åç§»è¿˜èƒ½å®ç°å…¶ä»–æ›´å¤šç¥å¥‡çš„æ•ˆæœ</li>
</ol>
</blockquote>
<blockquote>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>ç›¸æ¯”è¾ƒoutlineè¾¹æ¡†çš„è‡ªç”±è®¾ç½®ï¼Œ<code>box-shadow</code> ä¸èƒ½å®ç°ç±»ä¼¼è¾¹æ¡†è™šçº¿çš„æ•ˆæœï¼›</li>
<li>ä¸ä¼šå½±å“å¸ƒå±€ï¼Œä¹Ÿä¸ä¼šå—åˆ°<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing">box-sizing</a>å±æ€§çš„å½±å“ï¼›</li>
<li>ä¸ä¼šå½±å“é¼ æ ‡çš„äº‹ä»¶ï¼Œæ¯”å¦‚hoverè¿˜æœ‰clickï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„ã€‚</li>
</ol>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åŠé€æ˜è¾¹æ¡†]]></title>
        <id>https://luhaifeng666.github.io/post/ban-tou-ming-bian-kuang/</id>
        <link href="https://luhaifeng666.github.io/post/ban-tou-ming-bian-kuang/">
        </link>
        <updated>2022-01-12T02:34:10.000Z</updated>
        <summary type="html"><![CDATA[<p>ã€ŠCSSç§˜å¯†èŠ±å›­ã€‹å­¦ä¹ ç¬”è®°ï¼šåŠé€æ˜è¾¹æ¡†ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ã€ŠCSSç§˜å¯†èŠ±å›­ã€‹å­¦ä¹ ç¬”è®°ï¼šåŠé€æ˜è¾¹æ¡†ã€‚</p>
<!-- more -->
<p>æˆ‘ä»¬åœ¨æƒ³å®ç°ä¸€ä¸ªé€æ˜è¾¹æ¡†çš„æ—¶å€™ï¼Œé€šå¸¸æƒ³åˆ°çš„å¯èƒ½æ˜¯ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-css">border: 3px solid rgba(255,255,255,0.6);
</code></pre>
<p>å¯æ˜¯å¦‚æœè¿™æ—¶å€™ç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªèƒŒæ™¯è‰²æˆ–è€…èƒŒæ™¯å›¾ç‰‡ï¼ŒèƒŒæ™¯å›¾ç‰‡ä¸èƒŒæ™¯è‰²ä¼šé€è¿‡é€æ˜è¾¹æ¡†æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ˜¯å› ä¸º<strong>åœ¨é»˜è®¤æƒ…å†µä¸‹,èƒŒæ™¯ä¼šå»¶ä¼¸åˆ°è¾¹æ¡†æ‰€åœ¨åŒºåŸŸçš„ä¸‹å±‚ã€‚</strong></p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ª<a href="https://codepen.io/luhaifeng666/pen/MWEzyag?editors=1111">æ —å­</a>~</p>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…ƒç´ çš„èƒŒæ™¯è‰²è¢«è®¾ç½®ä¸ºè“è‰²ï¼ŒèƒŒæ™¯è‰²è®¾ç½®ä¸º<code>rgba(255,255,255,.6)</code> ,æ­¤æ—¶ï¼Œé€è¿‡é€æ˜è¾¹æ¡†å¯ä»¥çœ‹åˆ°å…ƒç´ çš„èƒŒæ™¯è‰²ã€‚</p>
<h3 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h3>
<p>é€šè¿‡æ·»åŠ  <code>background-clip</code> æ¥è§£å†³æ­¤ç±»é—®é¢˜ã€‚</p>
<pre><code class="language-css">border: 3px solid rgba(255,255,255,0.6);
background-clip: padding-box;
</code></pre>
<blockquote>
<p>background-clipå±æ€§æ˜¯ç”¨æ¥è®¾ç½®èƒŒæ™¯è£å‰ªåŒºåŸŸçš„ï¼Œè¯¥å±æ€§æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šcontent-box | padding-box | border-box | textï¼Œè£å‰ªåŒºåŸŸå¦‚ä¸‹ï¼š</p>
<ol>
<li>content-box: contentéƒ¨åˆ†ï¼ŒèƒŒæ™¯è¢«è£å‰ªè‡³å†…å®¹åŒºï¼ˆcontent boxï¼‰å¤–æ²¿ã€‚</li>
<li>padding-box: content + paddingéƒ¨åˆ†ï¼ŒèƒŒæ™¯å»¶ä¼¸è‡³å†…è¾¹è·ï¼ˆpaddingï¼‰å¤–æ²¿ã€‚ä¸ä¼šç»˜åˆ¶åˆ°è¾¹æ¡†å¤„ã€‚</li>
<li>border-box: content + padding + borderéƒ¨åˆ†ï¼ŒèƒŒæ™¯å»¶ä¼¸è‡³è¾¹æ¡†å¤–æ²¿ï¼ˆä½†æ˜¯åœ¨è¾¹æ¡†ä¸‹å±‚ï¼‰ã€‚</li>
<li>text: è£å‰ªä¸ºtextå‰æ™¯è‰²</li>
</ol>
</blockquote>
<p>å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒMDNæ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-clip">background-clip</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mini-vueå­¦ä¹ ï¼šreactivity çš„æ ¸å¿ƒæµç¨‹]]></title>
        <id>https://luhaifeng666.github.io/post/mini-vue-xue-xi-reactivity-de-he-xin-liu-cheng/</id>
        <link href="https://luhaifeng666.github.io/post/mini-vue-xue-xi-reactivity-de-he-xin-liu-cheng/">
        </link>
        <updated>2021-12-29T12:38:48.000Z</updated>
        <summary type="html"><![CDATA[<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸‹ï¼Œåœ¨ <code>vue3</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸‹ï¼Œåœ¨ <code>vue3</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<!-- more -->
<h2 id="å†™åœ¨å¼€å§‹">å†™åœ¨å¼€å§‹</h2>
<p>åœ¨æ­£å¼å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¸€èµ·æ¥äº†è§£ä¸€ä¸ªæ€æƒ³ï¼š<code>TDD</code>ã€‚ä»€ä¹ˆæ˜¯ <code>TDD</code> å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒçš„æ¦‚å¿µï¼š</p>
<pre><code>TDDæ˜¯æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTest-Driven Developmentï¼‰çš„è‹±æ–‡ç®€ç§°ã€‚
å®ƒæ˜¯æ•æ·å¼€å‘ä¸­çš„ä¸€é¡¹æ ¸å¿ƒå®è·µå’ŒæŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•è®ºã€‚
TDDçš„åŸç†æ˜¯åœ¨å¼€å‘åŠŸèƒ½ä»£ç ä¹‹å‰ï¼Œå…ˆç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ä»£ç ï¼Œæµ‹è¯•ä»£ç ç¡®å®šéœ€è¦ç¼–å†™ä»€ä¹ˆäº§å“ä»£ç ã€‚
TDDè™½æ˜¯æ•æ·æ–¹æ³•çš„æ ¸å¿ƒå®è·µï¼Œä½†ä¸åªé€‚ç”¨äºXPï¼ˆExtreme Programmingï¼‰ï¼ŒåŒæ ·å¯ä»¥é€‚ç”¨äºå…¶ä»–å¼€å‘æ–¹æ³•å’Œè¿‡ç¨‹ã€‚
</code></pre>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ <code>æµ‹è¯•é©±åŠ¨å¼€å‘</code>ï¼Œåœ¨åŠ¨æ‰‹å¼€å‘ä¹‹å‰å…ˆå†™å¥½æµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åå†è¿›è¡Œå¼€å‘ã€‚<br><br>
åœ¨æ¥ä¸‹æ¥çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œ<code>TDD</code> çš„æ€æƒ³å°†è´¯ç©¿å§‹ç»ˆã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥vue3çš„æºç å­¦ä¹ å§~</p>
<blockquote>
<p><strong>å£°æ˜ï¼š</strong><br><br>
ç¬”è®°ä¸­çš„å†…å®¹æ¥æºäº <strong>å´”å¤§(wx: cuixr1314)</strong> çš„ <a href="https://github.com/cuixiaorui/mini-vue">mini-vue</a> æ•™å­¦ï¼Œç›®å‰å·²ç» <code>4k+</code>çš„â­ï¸äº†ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒstar~<br><br>
çƒ­çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ä»¬ï¼Œå¯ä»¥æœç´¢ <code>å‚¬å­¦ç¤¾</code> å¾®ä¿¡ç¾¤ï¼Œé‡Œé¢éƒ½æ˜¯ä¸€ç¾¤çƒ­çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ï¼Œå­¦ä¹ æ°›å›´ä¸€çº§æ£’ï¼æœŸå¾…ä½ çš„åŠ å…¥~<br><br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fab46bb312db444c8352d44cbe9f4c70~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p>
</blockquote>
<h2 id="æ­£æ–‡å¼€å§‹">æ­£æ–‡å¼€å§‹</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸è®ºæ˜¯åœ¨ <code>vue2</code> ä¸­ï¼Œè¿˜æ˜¯åœ¨ <code>vue3</code> ä¸­ï¼Œ <code>å“åº”å¼æ•°æ®</code> ä¸€ç›´éƒ½æ˜¯vueçš„æ ¸å¿ƒæ¦‚å¿µã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬ä¹Ÿå…ˆä» <code>å“åº”å¼æ•°æ®</code> å¼€å§‹è¯´èµ·ã€‚</p>
<h3 id="vue2-ä¸-vue3-ä¸­å¯¹å“åº”å¼æ•°æ®å¤„ç†çš„åŒºåˆ«">vue2 ä¸ vue3 ä¸­å¯¹å“åº”å¼æ•°æ®å¤„ç†çš„åŒºåˆ«</h3>
<p>ç†Ÿæ‚‰ <code>vue2</code> çš„å°ä¼™ä¼´å„¿ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ <code>vue2</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯é€šè¿‡ <code>Object.defineProperty</code> æ¥å®ç°çš„ã€‚é’ˆå¯¹å¯¹è±¡ï¼Œé€šè¿‡éå†å¯¹è±¡çš„å±æ€§ï¼Œæ¥è®¾ç½®å±æ€§å¯¹åº”çš„ <code>getter</code> ä»¥åŠ <code>setter</code> æ–¹æ³•ï¼Œä»¥è¾¾åˆ° <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>è§¦å‘ä¾èµ–</code> çš„ç›®çš„ï¼›<br>
è€Œé’ˆå¯¹æ•°ç»„ï¼Œåˆ™æ˜¯é€šè¿‡é‡å†™æ•°ç»„ä¸€ç³»åˆ—æ›´æ–°å…ƒç´ çš„æ–¹æ³•æ¥å®ç°å¯¹æ•°ç»„å…ƒç´ ä¿®æ”¹çš„åŠ«æŒã€‚<br><br>
ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°æ•°æ®å“åº”å¼ï¼Œå­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<pre><code>1. å¯¹è±¡ç›´æ¥æ–°æ·»åŠ æ–°çš„å±æ€§ï¼Œæˆ–è€…åˆ é™¤å·²æœ‰çš„å±æ€§, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼›
2. ç›´æ¥é€šè¿‡æ›¿æ¢æ•°ç»„å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ ï¼Œæˆ–è€…æ›´æ–°æ•°ç»„çš„length, ç•Œé¢ä¹Ÿä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼›
3. å¦‚æœå¯¹è±¡çš„å±æ€§è¾ƒå¤šï¼Œä¸”åµŒå¥—å±‚æ¬¡è¾ƒæ·±æ—¶ï¼Œéœ€è¦æ·±åº¦éå†ï¼Œå¾ªç¯é‡å¤§ï¼Œæ€§èƒ½æŸè€—è¾ƒå¤§ã€‚
</code></pre>
<p>é’ˆå¯¹ä»¥ä¸Šå‡ ä¸ªé—®é¢˜ï¼Œ<code>vue3</code> ä¸­ä½¿ç”¨äº† <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy</a> æ¥ä»£æ›¿ <code>Object.defineProperty</code>ã€‚<br><br>
é’ˆå¯¹ <code>é—®é¢˜1</code> å’Œ <code>é—®é¢˜3</code>ï¼Œ<code>Proxy</code> ä»£ç†äº†æ•´ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†å¤šè¾¾13ç§å¯¹å¯¹è±¡å±æ€§çš„æ“ä½œï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ï¼Œåœ¨å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>Proxy</code> éƒ½å¯ä»¥è¿›è¡Œæ•è·ï¼Œä¸ <code>Object.defineProperty</code> ä¸åŒï¼Œæ— éœ€éå†æ‰€æœ‰å±æ€§ï¼›<br><br>
é’ˆå¯¹ <code>é—®é¢˜2</code>ï¼Œ<code>Proxy</code> å¯¹æ•°ç»„çš„ç›‘å¬ç›¸è¾ƒäº <code>Object.defineProperty</code> æ€§èƒ½æ›´ä¼˜ã€‚å…·ä½“å¤§å®¶å¯ä»¥å‚è€ƒ <a href="https://cloud.tencent.com/developer/news/485729">è¿™ç¯‡æ–‡ç« </a> ã€‚<br></p>
<p>é‚£åœ¨ <code>vue3</code> ä¸­å…·ä½“æ˜¯å¦‚ä½•é€šè¿‡ <code>Proxy</code> çš„æ–¹å¼å®ç°å“åº”å¼çš„å‘¢ï¼Ÿ</p>
<h3 id="reactivity-ç¬¬ä¸€æ­¥reactive"><code>reactivity</code> ç¬¬ä¸€æ­¥ï¼šreactive</h3>
<blockquote>
<p><strong>æ³¨ï¼š</strong> <br><br>
æœ¬æ–‡ä»¥ vue3 ä¸­çš„ <code>reactive</code> ä¸ºä¾‹ï¼Œå¦‚æœå¯¹ <code>reactive</code> æ“ä½œå°šä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹ä¸‹ <a href="https://v3.cn.vuejs.org/api/basic-reactivity.html">è¿™ç¯‡æ–‡æ¡£</a>ã€‚è‡³äº <code>ref</code>ï¼Œå…¶åº•å±‚ä¹Ÿæ˜¯ <code>reactive</code>, å…³äº <code>ref</code> çš„å†…å®¹ï¼Œåœ¨å®Œæˆ <code>reactive</code> æ‰€æœ‰ç›¸å…³åŠŸèƒ½çš„æ¢³ç†åï¼Œåç»­çš„æ–‡ç« ä¸­ä¼šåšè¡¥å……ï¼Œè¿™é‡Œå…ˆåŸ‹ä¸ªä¼ç¬”~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
</blockquote>
<p>è¿˜è®°å¾—å¼€ç¯‡æ—¶æåˆ°çš„ <code>TDD</code> ä¹ˆï¼Ÿå¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»æµ‹è¯•ç”¨ä¾‹å…¥æ‰‹ï¼š</p>
<pre><code class="language-ts">// src/reactivity/__tests__/reactive.spec.ts

import { reactive } from '../reactive'

describe('reactive', () =&gt; {
  it ('happy path', () =&gt; {
    const original = { foo: 1 }
    // åˆ›å»ºProxyä»£ç†å¯¹è±¡
    const observeOriginal = reactive(original)
    // å“åº”å¼å¯¹è±¡ä¸åŸå¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰ï¼Œå› ä¸ºobserveOriginalè¢«ProxyåŒ…è£¹
    expect(observeOriginal).not.toBe(original)
    // å–å€¼
    expect(observeOriginal.foo).toBe(1)
  })
})
</code></pre>
<p>æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œ <code>reactive</code> å°†ä¼ å…¥çš„å¯¹è±¡è½¬æ¢æˆ <code>Proxy</code> ä»£ç†å¯¹è±¡ï¼Œä¹‹åé€šè¿‡ä»£ç†å¯¹è±¡æ¥è·å–å…¶ä¸­çš„å€¼ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘ä»¬å°±ä» <code>reactive</code> å…¥æ‰‹ã€‚å…ˆæ¥çœ‹ä¸‹ <code>reactive</code> çš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/reactive.ts

import { mutableHandlers } from './baseHandlers'

export const reactiveMap = new WeakMap()

/**
 * åˆ›å»ºreactiveå¯¹è±¡
 * @param target
 */
export function reactive (target) {
  return createReactiveObject(target, reactiveMap, mutableHandlers)
}

/**
 * åˆ›å»ºå“åº”å¼å¯¹è±¡
 * @param target
 * @param proxyMap
 * @param baseHandlers
 */
export function createReactiveObject (target, proxyMap, baseHandlers) {
  // åˆ¤æ–­proxyæ˜¯å¦å·²ç»ä¿å­˜è¿‡
  if (proxyMap.has(target)) {
    // å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›
    return proxyMap.get(target)
  }

  const proxy = new Proxy(target, baseHandlers)

  // å­˜å‚¨åˆ›å»ºå¥½çš„proxy
  proxyMap.set(target, proxy)
  return proxy
}
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ<code>reactive</code> ä¸­è°ƒç”¨äº† <code>createReactiveObject</code> æ–¹æ³•ï¼Œæ—¢ç„¶ <code>reactive</code> æ–¹æ³•æ˜¯ç”¨æ¥è¿”å› <code>Proxy</code> å¯¹è±¡çš„ï¼Œé‚£åœ¨ <code>createReactiveObject</code> ä¸­åˆå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ï¼š</p>
<ol>
<li><code>createReactiveObject</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šéœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ <code>target</code>, ä¹Ÿå°±æ˜¯åœ¨ <code>reactive</code> æ¥æ”¶çš„ <code>target</code> å‚æ•°ã€ç”¨äºå­˜å‚¨ <code>Proxy</code> å¯¹è±¡çš„ <code>proxyMap</code> ä»¥åŠ <code>Proxy</code> å¯¹è±¡çš„å¤„ç†å™¨ <code>baseHandlers</code>;</li>
<li>å…ˆåˆ¤æ–­åœ¨ <code>proxyMap</code> æ˜¯å¦å·²ç»å­˜åœ¨å½“å‰å¯¹è±¡æ‰€å¯¹åº”çš„ <code>Proxy</code> å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›, å¦åˆ™æ–°å»ºä¸€ä¸ª <code>Proxy</code> å¯¹è±¡ï¼Œå¹¶ä»¥å½“å‰çš„ <code>target</code> ä¸ºkeyï¼Œå­˜å‚¨åˆ° <code>proxyMap</code>ï¼Œä»¥ä¾¿ä¸‹æ¬¡å–ç”¨ï¼Œå¹¶å°†æ–°å»ºçš„ <code>Proxy</code> è¿”å›ã€‚</li>
</ol>
<p>è¯¶ï¼Œå†™åˆ°è¿™é‡Œï¼Œç»†å¿ƒçš„å°ä¼™ä¼´å„¿ä»¬å°±ä¼šé—®äº†ï¼Œé‚£ <code>baseHandlers</code> è¿™ä¸ªå¤„ç†å™¨å…·ä½“åˆå¹²äº†å•¥å˜ï¼Ÿåˆ«æ€¥åˆ«æ€¥ï¼Œæˆ‘ä»¬ç°åœ¨å°±ä¸€èµ·æ¥çœ‹ä¸€çœ‹ã€‚</p>
<p>è¿™é‡Œçš„ <code>baseHandlers</code> å®é™…ä¸Šæ˜¯ä» <code>reactive</code> ä¸­ä¼ è¿‡æ¥çš„ <code>mutableHandlers</code>, æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸‹å®ƒçš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/baseHandlers.ts

const get = createGetter()
const set = createSetter()

export const mutableHandlers = {
  get,
  set
}

export function createGetter () {
  return function (target, key, receiver) {
    const res =  Reflect.get(target, key, receiver)
    return res
  }
}

export function createSetter () {
  return function (target, key, value, receiver) {
    const res = Reflect.set(target, key, value, receiver)
    return res
  }
}
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç ä¸­ä¸éš¾çœ‹å‡ºï¼Œå®é™…ä¸Š <code>mutableHandlers</code> å°±æ˜¯å®šä¹‰äº† <code>Proxy</code> å¯¹è±¡çš„ <code>get</code> å’Œ <code>set</code> æ–¹æ³•ã€‚</p>
<p>å›åˆ°æµ‹è¯•ç”¨ä¾‹ä¸­çš„ <code>expect(observeOriginal.foo).toBe(1)</code> è¿™ä¸ªæ­¥éª¤ï¼Œåœ¨è·å–ä»£ç†å¯¹è±¡çš„fooå±æ€§æ—¶ï¼Œä¾¿ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œä»è€Œè¿”å›å±æ€§å¯¹åº”çš„å€¼ã€‚åŒæ ·ï¼Œå½“è®¾ç½®ä»£ç†å¯¹è±¡çš„fooå±æ€§æ—¶ï¼Œä¾¿ä¼šè§¦å‘ <code>set</code> æ–¹æ³•ï¼Œå¯¹å±æ€§çš„å€¼åšå‡ºæ”¹å˜ã€‚</p>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ æµç¨‹å›¾ï¼Œæ¥æ‹ä¸€æ‹ <code>reactive</code> çš„æµç¨‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b014fadb17d641048dcd12f01695afaf~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼šå…³äº <code>Proxy</code> ä¸­ä¸ºå•¥è¦ç”¨åˆ° <code>Reflect</code>ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å‚è€ƒä¸‹ <code>å¼ é‘«æ—­</code> å¤§ä½¬çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.zhangxinxu.com/wordpress/2021/07/js-proxy-reflect/">Proxyæ˜¯ä»£ç†ï¼ŒReflectæ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ</a></p>
</blockquote>
<p><strong>ç»¼ä¸Šï¼š<code>reactive</code> é€šè¿‡ <code>createReactiveObject</code> æ–¹æ³•ï¼Œè¿”å› <code>target</code> æ‰€å¯¹åº”çš„ <code>proxy</code> å¯¹è±¡ï¼Œå¹¶å¯¹ <code>target</code> ä¸­å±æ€§çš„è¯»å–ä¸å†™å…¥æ“ä½œåšäº†æ‹¦æˆªå¤„ç†ã€‚</strong></p>
<h3 id="reactivity-ç¬¬äºŒæ­¥ä¾èµ–æ”¶é›†-è§¦å‘ä¾èµ–"><code>reactivity</code> ç¬¬äºŒæ­¥ï¼šä¾èµ–æ”¶é›† &amp;&amp; è§¦å‘ä¾èµ–</h3>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•é€šè¿‡ <code>Proxy</code> æ‹¦æˆªå¯¹è±¡çš„å±æ€§æ“ä½œ, æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹å¦‚ä½•å®ç° <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>ä¾èµ–è§¦å‘</code>ã€‚</p>
<p>è€è§„çŸ©ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆä»æµ‹è¯•ç”¨ä¾‹å…¥æ‰‹ï¼š</p>
<pre><code class="language-ts">// src/reactivity/__tests__/effect.spec.ts

import { reactive } from '../reactive'
import { effect } from  '../effect'

describe('effect', () =&gt; {
  it ('should observe basic properties', () =&gt; {
    let dummy = 0
    // è·å–proxyå¯¹è±¡
    const data = reactive({ num: 0 })
    // ï¼Ÿ
    effect(() =&gt; { dummy = data.num })
    expect(dummy).toBe(0)
    // æ”¹å˜å€¼
    data.num = 1
    expect(dummy).toBe(1)
  })
})
</code></pre>
<p>æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œåœ¨è°ƒç”¨äº† <code>reactive</code> æ–¹æ³•è·å–åˆ° <code>Proxy</code> å¯¹è±¡åï¼Œåˆè°ƒç”¨äº† <code>effect</code> æ–¹æ³•ã€‚é‚£è¿™ä¸ª <code>effect</code> æ–¹æ³•åˆæ˜¯å¹²å•¥çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ <code>effect</code> æ–¹æ³•çš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

/**
 * @param fn
 */
export function effect(fn) {
  const reactiveEffect = new ReactiveEffect(fn)
  reactiveEffect.run()
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>effect</code> æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”åœ¨å…¶å†…éƒ¨å®ä¾‹åŒ–äº†ä¸€ä¸ªåä¸º <code>ReactiveEffect</code> çš„ç±»ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„å‡½æ•°ä¼ å…¥è¿™ä¸ªç±»ä¸­ï¼Œç„¶åæ‰§è¡Œ <code>ReactiveEffect</code> ç±»ä¸Šæä¾›çš„ <code>run</code> æ–¹æ³•ã€‚é‚£è¿™ä¸ª <code>ReactiveEffect</code> ç±»åˆæ˜¯ä½•æ–¹ç¥åœ£å‘¢ï¼Ÿæ‰§è¡Œ <code>run</code> åˆåšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿ:</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

let activeEffect = void 0

export class ReactiveEffect {
  // å­˜æ”¾æ‰€æœ‰ä¾èµ–
  public deps: any = new Set()

  // åˆå§‹åŒ–ä¾èµ–åˆ—è¡¨
  constructor(fn) {
    if (fn) this.deps.add(fn)
  }

  // æ‰§è¡Œæ”¶é›†åˆ°çš„æ‰€æœ‰ä¾èµ–
  run () {
    activeEffect = this as any
    this.deps.forEach(dep =&gt; dep())
  }
}
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œ<code>ReactiveEffect</code> ç±»åœ¨è¢«å®ä¾‹åŒ–æ—¶ï¼Œå°†æ¥æ”¶åˆ°çš„å‡½æ•°å­˜å‚¨åˆ°è‡ªå·±çš„ <code>deps</code> å±æ€§ä¸­ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®ƒçš„ <code>run</code> æ–¹æ³•æ—¶ï¼Œåˆ™æ˜¯éå†è‡ªèº«çš„ <code>deps</code> å±æ€§ï¼Œæ‰§è¡Œå…¶ä¸­å­˜å‚¨çš„å‡½æ•°ã€‚</p>
<p>ç”±æ­¤å¯çŸ¥ï¼Œ<strong>å€ŸåŠ© <code>ReactiveEffect</code> ç±»æ‰€æä¾›çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•ä¿å­˜èµ·æ¥ï¼Œä¹Ÿå¯ä»¥è§¦å‘å·²ç»è¢«ä¿å­˜èµ·æ¥çš„æ–¹æ³•ã€‚</strong></p>
<blockquote>
<p><strong>æé—®ï¼š</strong> åœ¨è°ƒç”¨ <code>run</code> æ–¹æ³•æ—¶ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å°† <code>this</code> èµ‹å€¼ç»™å…¨å±€å˜é‡ <code>activeEffect</code> å‘¢ï¼Ÿ</p>
</blockquote>
<p>å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº† <code>æ”¶é›†æ–¹æ³•</code> ä»¥åŠ <code>è§¦å‘è¢«ä¿å­˜æ–¹æ³•</code> çš„èƒ½åŠ›ã€‚é‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½•å°†æ”¶é›†åˆ°çš„æ–¹æ³•ç»‘å®šåˆ°å¯¹åº”çš„å¯¹è±¡åŠå…¶å±æ€§ä¸Šå»å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹å…·ä½“çš„å®ç°ï¼š</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

const targetMap = new WeakMap()

/**
 * ä¾èµ–æ”¶é›†
 * @param target
 * @param type
 * @param key
 */
export function track(target, type, key) {
  // åˆ¤æ–­targetMapä¸­æ˜¯å¦ä¿å­˜æœ‰targetå¯¹è±¡å¯¹åº”çš„map
  let depsMap = targetMap.get(target)
  
  // å¦‚æœæ²¡æœ‰ï¼Œåˆ™ç»™è¯¥å¯¹è±¡æ–°å»ºä¸€ä¸ªç©ºçš„mapï¼Œå¹¶ç»‘å®šåˆ°targetMapä¸­
  if (!depsMap) {
    depsMap = new Map()
    targetMap.set(target, depsMap)
  }
  
  // å–å‡ºtargetå¯¹åº”çš„mapä¸­ï¼Œtargetå±æ€§keyæ‰€å¯¹åº”çš„ä¾èµ–
  let dep = depsMap.get(key)
  
  // å¦‚æœä¾èµ–ä¸å­˜åœ¨ï¼Œåˆ™ç»™å½“å‰çš„keyåˆ›å»ºä¸€ä¸ªç©ºçš„ä¾èµ–é›†åˆï¼Œå¹¶ä¿å­˜åˆ°targetå¯¹è±¡å¯¹åº”çš„mapä¸­
  if (!dep) {
    dep = new Set()
    depsMap.set(key, dep)
  }
  
  // æ·»åŠ ä¾èµ–
  dep.add(activeEffect)
}
</code></pre>
<p><code>track</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œéœ€è¦è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„å¯¹è±¡ <code>target</code> ã€æ”¶é›†ç±»å‹ <code>type</code> ä»¥åŠç»‘å®šä¾èµ–çš„ <code>key</code>ã€‚å…·ä½“æµç¨‹å¦‚æ³¨é‡Šã€‚</p>
<p><strong>æ³¨æ„æœ€åä¸€æ­¥ä¸­çš„ <code>æ·»åŠ ä¾èµ–</code> æ“ä½œã€‚</strong> åœ¨è¿™ä¸€æ­¥éª¤ä¸­ï¼Œå°†å…ˆå‰ä¿å­˜æœ‰ <code>ReactiveEffect</code> ç±»çš„ <code>this</code> çš„å…¨å±€å˜é‡æ·»åŠ åˆ°äº† <code>target</code> å¯¹åº”å±æ€§çš„ä¾èµ–ä¸­ã€‚</p>
<blockquote>
<p><strong>è§£ç­”ï¼š</strong> å›åˆ°åˆšæ‰çš„æé—®ï¼Œä¹‹æ‰€ä»¥è¦å°† <code>ReactiveEffect</code> çš„ <code>this</code> èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œå°±æ˜¯åœ¨è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„æ—¶å€™å¯ä»¥å°†å…¶æ·»åŠ åˆ°å¯¹åº”å±æ€§çš„ä¾èµ–ä¸­å»ã€‚æ‰€ä»¥ <code>æ”¶é›†ä¾èµ–</code> å…¶å®å°±æ˜¯æ”¶é›†çš„ <code>ReactiveEffect</code> çš„å®ä¾‹ã€‚</p>
</blockquote>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æˆåŠŸæ”¶é›†åˆ°ä¾èµ–äº†ï¼Œé‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½• <code>è§¦å‘ä¾èµ–</code> å‘¢ï¼Ÿ</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

/**
 * è§¦å‘ä¾èµ–
 * @param target
 * @param key
 */
export function trigger(target, key) {
  const depsMap = targetMap.get(target)
  const dep = depsMap.get(key)

  // éå†æ‰§è¡Œä¾èµ–
  for(const effect of dep) {
    effect.run()
  }
}
</code></pre>
<p>å…¶å®ä¾èµ–çš„è§¦å‘å¾ˆç®€å•ï¼Œåªéœ€è¦å°† <code>key</code> ä¸­ä¿å­˜çš„ <code>ReactiveEffect</code> å®ä¾‹éƒ½å–å‡ºæ¥ï¼Œç„¶åæ‰§è¡Œå®ƒä»¬çš„ <code>run</code> æ–¹æ³•å³å¯ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¾èµ–çš„æ”¶é›†ä¸è§¦å‘åŠŸèƒ½ï¼Œé‚£æˆ‘ä»¬åˆè¯¥åœ¨ä½•æ—¶ <code>æ”¶é›†</code>ï¼Œåˆåœ¨ä½•æ—¶ <code>è§¦å‘</code> å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>åœ¨ä½¿ç”¨æ—¶ <code>æ”¶é›†</code>ï¼Œåœ¨æ”¹å˜æ—¶ <code>è§¦å‘</code>ã€‚</strong></p>
<p>å›åˆ°åˆšæ‰çš„æµ‹è¯•ç”¨ä¾‹ä¸­çš„ <code>effect(() =&gt; { dummy = data.num })</code> è¿™ä¸€æ­¥ï¼Œåœ¨è°ƒç”¨äº† <code>effect</code> æ–¹æ³•åï¼Œä¼šé€šè¿‡ <code>ReactiveEffect</code> ç±»ä¸Šæä¾›çš„ <code>run</code> æ–¹æ³•æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå‡½æ•°ä¸­è¯»å–äº†ä»£ç†å¯¹è±¡ä¸Šçš„ <code>num</code> å±æ€§ï¼Œå› æ­¤ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œåœ¨ <code>get</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„æ“ä½œï¼›ä¹‹åé€šè¿‡ <code>data.num = 1</code> è¿™ä¸€æ­¥éª¤ï¼Œè®¾ç½® <code>num</code> å±æ€§çš„å€¼ï¼Œç»§è€Œä¼šè§¦å‘ <code>set</code> æ–¹æ³•ï¼Œåœ¨ <code>set</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ <code>ä¾èµ–è§¦å‘</code> çš„æ“ä½œã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>get</code> ä¸­åŠ å…¥ <code>track</code> æ–¹æ³•ï¼Œåœ¨ <code>set</code> ä¸­åŠ å…¥ <code>trigger</code> æ–¹æ³•å³å¯ï¼š</p>
<pre><code class="language-ts">// src/reactivity/baseHandlers.ts

// ...çœç•¥éƒ¨åˆ†ä»£ç 

export function createGetter () {
  return function (target, key, receiver) {
    const res =  Reflect.get(target, key, receiver)

    // è§¦å‘ä¾èµ–æ”¶é›†
    track(target, 'get', key)

    return res
  }
}

export function createSetter () {
  return function (target, key, value, receiver) {
    const res = Reflect.set(target, key, value, receiver)
    trigger(target, key)
    return res
  }
}
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°† <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>ä¾èµ–è§¦å‘</code> çš„æµç¨‹è¡¥å……åˆ°å…ˆå‰çš„æµç¨‹å›¾ä¸­å»ï¼Œæ¥å®Œæˆçš„çœ‹ä¸‹å“åº”å¼çš„æµç¨‹å§ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c23ce7a3145b4e3f8580958b8a82297a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºæœ¬çš„å“åº”å¼æ“ä½œï¼Œä¹Ÿæ‹æ¸…äº†å…¶ä¸­çš„åŸºæœ¬åŸç†ã€‚å¦‚æœæœ‰æè¿°ä¸å½“ä¹‹å¤„ï¼Œè¿˜è¯·å„ä½å¤§ä½¬å¸®å¿™æŒ‡æ­£~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨Gridea + Valineæ­å»ºå±äºè‡ªå·±çš„åšå®¢]]></title>
        <id>https://luhaifeng666.github.io/post/shi-yong-gridea-vline-da-jian-shu-yu-zi-ji-de-bo-ke/</id>
        <link href="https://luhaifeng666.github.io/post/shi-yong-gridea-vline-da-jian-shu-yu-zi-ji-de-bo-ke/">
        </link>
        <updated>2021-12-24T17:15:10.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¹‹å‰æ­å»ºåšå®¢éƒ½æ˜¯é€šè¿‡ <code>vuepress</code> + <code>Github Pages</code> çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸ªå¯è§†åŒ–å¯ç¼–è¾‘çš„åšå®¢ç•Œé¢ï¼Œå¯ä»¥åšè®¸å¤šä¸ªæ€§åŒ–çš„å®šåˆ¶ï¼Œå²‚ä¸ä¸æ˜¯ç¾æ»‹æ»‹~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¹‹å‰æ­å»ºåšå®¢éƒ½æ˜¯é€šè¿‡ <code>vuepress</code> + <code>Github Pages</code> çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸ªå¯è§†åŒ–å¯ç¼–è¾‘çš„åšå®¢ç•Œé¢ï¼Œå¯ä»¥åšè®¸å¤šä¸ªæ€§åŒ–çš„å®šåˆ¶ï¼Œå²‚ä¸ä¸æ˜¯ç¾æ»‹æ»‹~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
<!-- more -->
<h1 id="é€šè¿‡grideaå¿«é€Ÿæ­å»ºåšå®¢">é€šè¿‡Grideaå¿«é€Ÿæ­å»ºåšå®¢</h1>
<pre><code>Gridea æ˜¯ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ï¼Œå¸®åŠ©ä½ æ›´å®¹æ˜“åœ°æ„å»ºå¹¶ç®¡ç†åšå®¢æˆ–ä»»ä½•é™æ€ç«™ç‚¹ã€‚
</code></pre>
<p>ä»¥ä¸Šæ˜¯ <a href="https://gridea.dev/">Gridea</a> å®˜æ–¹å¯¹è¿™æ¬¾åšå®¢å®¢æˆ·ç«¯çš„æè¿°ã€‚å®ƒåˆ°åº•æœ‰å¤šå®¹æ˜“å‘¢ï¼Ÿé‚£æˆ‘ä»¬å°±è‡ªå·±åŠ¨æ‰‹æ¥è¯•ä¸‹å§~</p>
<h2 id="ç®€å•ä¸¤æ­¥å®Œæˆåšå®¢æ­å»º">ç®€å•ä¸¤æ­¥ï¼Œå®Œæˆåšå®¢æ­å»º</h2>
<h3 id="ç¬¬ä¸€æ­¥ä¸‹è½½grideaå®¢æˆ·ç«¯">ç¬¬ä¸€æ­¥ï¼šä¸‹è½½Grideaå®¢æˆ·ç«¯</h3>
<p><code>Gridea</code> å®¢æˆ·ç«¯æ˜¯ä½¿ç”¨ <code>Electron</code> å¼€å‘çš„ï¼Œä½¿ç”¨å®ƒä¹‹å‰ï¼Œéœ€è¦å…ˆå» <a href="https://gridea.dev/#started">å®˜ç½‘ä¸‹è½½</a>ã€‚å®˜æ–¹æä¾›äº† <code>MacOS</code>, <code>Windows</code> ä»¥åŠ <code>Linux</code> ä¸‰ç«¯çš„å®‰è£…åŒ…ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªè¡Œä¸‹è½½~<br>
<img src="https://luhaifeng666.github.io/post-images/1640367698849.jpg" alt="" loading="lazy"></p>
<h3 id="ç¬¬äºŒæ­¥å‘å¸ƒ">ç¬¬äºŒæ­¥ï¼šå‘å¸ƒ</h3>
<p>æ˜¯çš„ï¼ä½ æ²¡æœ‰å¬é”™ï¼ä¸‹è½½å®Œæˆåç›´æ¥å°±å¯ä»¥è¿›å…¥å‘å¸ƒæµç¨‹äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¿«ï¼<br>
<code>Gridea</code> æä¾›äº†å°†åšå®¢éƒ¨ç½²åˆ° <code>GitHub Pages</code>ã€<code>Coding Pages</code> å’Œé€šè¿‡ <code>SFTP</code> çš„æ–¹å¼ä¸Šä¼ åˆ°è‡ªå·±çš„æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚å®˜æ–¹æä¾›äº†éå¸¸è¯¦ç»†çš„Github Pageså‘å¸ƒæµç¨‹ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ï¼Œ<a href="https://gridea.dev/gridea-start/">è¯·æˆ³è¿›æ¥çœ‹å§~</a></p>
<h2 id="ä¸€äº›å¯èƒ½éœ€è¦æ³¨æ„çš„ç‚¹">ä¸€äº›å¯èƒ½éœ€è¦æ³¨æ„çš„ç‚¹</h2>
<p>ç»è¿‡ä¸Šé¢ä¸¤æ­¥çš„æ“ä½œï¼Œç›¸ä¿¡å„ä¸ªå°ä¼™ä¼´å·²ç»æ‹¥æœ‰äº†å±äºè‡ªå·±çš„åšå®¢~å¯å–œå¯è´ºï¼åœ¨è¿™é‡Œï¼Œæˆ‘åˆ—ä¸¾å‡ ä¸ªæˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œå¸Œæœ›å¯ä»¥æä¾›ç»™é‡åˆ°ç›¸åŒé—®é¢˜çš„å°ä¼™ä¼´ä¸€äº›å¸®åŠ©ï¼š</p>
<h4 id="é—®é¢˜1å…³äºåŒæ­¥">é—®é¢˜1ï¼šå…³äºåŒæ­¥</h4>
<ul>
<li>ç”±äºåŒæ­¥æ˜¯å°†ä½ çš„æ”¹åŠ¨åŒæ­¥åˆ° <code>GitHub Pages</code> ä¸Šçš„ï¼Œç”±äºç°é˜¶æ®µå›½å†…è®¿é—®Githubä¼šæœ‰é•¿æ—¶é—´æ‰“ä¸å¼€é¡µé¢ï¼Œéœ€è¦ç¿»å¢™çš„æƒ…å†µï¼Œå»ºè®®å°ä¼™ä¼´ä»¬åœ¨é•¿æ—¶é—´æ— æ³•åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå°è¯•ä¸‹ç¿»å¢™åŒæ­¥ï¼Œå¯èƒ½ä¼šç¨å¥½ä¸€äº›ï¼›</li>
<li>æˆ‘å½“å‰ä½¿ç”¨çš„ <code>Gridea</code> çš„ç‰ˆæœ¬æ˜¯ <code>0.9.2</code>ï¼Œå­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æ£€æµ‹è¿œç¨‹è¿æ¥æ—¶ï¼Œæç¤ºæˆ‘è¿æ¥æˆåŠŸï¼Œä½†æ˜¯åŒæ­¥å´ä¸€ç›´éƒ½å¤±è´¥ï¼Œæ— è®ºæ˜¯å¦å¼€å¯ç¿»å¢™ï¼Œå‡æ˜¯å¦‚æ­¤ã€‚å®˜æ–¹åœ¨ <a href="https://github.com/getgridea/gridea/issues/890">#890</a> è¿™ä¸ªissueä¸­æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¹¶ç»™å‡ºäº†ä¿®å¤åçš„åŒ…çš„ä¸‹è½½åœ°å€ï¼Œæˆ‘ä¸‹è½½åä½¿ç”¨å¹¶ä¸ç†æƒ³ï¼ˆä¸æ’é™¤æ˜¯æˆ‘æœ¬åœ°ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼‰ï¼Œä½†ä¾æ—§å¯ä»¥ä½œä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆæä¾›ç»™å°ä¼™ä¼´ä»¬å°è¯•ä¸‹~</li>
</ul>
<h4 id="é—®é¢˜2å…³äºä¸»é¢˜">é—®é¢˜2ï¼šå…³äºä¸»é¢˜</h4>
<p>ç›®å‰æˆ‘ä½¿ç”¨çš„æ˜¯ <code>Simple</code> ä¸»é¢˜ï¼Œå„æ–¹é¢ä½¿ç”¨æƒ…å†µéƒ½è¿˜ä¸é”™ï¼Œæ¨èå¤§å®¶ä½¿ç”¨è¿™æ¬¾ã€‚<br>
å½“ç„¶ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†å…¶ä»–çš„ <a href="https://gridea.dev/themes">å¤šæ¬¾ä¸»é¢˜</a> ä¾›å°ä¼™ä¼´ä»¬é£Ÿç”¨ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è‡ªè¡Œé€‰æ‹©ã€‚<br>
å¦‚æœæœ‰ç²¾åŠ›æœ‰å…´è¶£çš„å°ä¼™ä¼´å„¿ä»¬ä¹Ÿå¯ä»¥å°è¯•è‡ªå·± <a href="https://gridea.dev/theme/">å¼€å‘ä¸€ä¸ªä¸»é¢˜</a> ï¼Œæ¯•ç«Ÿè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿå˜›~<br>
è‡³äºæˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œæ˜¯åœ¨æˆ‘ä½¿ç”¨ <code>Notes</code> è¿™ä¸ªä¸»é¢˜çš„æ—¶å€™ï¼Œå‘ç°åœ¨ç¼–è¾‘å®Œæ–‡ç« åï¼Œmarkdownä¸­çš„ä»£ç åŒºå—å†…å®¹åœ¨é¢„è§ˆæ—¶è¡¨ç°æ­£å¸¸ï¼Œä½†æ˜¯åœ¨åŒæ­¥åˆ° <code>GitHub Pages</code> ä¹‹åï¼Œæ‰“å¼€é¡µé¢å‘ç°markdownä¸­çš„ä»£ç åŒºå—æ²¡æœ‰æ­£å¸¸æ¸²æŸ“å‡ºæ¥ï¼Œå¤§å®¶åœ¨é£Ÿç”¨çš„æ—¶å€™éœ€è¦ç•™æ„ä¸‹~</p>
<h1 id="æ·»åŠ vlineè¯„è®º">æ·»åŠ Vlineè¯„è®º</h1>
<p>ç°åœ¨å·²ç»æœ‰äº†è‡ªå·±çš„åšå®¢äº†ï¼Œä¹Ÿæœ‰ä¸ªåœ°æ–¹å¯ä»¥è®°å½•è‡ªå·±çš„å·¥ä½œï¼Œå­¦ä¹ ï¼Œç”Ÿæ´»äº†ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½å°‘äº†è®© <code>çœ‹å®˜ä»¬</code> ç•™ä¸‹è‡ªå·±è¶³è¿¹çš„åœ°æ–¹~<br>
æˆ‘ä½¿ç”¨çš„ <code>Simple</code> ä¸»é¢˜é»˜è®¤æä¾›äº†ä¸¤ç§å‘å¸ƒè¯„è®ºçš„å¹³å°ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640368636573.jpg" alt="" loading="lazy"><br>
è¿™é‡Œæˆ‘æ¨èä½¿ç”¨ <a href="https://valine.js.org/">Valine</a>ï¼Œæƒ³å¯¹äºä¸Šè¿°çš„ä¸¤ä¸ªè€Œè¨€ï¼Œå®ƒæ›´åŠ å‹å¥½ã€‚è‡³äºæ¥å…¥æ–¹å¼ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº†ç›¸åº”çš„ <a href="https://kveln.cn/post/qE678A4ce/">å‚è€ƒæ–‡æ¡£</a>ã€‚è¿™é‡Œæˆ‘é’ˆå¯¹å®˜æ–¹çš„æ–‡æ¡£åšä¸€äº›è¡¥å……è¯´æ˜ä»¥åŠè¸©å‘çš„ç»éªŒåˆ†äº«ã€‚</p>
<h2 id="å…³äºæ–‡æ¡£ä¸­çš„è¯´æ˜">å…³äºæ–‡æ¡£ä¸­çš„è¯´æ˜</h2>
<p>åœ¨å®˜æ–¹æä¾›çš„æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€å¤„è¯´æ˜ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369031378.png" alt="" loading="lazy"><br>
å…¶ä¸­ï¼Œ<code>Valine.min.js</code> çš„å¼•å…¥éœ€è¦æ”¾åœ¨å¯¹åº”ä¸»é¢˜çš„ <code>post.ejs</code> æ¨¡æ¿ä¸‹ã€‚</p>
<h2 id="å…³äºleancloudçš„é…ç½®">å…³äºLeanCloudçš„é…ç½®</h2>
<h3 id="åˆ›å»ºclass">åˆ›å»ºClass</h3>
<p>è¯„è®ºä¼šè°ƒç”¨ <code>LeanCloud</code> æä¾›çš„æ•°æ®æ¥å£ï¼Œå…¶ä¸­æœ‰ä¸ªæ¥å£æ˜¯è·å–è¯„è®ºæ€»æ•°çš„ï¼š<code>https://xxxx/1.1/classes/Comment</code>ã€‚è°ƒç”¨è¿™ä¸ªæ¥å£çš„å‰æï¼Œæ˜¯éœ€è¦åœ¨ <code>æ•°æ®å­˜å‚¨ &gt; ç»“æ„åŒ–æ•°æ®</code> ä¸‹æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªåä¸º <code>Comment</code> çš„classï¼Œå¦åˆ™æ¥å£ä¼šæŠ¥404ï¼Œè¿™ä¸ªéœ€è¦æ³¨æ„ä¸‹ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369813288.png" alt="" loading="lazy"></p>
<h3 id="åˆ›å»ºåº”ç”¨">åˆ›å»ºåº”ç”¨</h3>
<p>åˆ›å»ºåº”ç”¨æ—¶ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºåŒºåŸŸ:<br>
<img src="https://luhaifeng666.github.io/post-images/1640369444506.png" alt="" loading="lazy"><br>
æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ <code>åä¸œ</code>ã€‚ä¹‹æ‰€ä»¥é€‰æ‹©åä¸œï¼Œæ˜¯å› ä¸ºåœ¨ååŒ—åˆ›å»ºå®Œåº”ç”¨åï¼Œåœ¨è°ƒç”¨æ¥å£æ—¶è°ƒä¸é€šï¼Œè¿™å¯èƒ½è·Ÿæˆ‘æ‰€å¤„çš„åŒºåŸŸæœ‰å…³ã€‚æ‰€ä»¥å°ä¼™ä¼´ä»¬åœ¨åˆ›å»ºå®Œæˆä¹‹åï¼Œå¯ä»¥å» <code>è®¾ç½® &gt; åº”ç”¨å‡­è¯</code> ä¸­ï¼Œè®¿é—®ä¸‹æä¾›çš„ <code>REST API æœåŠ¡å™¨åœ°å€</code> ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¯ä»¥è°ƒé€šï¼Œå¯ä»¥çš„è¯å°±æ²¡æœ‰é—®é¢˜ã€‚å¦‚æœä¸è¡Œçš„è¯ï¼Œå»ºè®®åˆ‡æ¢ä¸‹åŒºåŸŸé‡æ–°åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369984692.png" alt="" loading="lazy"></p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>ä»¥ä¸Šæ˜¯æˆ‘åœ¨ä½¿ç”¨ <code>Gridea + Vline</code> æ­å»ºè‡ªå·±åšå®¢çš„æ—¶å€™æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œå¸Œæœ›å¯¹çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„å°ä¼™ä¼´æœ‰æ‰€å¸®åŠ©ã€‚<br>
å½“å‰åšå®¢å·²éƒ¨ç½²ï¼Œä»¥åä¼šé™†ç»­åˆ†äº«è‡ªå·±çš„å­¦ä¹ ç¬”è®°ä»¥åŠå¿ƒå¾—çç¢ç­‰ç­‰ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´æ¬¢è¿<a href="https://luhaifeng666.github.io/">æˆ³~</a>ã€‚<br>
ç°åœ¨å¿«åŠ¨èµ·æ‰‹æ¥ï¼Œå¿«é€Ÿæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„å¤©åœ°å§~</p>
]]></content>
    </entry>
</feed>