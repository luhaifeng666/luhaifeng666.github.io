<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://luhaifeng666.github.io</id>
    <title>é…±è±†è…ç²¾çš„å°ç«™</title>
    <updated>2022-01-12T03:14:25.211Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://luhaifeng666.github.io"/>
    <link rel="self" href="https://luhaifeng666.github.io/atom.xml"/>
    <subtitle>æˆ‘å¹ï¼Œä½ å¬</subtitle>
    <logo>https://luhaifeng666.github.io/images/avatar.png</logo>
    <icon>https://luhaifeng666.github.io/favicon.ico</icon>
    <rights>All rights reserved 2022, é…±è±†è…ç²¾çš„å°ç«™</rights>
    <entry>
        <title type="html"><![CDATA[åŠé€æ˜è¾¹æ¡†]]></title>
        <id>https://luhaifeng666.github.io/post/ban-tou-ming-bian-kuang/</id>
        <link href="https://luhaifeng666.github.io/post/ban-tou-ming-bian-kuang/">
        </link>
        <updated>2022-01-12T02:34:10.000Z</updated>
        <summary type="html"><![CDATA[<p>ã€ŠCSSç§˜å¯†èŠ±å›­ã€‹å­¦ä¹ ç¬”è®°ï¼šåŠé€æ˜è¾¹æ¡†ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ã€ŠCSSç§˜å¯†èŠ±å›­ã€‹å­¦ä¹ ç¬”è®°ï¼šåŠé€æ˜è¾¹æ¡†ã€‚</p>
<!-- more -->
<p>æˆ‘ä»¬åœ¨æƒ³å®ç°ä¸€ä¸ªé€æ˜è¾¹æ¡†çš„æ—¶å€™ï¼Œé€šå¸¸æƒ³åˆ°çš„å¯èƒ½æ˜¯ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-css">border: 3px solid rgba(255,255,255,0.6);
</code></pre>
<p>å¯æ˜¯å¦‚æœè¿™æ—¶å€™ç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªèƒŒæ™¯è‰²æˆ–è€…èƒŒæ™¯å›¾ç‰‡ï¼ŒèƒŒæ™¯å›¾ç‰‡ä¸èƒŒæ™¯è‰²ä¼šé€è¿‡é€æ˜è¾¹æ¡†æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ˜¯å› ä¸º<strong>åœ¨é»˜è®¤æƒ…å†µä¸‹,èƒŒæ™¯ä¼šå»¶ä¼¸åˆ°è¾¹æ¡†æ‰€åœ¨åŒºåŸŸçš„ä¸‹å±‚ã€‚</strong></p>
<p>ä¸¾ä¸ª<a href="https://codepen.io/luhaifeng666/pen/MWEzyag?editors=1111">æ —å­</a></p>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…ƒç´ çš„èƒŒæ™¯è‰²è¢«è®¾ç½®ä¸ºè“è‰²ï¼ŒèƒŒæ™¯è‰²è®¾ç½®ä¸º<code>rgba(255,255,255,.6)</code> ,æ­¤æ—¶ï¼Œé€è¿‡é€æ˜è¾¹æ¡†å¯ä»¥çœ‹åˆ°å…ƒç´ çš„èƒŒæ™¯è‰²ã€‚</p>
<h3 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h3>
<p>é€šè¿‡æ·»åŠ background-clipå¯ä»¥è§£å†³ã€‚</p>
<pre><code class="language-css">border: 3px solid rgba(255,255,255,0.6);
background-clip: padding-box;
</code></pre>
<blockquote>
<p>background-clipå±æ€§æ˜¯ç”¨æ¥è®¾ç½®èƒŒæ™¯è£å‰ªåŒºåŸŸçš„ï¼Œè¯¥å±æ€§æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šcontent-box | padding-box | border-box | textï¼Œè£å‰ªåŒºåŸŸå¦‚ä¸‹ï¼š</p>
<ol>
<li>content-box: contentéƒ¨åˆ†ï¼ŒèƒŒæ™¯è¢«è£å‰ªè‡³å†…å®¹åŒºï¼ˆcontent boxï¼‰å¤–æ²¿ã€‚</li>
<li>padding-box: content + paddingéƒ¨åˆ†ï¼ŒèƒŒæ™¯å»¶ä¼¸è‡³å†…è¾¹è·ï¼ˆpaddingï¼‰å¤–æ²¿ã€‚ä¸ä¼šç»˜åˆ¶åˆ°è¾¹æ¡†å¤„ã€‚</li>
<li>border-box: content + padding + borderéƒ¨åˆ†ï¼ŒèƒŒæ™¯å»¶ä¼¸è‡³è¾¹æ¡†å¤–æ²¿ï¼ˆä½†æ˜¯åœ¨è¾¹æ¡†ä¸‹å±‚ï¼‰ã€‚</li>
<li>text: è£å‰ªä¸ºtextå‰æ™¯è‰²</li>
</ol>
</blockquote>
<p>å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒMDNæ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-clip">background-clip</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mini-vueå­¦ä¹ ï¼šreactivity çš„æ ¸å¿ƒæµç¨‹]]></title>
        <id>https://luhaifeng666.github.io/post/mini-vue-xue-xi-reactivity-de-he-xin-liu-cheng/</id>
        <link href="https://luhaifeng666.github.io/post/mini-vue-xue-xi-reactivity-de-he-xin-liu-cheng/">
        </link>
        <updated>2021-12-29T12:38:48.000Z</updated>
        <summary type="html"><![CDATA[<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸‹ï¼Œåœ¨ <code>vue3</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸‹ï¼Œåœ¨ <code>vue3</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<!-- more -->
<h2 id="å†™åœ¨å¼€å§‹">å†™åœ¨å¼€å§‹</h2>
<p>åœ¨æ­£å¼å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¸€èµ·æ¥äº†è§£ä¸€ä¸ªæ€æƒ³ï¼š<code>TDD</code>ã€‚ä»€ä¹ˆæ˜¯ <code>TDD</code> å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒçš„æ¦‚å¿µï¼š</p>
<pre><code>TDDæ˜¯æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTest-Driven Developmentï¼‰çš„è‹±æ–‡ç®€ç§°ã€‚
å®ƒæ˜¯æ•æ·å¼€å‘ä¸­çš„ä¸€é¡¹æ ¸å¿ƒå®è·µå’ŒæŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•è®ºã€‚
TDDçš„åŸç†æ˜¯åœ¨å¼€å‘åŠŸèƒ½ä»£ç ä¹‹å‰ï¼Œå…ˆç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ä»£ç ï¼Œæµ‹è¯•ä»£ç ç¡®å®šéœ€è¦ç¼–å†™ä»€ä¹ˆäº§å“ä»£ç ã€‚
TDDè™½æ˜¯æ•æ·æ–¹æ³•çš„æ ¸å¿ƒå®è·µï¼Œä½†ä¸åªé€‚ç”¨äºXPï¼ˆExtreme Programmingï¼‰ï¼ŒåŒæ ·å¯ä»¥é€‚ç”¨äºå…¶ä»–å¼€å‘æ–¹æ³•å’Œè¿‡ç¨‹ã€‚
</code></pre>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ <code>æµ‹è¯•é©±åŠ¨å¼€å‘</code>ï¼Œåœ¨åŠ¨æ‰‹å¼€å‘ä¹‹å‰å…ˆå†™å¥½æµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åå†è¿›è¡Œå¼€å‘ã€‚<br><br>
åœ¨æ¥ä¸‹æ¥çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œ<code>TDD</code> çš„æ€æƒ³å°†è´¯ç©¿å§‹ç»ˆã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥vue3çš„æºç å­¦ä¹ å§~</p>
<blockquote>
<p><strong>å£°æ˜ï¼š</strong><br><br>
ç¬”è®°ä¸­çš„å†…å®¹æ¥æºäº <strong>å´”å¤§(wx: cuixr1314)</strong> çš„ <a href="https://github.com/cuixiaorui/mini-vue">mini-vue</a> æ•™å­¦ï¼Œç›®å‰å·²ç» <code>4k+</code>çš„â­ï¸äº†ï¼Œæ¬¢è¿å¤§å®¶è¸Šè·ƒstar~<br><br>
çƒ­çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ä»¬ï¼Œå¯ä»¥æœç´¢ <code>å‚¬å­¦ç¤¾</code> å¾®ä¿¡ç¾¤ï¼Œé‡Œé¢éƒ½æ˜¯ä¸€ç¾¤çƒ­çˆ±å­¦ä¹ çš„å°ä¼™ä¼´ï¼Œå­¦ä¹ æ°›å›´ä¸€çº§æ£’ï¼æœŸå¾…ä½ çš„åŠ å…¥~<br><br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fab46bb312db444c8352d44cbe9f4c70~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p>
</blockquote>
<h2 id="æ­£æ–‡å¼€å§‹">æ­£æ–‡å¼€å§‹</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸è®ºæ˜¯åœ¨ <code>vue2</code> ä¸­ï¼Œè¿˜æ˜¯åœ¨ <code>vue3</code> ä¸­ï¼Œ <code>å“åº”å¼æ•°æ®</code> ä¸€ç›´éƒ½æ˜¯vueçš„æ ¸å¿ƒæ¦‚å¿µã€‚è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬ä¹Ÿå…ˆä» <code>å“åº”å¼æ•°æ®</code> å¼€å§‹è¯´èµ·ã€‚</p>
<h3 id="vue2-ä¸-vue3-ä¸­å¯¹å“åº”å¼æ•°æ®å¤„ç†çš„åŒºåˆ«">vue2 ä¸ vue3 ä¸­å¯¹å“åº”å¼æ•°æ®å¤„ç†çš„åŒºåˆ«</h3>
<p>ç†Ÿæ‚‰ <code>vue2</code> çš„å°ä¼™ä¼´å„¿ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ <code>vue2</code> ä¸­ï¼Œæ•°æ®çš„å“åº”å¼æ˜¯é€šè¿‡ <code>Object.defineProperty</code> æ¥å®ç°çš„ã€‚é’ˆå¯¹å¯¹è±¡ï¼Œé€šè¿‡éå†å¯¹è±¡çš„å±æ€§ï¼Œæ¥è®¾ç½®å±æ€§å¯¹åº”çš„ <code>getter</code> ä»¥åŠ <code>setter</code> æ–¹æ³•ï¼Œä»¥è¾¾åˆ° <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>è§¦å‘ä¾èµ–</code> çš„ç›®çš„ï¼›<br>
è€Œé’ˆå¯¹æ•°ç»„ï¼Œåˆ™æ˜¯é€šè¿‡é‡å†™æ•°ç»„ä¸€ç³»åˆ—æ›´æ–°å…ƒç´ çš„æ–¹æ³•æ¥å®ç°å¯¹æ•°ç»„å…ƒç´ ä¿®æ”¹çš„åŠ«æŒã€‚<br><br>
ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥å®ç°æ•°æ®å“åº”å¼ï¼Œå­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<pre><code>1. å¯¹è±¡ç›´æ¥æ–°æ·»åŠ æ–°çš„å±æ€§ï¼Œæˆ–è€…åˆ é™¤å·²æœ‰çš„å±æ€§, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼›
2. ç›´æ¥é€šè¿‡æ›¿æ¢æ•°ç»„å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ ï¼Œæˆ–è€…æ›´æ–°æ•°ç»„çš„length, ç•Œé¢ä¹Ÿä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼›
3. å¦‚æœå¯¹è±¡çš„å±æ€§è¾ƒå¤šï¼Œä¸”åµŒå¥—å±‚æ¬¡è¾ƒæ·±æ—¶ï¼Œéœ€è¦æ·±åº¦éå†ï¼Œå¾ªç¯é‡å¤§ï¼Œæ€§èƒ½æŸè€—è¾ƒå¤§ã€‚
</code></pre>
<p>é’ˆå¯¹ä»¥ä¸Šå‡ ä¸ªé—®é¢˜ï¼Œ<code>vue3</code> ä¸­ä½¿ç”¨äº† <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy</a> æ¥ä»£æ›¿ <code>Object.defineProperty</code>ã€‚<br><br>
é’ˆå¯¹ <code>é—®é¢˜1</code> å’Œ <code>é—®é¢˜3</code>ï¼Œ<code>Proxy</code> ä»£ç†äº†æ•´ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†å¤šè¾¾13ç§å¯¹å¯¹è±¡å±æ€§çš„æ“ä½œï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ï¼Œåœ¨å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>Proxy</code> éƒ½å¯ä»¥è¿›è¡Œæ•è·ï¼Œä¸ <code>Object.defineProperty</code> ä¸åŒï¼Œæ— éœ€éå†æ‰€æœ‰å±æ€§ï¼›<br><br>
é’ˆå¯¹ <code>é—®é¢˜2</code>ï¼Œ<code>Proxy</code> å¯¹æ•°ç»„çš„ç›‘å¬ç›¸è¾ƒäº <code>Object.defineProperty</code> æ€§èƒ½æ›´ä¼˜ã€‚å…·ä½“å¤§å®¶å¯ä»¥å‚è€ƒ <a href="https://cloud.tencent.com/developer/news/485729">è¿™ç¯‡æ–‡ç« </a> ã€‚<br></p>
<p>é‚£åœ¨ <code>vue3</code> ä¸­å…·ä½“æ˜¯å¦‚ä½•é€šè¿‡ <code>Proxy</code> çš„æ–¹å¼å®ç°å“åº”å¼çš„å‘¢ï¼Ÿ</p>
<h3 id="reactivity-ç¬¬ä¸€æ­¥reactive"><code>reactivity</code> ç¬¬ä¸€æ­¥ï¼šreactive</h3>
<blockquote>
<p><strong>æ³¨ï¼š</strong> <br><br>
æœ¬æ–‡ä»¥ vue3 ä¸­çš„ <code>reactive</code> ä¸ºä¾‹ï¼Œå¦‚æœå¯¹ <code>reactive</code> æ“ä½œå°šä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹ä¸‹ <a href="https://v3.cn.vuejs.org/api/basic-reactivity.html">è¿™ç¯‡æ–‡æ¡£</a>ã€‚è‡³äº <code>ref</code>ï¼Œå…¶åº•å±‚ä¹Ÿæ˜¯ <code>reactive</code>, å…³äº <code>ref</code> çš„å†…å®¹ï¼Œåœ¨å®Œæˆ <code>reactive</code> æ‰€æœ‰ç›¸å…³åŠŸèƒ½çš„æ¢³ç†åï¼Œåç»­çš„æ–‡ç« ä¸­ä¼šåšè¡¥å……ï¼Œè¿™é‡Œå…ˆåŸ‹ä¸ªä¼ç¬”~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
</blockquote>
<p>è¿˜è®°å¾—å¼€ç¯‡æ—¶æåˆ°çš„ <code>TDD</code> ä¹ˆï¼Ÿå¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»æµ‹è¯•ç”¨ä¾‹å…¥æ‰‹ï¼š</p>
<pre><code class="language-ts">// src/reactivity/__tests__/reactive.spec.ts

import { reactive } from '../reactive'

describe('reactive', () =&gt; {
  it ('happy path', () =&gt; {
    const original = { foo: 1 }
    // åˆ›å»ºProxyä»£ç†å¯¹è±¡
    const observeOriginal = reactive(original)
    // å“åº”å¼å¯¹è±¡ä¸åŸå¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰ï¼Œå› ä¸ºobserveOriginalè¢«ProxyåŒ…è£¹
    expect(observeOriginal).not.toBe(original)
    // å–å€¼
    expect(observeOriginal.foo).toBe(1)
  })
})
</code></pre>
<p>æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œ <code>reactive</code> å°†ä¼ å…¥çš„å¯¹è±¡è½¬æ¢æˆ <code>Proxy</code> ä»£ç†å¯¹è±¡ï¼Œä¹‹åé€šè¿‡ä»£ç†å¯¹è±¡æ¥è·å–å…¶ä¸­çš„å€¼ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘ä»¬å°±ä» <code>reactive</code> å…¥æ‰‹ã€‚å…ˆæ¥çœ‹ä¸‹ <code>reactive</code> çš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/reactive.ts

import { mutableHandlers } from './baseHandlers'

export const reactiveMap = new WeakMap()

/**
 * åˆ›å»ºreactiveå¯¹è±¡
 * @param target
 */
export function reactive (target) {
  return createReactiveObject(target, reactiveMap, mutableHandlers)
}

/**
 * åˆ›å»ºå“åº”å¼å¯¹è±¡
 * @param target
 * @param proxyMap
 * @param baseHandlers
 */
export function createReactiveObject (target, proxyMap, baseHandlers) {
  // åˆ¤æ–­proxyæ˜¯å¦å·²ç»ä¿å­˜è¿‡
  if (proxyMap.has(target)) {
    // å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›
    return proxyMap.get(target)
  }

  const proxy = new Proxy(target, baseHandlers)

  // å­˜å‚¨åˆ›å»ºå¥½çš„proxy
  proxyMap.set(target, proxy)
  return proxy
}
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œ<code>reactive</code> ä¸­è°ƒç”¨äº† <code>createReactiveObject</code> æ–¹æ³•ï¼Œæ—¢ç„¶ <code>reactive</code> æ–¹æ³•æ˜¯ç”¨æ¥è¿”å› <code>Proxy</code> å¯¹è±¡çš„ï¼Œé‚£åœ¨ <code>createReactiveObject</code> ä¸­åˆå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ï¼š</p>
<ol>
<li><code>createReactiveObject</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šéœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ <code>target</code>, ä¹Ÿå°±æ˜¯åœ¨ <code>reactive</code> æ¥æ”¶çš„ <code>target</code> å‚æ•°ã€ç”¨äºå­˜å‚¨ <code>Proxy</code> å¯¹è±¡çš„ <code>proxyMap</code> ä»¥åŠ <code>Proxy</code> å¯¹è±¡çš„å¤„ç†å™¨ <code>baseHandlers</code>;</li>
<li>å…ˆåˆ¤æ–­åœ¨ <code>proxyMap</code> æ˜¯å¦å·²ç»å­˜åœ¨å½“å‰å¯¹è±¡æ‰€å¯¹åº”çš„ <code>Proxy</code> å¯¹è±¡ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›, å¦åˆ™æ–°å»ºä¸€ä¸ª <code>Proxy</code> å¯¹è±¡ï¼Œå¹¶ä»¥å½“å‰çš„ <code>target</code> ä¸ºkeyï¼Œå­˜å‚¨åˆ° <code>proxyMap</code>ï¼Œä»¥ä¾¿ä¸‹æ¬¡å–ç”¨ï¼Œå¹¶å°†æ–°å»ºçš„ <code>Proxy</code> è¿”å›ã€‚</li>
</ol>
<p>è¯¶ï¼Œå†™åˆ°è¿™é‡Œï¼Œç»†å¿ƒçš„å°ä¼™ä¼´å„¿ä»¬å°±ä¼šé—®äº†ï¼Œé‚£ <code>baseHandlers</code> è¿™ä¸ªå¤„ç†å™¨å…·ä½“åˆå¹²äº†å•¥å˜ï¼Ÿåˆ«æ€¥åˆ«æ€¥ï¼Œæˆ‘ä»¬ç°åœ¨å°±ä¸€èµ·æ¥çœ‹ä¸€çœ‹ã€‚</p>
<p>è¿™é‡Œçš„ <code>baseHandlers</code> å®é™…ä¸Šæ˜¯ä» <code>reactive</code> ä¸­ä¼ è¿‡æ¥çš„ <code>mutableHandlers</code>, æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸‹å®ƒçš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/baseHandlers.ts

const get = createGetter()
const set = createSetter()

export const mutableHandlers = {
  get,
  set
}

export function createGetter () {
  return function (target, key, receiver) {
    const res =  Reflect.get(target, key, receiver)
    return res
  }
}

export function createSetter () {
  return function (target, key, value, receiver) {
    const res = Reflect.set(target, key, value, receiver)
    return res
  }
}
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç ä¸­ä¸éš¾çœ‹å‡ºï¼Œå®é™…ä¸Š <code>mutableHandlers</code> å°±æ˜¯å®šä¹‰äº† <code>Proxy</code> å¯¹è±¡çš„ <code>get</code> å’Œ <code>set</code> æ–¹æ³•ã€‚</p>
<p>å›åˆ°æµ‹è¯•ç”¨ä¾‹ä¸­çš„ <code>expect(observeOriginal.foo).toBe(1)</code> è¿™ä¸ªæ­¥éª¤ï¼Œåœ¨è·å–ä»£ç†å¯¹è±¡çš„fooå±æ€§æ—¶ï¼Œä¾¿ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œä»è€Œè¿”å›å±æ€§å¯¹åº”çš„å€¼ã€‚åŒæ ·ï¼Œå½“è®¾ç½®ä»£ç†å¯¹è±¡çš„fooå±æ€§æ—¶ï¼Œä¾¿ä¼šè§¦å‘ <code>set</code> æ–¹æ³•ï¼Œå¯¹å±æ€§çš„å€¼åšå‡ºæ”¹å˜ã€‚</p>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ æµç¨‹å›¾ï¼Œæ¥æ‹ä¸€æ‹ <code>reactive</code> çš„æµç¨‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b014fadb17d641048dcd12f01695afaf~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<blockquote>
<p>æ‰©å±•é˜…è¯»ï¼šå…³äº <code>Proxy</code> ä¸­ä¸ºå•¥è¦ç”¨åˆ° <code>Reflect</code>ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å‚è€ƒä¸‹ <code>å¼ é‘«æ—­</code> å¤§ä½¬çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.zhangxinxu.com/wordpress/2021/07/js-proxy-reflect/">Proxyæ˜¯ä»£ç†ï¼ŒReflectæ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ</a></p>
</blockquote>
<p><strong>ç»¼ä¸Šï¼š<code>reactive</code> é€šè¿‡ <code>createReactiveObject</code> æ–¹æ³•ï¼Œè¿”å› <code>target</code> æ‰€å¯¹åº”çš„ <code>proxy</code> å¯¹è±¡ï¼Œå¹¶å¯¹ <code>target</code> ä¸­å±æ€§çš„è¯»å–ä¸å†™å…¥æ“ä½œåšäº†æ‹¦æˆªå¤„ç†ã€‚</strong></p>
<h3 id="reactivity-ç¬¬äºŒæ­¥ä¾èµ–æ”¶é›†-è§¦å‘ä¾èµ–"><code>reactivity</code> ç¬¬äºŒæ­¥ï¼šä¾èµ–æ”¶é›† &amp;&amp; è§¦å‘ä¾èµ–</h3>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•é€šè¿‡ <code>Proxy</code> æ‹¦æˆªå¯¹è±¡çš„å±æ€§æ“ä½œ, æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹å¦‚ä½•å®ç° <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>ä¾èµ–è§¦å‘</code>ã€‚</p>
<p>è€è§„çŸ©ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆä»æµ‹è¯•ç”¨ä¾‹å…¥æ‰‹ï¼š</p>
<pre><code class="language-ts">// src/reactivity/__tests__/effect.spec.ts

import { reactive } from '../reactive'
import { effect } from  '../effect'

describe('effect', () =&gt; {
  it ('should observe basic properties', () =&gt; {
    let dummy = 0
    // è·å–proxyå¯¹è±¡
    const data = reactive({ num: 0 })
    // ï¼Ÿ
    effect(() =&gt; { dummy = data.num })
    expect(dummy).toBe(0)
    // æ”¹å˜å€¼
    data.num = 1
    expect(dummy).toBe(1)
  })
})
</code></pre>
<p>æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œåœ¨è°ƒç”¨äº† <code>reactive</code> æ–¹æ³•è·å–åˆ° <code>Proxy</code> å¯¹è±¡åï¼Œåˆè°ƒç”¨äº† <code>effect</code> æ–¹æ³•ã€‚é‚£è¿™ä¸ª <code>effect</code> æ–¹æ³•åˆæ˜¯å¹²å•¥çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ <code>effect</code> æ–¹æ³•çš„å®šä¹‰ï¼š</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

/**
 * @param fn
 */
export function effect(fn) {
  const reactiveEffect = new ReactiveEffect(fn)
  reactiveEffect.run()
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>effect</code> æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”åœ¨å…¶å†…éƒ¨å®ä¾‹åŒ–äº†ä¸€ä¸ªåä¸º <code>ReactiveEffect</code> çš„ç±»ï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„å‡½æ•°ä¼ å…¥è¿™ä¸ªç±»ä¸­ï¼Œç„¶åæ‰§è¡Œ <code>ReactiveEffect</code> ç±»ä¸Šæä¾›çš„ <code>run</code> æ–¹æ³•ã€‚é‚£è¿™ä¸ª <code>ReactiveEffect</code> ç±»åˆæ˜¯ä½•æ–¹ç¥åœ£å‘¢ï¼Ÿæ‰§è¡Œ <code>run</code> åˆåšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿ:</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

let activeEffect = void 0

export class ReactiveEffect {
  // å­˜æ”¾æ‰€æœ‰ä¾èµ–
  public deps: any = new Set()

  // åˆå§‹åŒ–ä¾èµ–åˆ—è¡¨
  constructor(fn) {
    if (fn) this.deps.add(fn)
  }

  // æ‰§è¡Œæ”¶é›†åˆ°çš„æ‰€æœ‰ä¾èµ–
  run () {
    activeEffect = this as any
    this.deps.forEach(dep =&gt; dep())
  }
}
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œ<code>ReactiveEffect</code> ç±»åœ¨è¢«å®ä¾‹åŒ–æ—¶ï¼Œå°†æ¥æ”¶åˆ°çš„å‡½æ•°å­˜å‚¨åˆ°è‡ªå·±çš„ <code>deps</code> å±æ€§ä¸­ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®ƒçš„ <code>run</code> æ–¹æ³•æ—¶ï¼Œåˆ™æ˜¯éå†è‡ªèº«çš„ <code>deps</code> å±æ€§ï¼Œæ‰§è¡Œå…¶ä¸­å­˜å‚¨çš„å‡½æ•°ã€‚</p>
<p>ç”±æ­¤å¯çŸ¥ï¼Œ<strong>å€ŸåŠ© <code>ReactiveEffect</code> ç±»æ‰€æä¾›çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•ä¿å­˜èµ·æ¥ï¼Œä¹Ÿå¯ä»¥è§¦å‘å·²ç»è¢«ä¿å­˜èµ·æ¥çš„æ–¹æ³•ã€‚</strong></p>
<blockquote>
<p><strong>æé—®ï¼š</strong> åœ¨è°ƒç”¨ <code>run</code> æ–¹æ³•æ—¶ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å°† <code>this</code> èµ‹å€¼ç»™å…¨å±€å˜é‡ <code>activeEffect</code> å‘¢ï¼Ÿ</p>
</blockquote>
<p>å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº† <code>æ”¶é›†æ–¹æ³•</code> ä»¥åŠ <code>è§¦å‘è¢«ä¿å­˜æ–¹æ³•</code> çš„èƒ½åŠ›ã€‚é‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½•å°†æ”¶é›†åˆ°çš„æ–¹æ³•ç»‘å®šåˆ°å¯¹åº”çš„å¯¹è±¡åŠå…¶å±æ€§ä¸Šå»å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹å…·ä½“çš„å®ç°ï¼š</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

const targetMap = new WeakMap()

/**
 * ä¾èµ–æ”¶é›†
 * @param target
 * @param type
 * @param key
 */
export function track(target, type, key) {
  // åˆ¤æ–­targetMapä¸­æ˜¯å¦ä¿å­˜æœ‰targetå¯¹è±¡å¯¹åº”çš„map
  let depsMap = targetMap.get(target)
  
  // å¦‚æœæ²¡æœ‰ï¼Œåˆ™ç»™è¯¥å¯¹è±¡æ–°å»ºä¸€ä¸ªç©ºçš„mapï¼Œå¹¶ç»‘å®šåˆ°targetMapä¸­
  if (!depsMap) {
    depsMap = new Map()
    targetMap.set(target, depsMap)
  }
  
  // å–å‡ºtargetå¯¹åº”çš„mapä¸­ï¼Œtargetå±æ€§keyæ‰€å¯¹åº”çš„ä¾èµ–
  let dep = depsMap.get(key)
  
  // å¦‚æœä¾èµ–ä¸å­˜åœ¨ï¼Œåˆ™ç»™å½“å‰çš„keyåˆ›å»ºä¸€ä¸ªç©ºçš„ä¾èµ–é›†åˆï¼Œå¹¶ä¿å­˜åˆ°targetå¯¹è±¡å¯¹åº”çš„mapä¸­
  if (!dep) {
    dep = new Set()
    depsMap.set(key, dep)
  }
  
  // æ·»åŠ ä¾èµ–
  dep.add(activeEffect)
}
</code></pre>
<p><code>track</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œéœ€è¦è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„å¯¹è±¡ <code>target</code> ã€æ”¶é›†ç±»å‹ <code>type</code> ä»¥åŠç»‘å®šä¾èµ–çš„ <code>key</code>ã€‚å…·ä½“æµç¨‹å¦‚æ³¨é‡Šã€‚</p>
<p><strong>æ³¨æ„æœ€åä¸€æ­¥ä¸­çš„ <code>æ·»åŠ ä¾èµ–</code> æ“ä½œã€‚</strong> åœ¨è¿™ä¸€æ­¥éª¤ä¸­ï¼Œå°†å…ˆå‰ä¿å­˜æœ‰ <code>ReactiveEffect</code> ç±»çš„ <code>this</code> çš„å…¨å±€å˜é‡æ·»åŠ åˆ°äº† <code>target</code> å¯¹åº”å±æ€§çš„ä¾èµ–ä¸­ã€‚</p>
<blockquote>
<p><strong>è§£ç­”ï¼š</strong> å›åˆ°åˆšæ‰çš„æé—®ï¼Œä¹‹æ‰€ä»¥è¦å°† <code>ReactiveEffect</code> çš„ <code>this</code> èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œå°±æ˜¯åœ¨è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„æ—¶å€™å¯ä»¥å°†å…¶æ·»åŠ åˆ°å¯¹åº”å±æ€§çš„ä¾èµ–ä¸­å»ã€‚æ‰€ä»¥ <code>æ”¶é›†ä¾èµ–</code> å…¶å®å°±æ˜¯æ”¶é›†çš„ <code>ReactiveEffect</code> çš„å®ä¾‹ã€‚</p>
</blockquote>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æˆåŠŸæ”¶é›†åˆ°ä¾èµ–äº†ï¼Œé‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½• <code>è§¦å‘ä¾èµ–</code> å‘¢ï¼Ÿ</p>
<pre><code class="language-ts">// src/reactivity/effect.ts

/**
 * è§¦å‘ä¾èµ–
 * @param target
 * @param key
 */
export function trigger(target, key) {
  const depsMap = targetMap.get(target)
  const dep = depsMap.get(key)

  // éå†æ‰§è¡Œä¾èµ–
  for(const effect of dep) {
    effect.run()
  }
}
</code></pre>
<p>å…¶å®ä¾èµ–çš„è§¦å‘å¾ˆç®€å•ï¼Œåªéœ€è¦å°† <code>key</code> ä¸­ä¿å­˜çš„ <code>ReactiveEffect</code> å®ä¾‹éƒ½å–å‡ºæ¥ï¼Œç„¶åæ‰§è¡Œå®ƒä»¬çš„ <code>run</code> æ–¹æ³•å³å¯ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¾èµ–çš„æ”¶é›†ä¸è§¦å‘åŠŸèƒ½ï¼Œé‚£æˆ‘ä»¬åˆè¯¥åœ¨ä½•æ—¶ <code>æ”¶é›†</code>ï¼Œåˆåœ¨ä½•æ—¶ <code>è§¦å‘</code> å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>åœ¨ä½¿ç”¨æ—¶ <code>æ”¶é›†</code>ï¼Œåœ¨æ”¹å˜æ—¶ <code>è§¦å‘</code>ã€‚</strong></p>
<p>å›åˆ°åˆšæ‰çš„æµ‹è¯•ç”¨ä¾‹ä¸­çš„ <code>effect(() =&gt; { dummy = data.num })</code> è¿™ä¸€æ­¥ï¼Œåœ¨è°ƒç”¨äº† <code>effect</code> æ–¹æ³•åï¼Œä¼šé€šè¿‡ <code>ReactiveEffect</code> ç±»ä¸Šæä¾›çš„ <code>run</code> æ–¹æ³•æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå‡½æ•°ä¸­è¯»å–äº†ä»£ç†å¯¹è±¡ä¸Šçš„ <code>num</code> å±æ€§ï¼Œå› æ­¤ä¼šè§¦å‘ <code>get</code> æ–¹æ³•ï¼Œåœ¨ <code>get</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ <code>ä¾èµ–æ”¶é›†</code> çš„æ“ä½œï¼›ä¹‹åé€šè¿‡ <code>data.num = 1</code> è¿™ä¸€æ­¥éª¤ï¼Œè®¾ç½® <code>num</code> å±æ€§çš„å€¼ï¼Œç»§è€Œä¼šè§¦å‘ <code>set</code> æ–¹æ³•ï¼Œåœ¨ <code>set</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ <code>ä¾èµ–è§¦å‘</code> çš„æ“ä½œã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>get</code> ä¸­åŠ å…¥ <code>track</code> æ–¹æ³•ï¼Œåœ¨ <code>set</code> ä¸­åŠ å…¥ <code>trigger</code> æ–¹æ³•å³å¯ï¼š</p>
<pre><code class="language-ts">// src/reactivity/baseHandlers.ts

// ...çœç•¥éƒ¨åˆ†ä»£ç 

export function createGetter () {
  return function (target, key, receiver) {
    const res =  Reflect.get(target, key, receiver)

    // è§¦å‘ä¾èµ–æ”¶é›†
    track(target, 'get', key)

    return res
  }
}

export function createSetter () {
  return function (target, key, value, receiver) {
    const res = Reflect.set(target, key, value, receiver)
    trigger(target, key)
    return res
  }
}
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°† <code>ä¾èµ–æ”¶é›†</code> ä¸ <code>ä¾èµ–è§¦å‘</code> çš„æµç¨‹è¡¥å……åˆ°å…ˆå‰çš„æµç¨‹å›¾ä¸­å»ï¼Œæ¥å®Œæˆçš„çœ‹ä¸‹å“åº”å¼çš„æµç¨‹å§ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c23ce7a3145b4e3f8580958b8a82297a~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></figure>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºæœ¬çš„å“åº”å¼æ“ä½œï¼Œä¹Ÿæ‹æ¸…äº†å…¶ä¸­çš„åŸºæœ¬åŸç†ã€‚å¦‚æœæœ‰æè¿°ä¸å½“ä¹‹å¤„ï¼Œè¿˜è¯·å„ä½å¤§ä½¬å¸®å¿™æŒ‡æ­£~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä½¿ç”¨Gridea + Valineæ­å»ºå±äºè‡ªå·±çš„åšå®¢]]></title>
        <id>https://luhaifeng666.github.io/post/shi-yong-gridea-vline-da-jian-shu-yu-zi-ji-de-bo-ke/</id>
        <link href="https://luhaifeng666.github.io/post/shi-yong-gridea-vline-da-jian-shu-yu-zi-ji-de-bo-ke/">
        </link>
        <updated>2021-12-24T17:15:10.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¹‹å‰æ­å»ºåšå®¢éƒ½æ˜¯é€šè¿‡ <code>vuepress</code> + <code>Github Pages</code> çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸ªå¯è§†åŒ–å¯ç¼–è¾‘çš„åšå®¢ç•Œé¢ï¼Œå¯ä»¥åšè®¸å¤šä¸ªæ€§åŒ–çš„å®šåˆ¶ï¼Œå²‚ä¸ä¸æ˜¯ç¾æ»‹æ»‹~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¹‹å‰æ­å»ºåšå®¢éƒ½æ˜¯é€šè¿‡ <code>vuepress</code> + <code>Github Pages</code> çš„æ–¹å¼ï¼Œè™½ç„¶ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸ªå¯è§†åŒ–å¯ç¼–è¾‘çš„åšå®¢ç•Œé¢ï¼Œå¯ä»¥åšè®¸å¤šä¸ªæ€§åŒ–çš„å®šåˆ¶ï¼Œå²‚ä¸ä¸æ˜¯ç¾æ»‹æ»‹~ï¼ˆæ‰‹åŠ¨ğŸŒºğŸ”ï¼‰</p>
<!-- more -->
<h1 id="é€šè¿‡grideaå¿«é€Ÿæ­å»ºåšå®¢">é€šè¿‡Grideaå¿«é€Ÿæ­å»ºåšå®¢</h1>
<pre><code>Gridea æ˜¯ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ï¼Œå¸®åŠ©ä½ æ›´å®¹æ˜“åœ°æ„å»ºå¹¶ç®¡ç†åšå®¢æˆ–ä»»ä½•é™æ€ç«™ç‚¹ã€‚
</code></pre>
<p>ä»¥ä¸Šæ˜¯ <a href="https://gridea.dev/">Gridea</a> å®˜æ–¹å¯¹è¿™æ¬¾åšå®¢å®¢æˆ·ç«¯çš„æè¿°ã€‚å®ƒåˆ°åº•æœ‰å¤šå®¹æ˜“å‘¢ï¼Ÿé‚£æˆ‘ä»¬å°±è‡ªå·±åŠ¨æ‰‹æ¥è¯•ä¸‹å§~</p>
<h2 id="ç®€å•ä¸¤æ­¥å®Œæˆåšå®¢æ­å»º">ç®€å•ä¸¤æ­¥ï¼Œå®Œæˆåšå®¢æ­å»º</h2>
<h3 id="ç¬¬ä¸€æ­¥ä¸‹è½½grideaå®¢æˆ·ç«¯">ç¬¬ä¸€æ­¥ï¼šä¸‹è½½Grideaå®¢æˆ·ç«¯</h3>
<p><code>Gridea</code> å®¢æˆ·ç«¯æ˜¯ä½¿ç”¨ <code>Electron</code> å¼€å‘çš„ï¼Œä½¿ç”¨å®ƒä¹‹å‰ï¼Œéœ€è¦å…ˆå» <a href="https://gridea.dev/#started">å®˜ç½‘ä¸‹è½½</a>ã€‚å®˜æ–¹æä¾›äº† <code>MacOS</code>, <code>Windows</code> ä»¥åŠ <code>Linux</code> ä¸‰ç«¯çš„å®‰è£…åŒ…ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªè¡Œä¸‹è½½~<br>
<img src="https://luhaifeng666.github.io/post-images/1640367698849.jpg" alt="" loading="lazy"></p>
<h3 id="ç¬¬äºŒæ­¥å‘å¸ƒ">ç¬¬äºŒæ­¥ï¼šå‘å¸ƒ</h3>
<p>æ˜¯çš„ï¼ä½ æ²¡æœ‰å¬é”™ï¼ä¸‹è½½å®Œæˆåç›´æ¥å°±å¯ä»¥è¿›å…¥å‘å¸ƒæµç¨‹äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¿«ï¼<br>
<code>Gridea</code> æä¾›äº†å°†åšå®¢éƒ¨ç½²åˆ° <code>GitHub Pages</code>ã€<code>Coding Pages</code> å’Œé€šè¿‡ <code>SFTP</code> çš„æ–¹å¼ä¸Šä¼ åˆ°è‡ªå·±çš„æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚å®˜æ–¹æä¾›äº†éå¸¸è¯¦ç»†çš„Github Pageså‘å¸ƒæµç¨‹ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ï¼Œ<a href="https://gridea.dev/gridea-start/">è¯·æˆ³è¿›æ¥çœ‹å§~</a></p>
<h2 id="ä¸€äº›å¯èƒ½éœ€è¦æ³¨æ„çš„ç‚¹">ä¸€äº›å¯èƒ½éœ€è¦æ³¨æ„çš„ç‚¹</h2>
<p>ç»è¿‡ä¸Šé¢ä¸¤æ­¥çš„æ“ä½œï¼Œç›¸ä¿¡å„ä¸ªå°ä¼™ä¼´å·²ç»æ‹¥æœ‰äº†å±äºè‡ªå·±çš„åšå®¢~å¯å–œå¯è´ºï¼åœ¨è¿™é‡Œï¼Œæˆ‘åˆ—ä¸¾å‡ ä¸ªæˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œå¸Œæœ›å¯ä»¥æä¾›ç»™é‡åˆ°ç›¸åŒé—®é¢˜çš„å°ä¼™ä¼´ä¸€äº›å¸®åŠ©ï¼š</p>
<h4 id="é—®é¢˜1å…³äºåŒæ­¥">é—®é¢˜1ï¼šå…³äºåŒæ­¥</h4>
<ul>
<li>ç”±äºåŒæ­¥æ˜¯å°†ä½ çš„æ”¹åŠ¨åŒæ­¥åˆ° <code>GitHub Pages</code> ä¸Šçš„ï¼Œç”±äºç°é˜¶æ®µå›½å†…è®¿é—®Githubä¼šæœ‰é•¿æ—¶é—´æ‰“ä¸å¼€é¡µé¢ï¼Œéœ€è¦ç¿»å¢™çš„æƒ…å†µï¼Œå»ºè®®å°ä¼™ä¼´ä»¬åœ¨é•¿æ—¶é—´æ— æ³•åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå°è¯•ä¸‹ç¿»å¢™åŒæ­¥ï¼Œå¯èƒ½ä¼šç¨å¥½ä¸€äº›ï¼›</li>
<li>æˆ‘å½“å‰ä½¿ç”¨çš„ <code>Gridea</code> çš„ç‰ˆæœ¬æ˜¯ <code>0.9.2</code>ï¼Œå­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æ£€æµ‹è¿œç¨‹è¿æ¥æ—¶ï¼Œæç¤ºæˆ‘è¿æ¥æˆåŠŸï¼Œä½†æ˜¯åŒæ­¥å´ä¸€ç›´éƒ½å¤±è´¥ï¼Œæ— è®ºæ˜¯å¦å¼€å¯ç¿»å¢™ï¼Œå‡æ˜¯å¦‚æ­¤ã€‚å®˜æ–¹åœ¨ <a href="https://github.com/getgridea/gridea/issues/890">#890</a> è¿™ä¸ªissueä¸­æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¹¶ç»™å‡ºäº†ä¿®å¤åçš„åŒ…çš„ä¸‹è½½åœ°å€ï¼Œæˆ‘ä¸‹è½½åä½¿ç”¨å¹¶ä¸ç†æƒ³ï¼ˆä¸æ’é™¤æ˜¯æˆ‘æœ¬åœ°ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼‰ï¼Œä½†ä¾æ—§å¯ä»¥ä½œä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆæä¾›ç»™å°ä¼™ä¼´ä»¬å°è¯•ä¸‹~</li>
</ul>
<h4 id="é—®é¢˜2å…³äºä¸»é¢˜">é—®é¢˜2ï¼šå…³äºä¸»é¢˜</h4>
<p>ç›®å‰æˆ‘ä½¿ç”¨çš„æ˜¯ <code>Simple</code> ä¸»é¢˜ï¼Œå„æ–¹é¢ä½¿ç”¨æƒ…å†µéƒ½è¿˜ä¸é”™ï¼Œæ¨èå¤§å®¶ä½¿ç”¨è¿™æ¬¾ã€‚<br>
å½“ç„¶ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†å…¶ä»–çš„ <a href="https://gridea.dev/themes">å¤šæ¬¾ä¸»é¢˜</a> ä¾›å°ä¼™ä¼´ä»¬é£Ÿç”¨ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è‡ªè¡Œé€‰æ‹©ã€‚<br>
å¦‚æœæœ‰ç²¾åŠ›æœ‰å…´è¶£çš„å°ä¼™ä¼´å„¿ä»¬ä¹Ÿå¯ä»¥å°è¯•è‡ªå·± <a href="https://gridea.dev/theme/">å¼€å‘ä¸€ä¸ªä¸»é¢˜</a> ï¼Œæ¯•ç«Ÿè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿå˜›~<br>
è‡³äºæˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œæ˜¯åœ¨æˆ‘ä½¿ç”¨ <code>Notes</code> è¿™ä¸ªä¸»é¢˜çš„æ—¶å€™ï¼Œå‘ç°åœ¨ç¼–è¾‘å®Œæ–‡ç« åï¼Œmarkdownä¸­çš„ä»£ç åŒºå—å†…å®¹åœ¨é¢„è§ˆæ—¶è¡¨ç°æ­£å¸¸ï¼Œä½†æ˜¯åœ¨åŒæ­¥åˆ° <code>GitHub Pages</code> ä¹‹åï¼Œæ‰“å¼€é¡µé¢å‘ç°markdownä¸­çš„ä»£ç åŒºå—æ²¡æœ‰æ­£å¸¸æ¸²æŸ“å‡ºæ¥ï¼Œå¤§å®¶åœ¨é£Ÿç”¨çš„æ—¶å€™éœ€è¦ç•™æ„ä¸‹~</p>
<h1 id="æ·»åŠ vlineè¯„è®º">æ·»åŠ Vlineè¯„è®º</h1>
<p>ç°åœ¨å·²ç»æœ‰äº†è‡ªå·±çš„åšå®¢äº†ï¼Œä¹Ÿæœ‰ä¸ªåœ°æ–¹å¯ä»¥è®°å½•è‡ªå·±çš„å·¥ä½œï¼Œå­¦ä¹ ï¼Œç”Ÿæ´»äº†ï¼Œè‡ªç„¶ä¹Ÿä¸èƒ½å°‘äº†è®© <code>çœ‹å®˜ä»¬</code> ç•™ä¸‹è‡ªå·±è¶³è¿¹çš„åœ°æ–¹~<br>
æˆ‘ä½¿ç”¨çš„ <code>Simple</code> ä¸»é¢˜é»˜è®¤æä¾›äº†ä¸¤ç§å‘å¸ƒè¯„è®ºçš„å¹³å°ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640368636573.jpg" alt="" loading="lazy"><br>
è¿™é‡Œæˆ‘æ¨èä½¿ç”¨ <a href="https://valine.js.org/">Valine</a>ï¼Œæƒ³å¯¹äºä¸Šè¿°çš„ä¸¤ä¸ªè€Œè¨€ï¼Œå®ƒæ›´åŠ å‹å¥½ã€‚è‡³äºæ¥å…¥æ–¹å¼ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº†ç›¸åº”çš„ <a href="https://kveln.cn/post/qE678A4ce/">å‚è€ƒæ–‡æ¡£</a>ã€‚è¿™é‡Œæˆ‘é’ˆå¯¹å®˜æ–¹çš„æ–‡æ¡£åšä¸€äº›è¡¥å……è¯´æ˜ä»¥åŠè¸©å‘çš„ç»éªŒåˆ†äº«ã€‚</p>
<h2 id="å…³äºæ–‡æ¡£ä¸­çš„è¯´æ˜">å…³äºæ–‡æ¡£ä¸­çš„è¯´æ˜</h2>
<p>åœ¨å®˜æ–¹æä¾›çš„æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€å¤„è¯´æ˜ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369031378.png" alt="" loading="lazy"><br>
å…¶ä¸­ï¼Œ<code>Valine.min.js</code> çš„å¼•å…¥éœ€è¦æ”¾åœ¨å¯¹åº”ä¸»é¢˜çš„ <code>post.ejs</code> æ¨¡æ¿ä¸‹ã€‚</p>
<h2 id="å…³äºleancloudçš„é…ç½®">å…³äºLeanCloudçš„é…ç½®</h2>
<h3 id="åˆ›å»ºclass">åˆ›å»ºClass</h3>
<p>è¯„è®ºä¼šè°ƒç”¨ <code>LeanCloud</code> æä¾›çš„æ•°æ®æ¥å£ï¼Œå…¶ä¸­æœ‰ä¸ªæ¥å£æ˜¯è·å–è¯„è®ºæ€»æ•°çš„ï¼š<code>https://xxxx/1.1/classes/Comment</code>ã€‚è°ƒç”¨è¿™ä¸ªæ¥å£çš„å‰æï¼Œæ˜¯éœ€è¦åœ¨ <code>æ•°æ®å­˜å‚¨ &gt; ç»“æ„åŒ–æ•°æ®</code> ä¸‹æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªåä¸º <code>Comment</code> çš„classï¼Œå¦åˆ™æ¥å£ä¼šæŠ¥404ï¼Œè¿™ä¸ªéœ€è¦æ³¨æ„ä¸‹ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369813288.png" alt="" loading="lazy"></p>
<h3 id="åˆ›å»ºåº”ç”¨">åˆ›å»ºåº”ç”¨</h3>
<p>åˆ›å»ºåº”ç”¨æ—¶ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºåŒºåŸŸ:<br>
<img src="https://luhaifeng666.github.io/post-images/1640369444506.png" alt="" loading="lazy"><br>
æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ <code>åä¸œ</code>ã€‚ä¹‹æ‰€ä»¥é€‰æ‹©åä¸œï¼Œæ˜¯å› ä¸ºåœ¨ååŒ—åˆ›å»ºå®Œåº”ç”¨åï¼Œåœ¨è°ƒç”¨æ¥å£æ—¶è°ƒä¸é€šï¼Œè¿™å¯èƒ½è·Ÿæˆ‘æ‰€å¤„çš„åŒºåŸŸæœ‰å…³ã€‚æ‰€ä»¥å°ä¼™ä¼´ä»¬åœ¨åˆ›å»ºå®Œæˆä¹‹åï¼Œå¯ä»¥å» <code>è®¾ç½® &gt; åº”ç”¨å‡­è¯</code> ä¸­ï¼Œè®¿é—®ä¸‹æä¾›çš„ <code>REST API æœåŠ¡å™¨åœ°å€</code> ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¯ä»¥è°ƒé€šï¼Œå¯ä»¥çš„è¯å°±æ²¡æœ‰é—®é¢˜ã€‚å¦‚æœä¸è¡Œçš„è¯ï¼Œå»ºè®®åˆ‡æ¢ä¸‹åŒºåŸŸé‡æ–°åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼š<br>
<img src="https://luhaifeng666.github.io/post-images/1640369984692.png" alt="" loading="lazy"></p>
<h1 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h1>
<p>ä»¥ä¸Šæ˜¯æˆ‘åœ¨ä½¿ç”¨ <code>Gridea + Vline</code> æ­å»ºè‡ªå·±åšå®¢çš„æ—¶å€™æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œå¸Œæœ›å¯¹çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„å°ä¼™ä¼´æœ‰æ‰€å¸®åŠ©ã€‚<br>
å½“å‰åšå®¢å·²éƒ¨ç½²ï¼Œä»¥åä¼šé™†ç»­åˆ†äº«è‡ªå·±çš„å­¦ä¹ ç¬”è®°ä»¥åŠå¿ƒå¾—çç¢ç­‰ç­‰ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´æ¬¢è¿<a href="https://luhaifeng666.github.io/">æˆ³~</a>ã€‚<br>
ç°åœ¨å¿«åŠ¨èµ·æ‰‹æ¥ï¼Œå¿«é€Ÿæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„å¤©åœ°å§~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°ä¸€ï¼šä¸€äº›åŸºç¡€çŸ¥è¯†]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-yi-yi-xie-ji-chu-zhi-shi/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-yi-yi-xie-ji-chu-zhi-shi/">
        </link>
        <updated>2021-12-24T08:44:20.000Z</updated>
        <summary type="html"><![CDATA[<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¼šä½¿ç”¨åˆ°è„šæ‰‹æ¶ï¼Œæ¯”å¦‚ <code>vue-cli</code> ç­‰ç­‰ã€‚è¯šç„¶ï¼Œè„šæ‰‹æ¶å¯ä»¥è®©æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘æ›´åŠ ä¾¿åˆ©ï¼Œä½†æ˜¯ä¹…è€Œä¹…ä¹‹ï¼Œé€æ¸ä¾èµ–è„šæ‰‹æ¶è¿›è¡Œå¼€å‘çš„æˆ‘ä»¬ï¼Œå¯èƒ½ä¼šå¯¹ä¸€äº›å·¥å…·çš„ä½¿ç”¨é€æ¸ç”Ÿç–ï¼Œæ¯”å¦‚ <code>webpack</code> ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¼šä½¿ç”¨åˆ°è„šæ‰‹æ¶ï¼Œæ¯”å¦‚ <code>vue-cli</code> ç­‰ç­‰ã€‚è¯šç„¶ï¼Œè„šæ‰‹æ¶å¯ä»¥è®©æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘æ›´åŠ ä¾¿åˆ©ï¼Œä½†æ˜¯ä¹…è€Œä¹…ä¹‹ï¼Œé€æ¸ä¾èµ–è„šæ‰‹æ¶è¿›è¡Œå¼€å‘çš„æˆ‘ä»¬ï¼Œå¯èƒ½ä¼šå¯¹ä¸€äº›å·¥å…·çš„ä½¿ç”¨é€æ¸ç”Ÿç–ï¼Œæ¯”å¦‚ <code>webpack</code> ã€‚</p>
<!-- more -->
<p>å°¤å…¶åœ¨å…¬å¸çš„æŠ€æœ¯æ ˆæ—¥è¶‹ç¨³å®šä¹‹åï¼Œæˆ‘ä»¬æ‰‹åŠ¨é…ç½® <code>webpack</code> çš„æœºä¼šå°±è¶Šæ¥è¶Šå°‘ï¼Œæˆ‘å°±æ˜¯å¦‚æ­¤...Orzã€‚æ‰€ä»¥å€Ÿæ­¤æœºä¼šï¼Œæˆ‘å†³å®šå†é‡å¤´å­¦ä¹ ä¸€éè¿™ä¸ªç†Ÿæ‚‰è€Œåˆæœ‰ç‚¹é™Œç”Ÿçš„å·¥å…·ï¼Œå¹¶å°†ç¬”è®°åšä¸€ä¸ªæ¢³ç†ï¼Œå¸Œæœ›å¯¹åŒæ ·æœ‰æ­¤æ„Ÿè§¦ï¼Œæˆ–è€…æƒ³å­¦ä¹  <code>webpack</code> çš„å°ä¼™ä¼´ä»¬æœ‰æ‰€å¸®åŠ©~</p>
<p>æ­¤å¤„ä¸»å­é•‡æ¥¼~</p>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/456b7108fbd64ed8b270b7287cb4b364~tplv-k3u1fbpfcp-watermark.awebp" alt="ä¸»å­" loading="lazy"></figure>
<blockquote>
<p>æœ¬ç« èŠ‚åŠåé¢çš„ç« èŠ‚ä½¿ç”¨çš„webpackåŠwebpack-cliçš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š<br><br>
<code>&quot;webpack&quot;: &quot;4.41.6&quot;</code> <br><br>
<code>&quot;webpack-cli&quot;: &quot;3.3.11&quot;</code></p>
</blockquote>
<p>åœ¨å¼€å§‹å­¦ä¹ <code>webpack</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä¸ä¹‹ç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚</p>
<h1 id="æ„å»ºå·¥å…·çš„æ¦‚å¿µ">æ„å»ºå·¥å…·çš„æ¦‚å¿µ</h1>
<p>é€šä¿—ç‚¹æ¥è¯´ï¼Œæ„å»ºå·¥å…·å°±æ˜¯åŒ…å«ä¸€ç³»åˆ—å°å·¥å…·çš„å¤§å·¥å…·ã€‚<br><br>
æˆ‘ä»¬æ¥ä¸¾ä¸ªğŸŒ°ï¼šæ¯”å¦‚æˆ‘ä»¬éœ€è¦å°†lessã€sassç­‰cssé¢„å¤„ç†å™¨å†™çš„ä»£ç ç¼–è¯‘æˆæ­£å¸¸çš„cssä»£ç ï¼Œåˆ™éœ€è¦ç›¸åº”çš„ç¼–è¯‘å·¥å…·ï¼›è€Œéœ€è¦å°†ES6+çš„ä»£ç è½¬æ¢ä¸ºå…¼å®¹æ€§æ›´é«˜çš„ES5çš„ä»£ç ï¼Œä¹Ÿéœ€è¦ç›¸åº”çš„ç¼–è¯‘å·¥å…·ã€‚è€Œå°†è¯¸å¦‚æ­¤ç±»çš„å°å·¥å…·åŒ…å«èµ·æ¥çš„å¤§å·¥å…·ï¼Œå°±å« <code>æ„å»ºå·¥å…·</code> (æ¯”å¦‚æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„ <code>webpack</code> å°±æ˜¯æ„å»ºå·¥å…·)ã€‚åœ¨æ„å»ºå·¥å…·ä¸­,æˆ‘ä»¬å¯ä»¥å¤„ç†æ‰€æœ‰çš„è¿™äº›æ“ä½œã€‚</p>
<h1 id="é™æ€æ¨¡å—æ‰“åŒ…å™¨çš„æ¦‚å¿µ">é™æ€æ¨¡å—æ‰“åŒ…å™¨çš„æ¦‚å¿µ</h1>
<p>è¿™ä¸ªæ¦‚å¿µé‡Œä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå°çš„æ¦‚å¿µï¼Œå³ <code>é™æ€æ¨¡å—</code> ä¸ <code>æ‰“åŒ…</code>ã€‚<br><br>
æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-js">// main.js
import $ from 'Jquery'
import './less/common.less'
</code></pre>
<p>æˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥äº†ä¸¤ä¸ªæ¨¡å—ï¼Œwebpackåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šå…ˆç”Ÿæˆå¯¹åº”çš„ä¾èµ–å…³ç³»ï¼Œå³åœ¨ <code>main.js</code> ä¸­å¼•å…¥äº† <code>Jquery</code> ä»¥åŠ<code>common.less</code> ä¸¤ä¸ªæ¨¡å—ï¼š<br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/463c25df4e2e4c06a694a61c0b4cb717~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"><br>
å…¶ä¸­ <code>main.js</code> , <code>Jquery</code> , <code>common.less</code> ç§°ä¸º <code>ï¼ˆé™æ€ï¼‰æ¨¡å—</code>ï¼Œä¹Ÿå«åš <code>chunk</code> ï¼Œå«ä¹‰å°±æ˜¯ä»£ç å—; ä¹‹åwebpackä¼šå¯¹chunkä»£ç å—è¿›è¡Œå¤„ç†ï¼Œå°†lessä»¥åŠES6è¯­æ³•åšè½¬æ¢ï¼Œè½¬æ¢æˆæµè§ˆå™¨å¯è¯†åˆ«çš„å†…å®¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš<code>æ‰“åŒ…</code>ã€‚æ‰“åŒ…å®Œæˆåï¼Œè¾“å‡ºçš„æ–‡ä»¶ç§°ä¹‹ä¸º <code>bundle</code>ã€‚</p>
<h1 id="webpackçš„äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="https://www.webpackjs.com/concepts/">Webpackçš„äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ</a></h1>
<ol>
<li>entryï¼šæŒ‡ç¤ºwebpackä»å“ªä¸ªå…¥å£å¼€å§‹æ‰“åŒ…ï¼Œåˆ†æå¹¶æ„å»ºå†…éƒ¨ä¾èµ–å›¾ã€‚</li>
<li>outputï¼šæŒ‡ç¤ºwebpackæ‰“åŒ…ä¹‹åçš„bundleæ–‡ä»¶ç”Ÿæˆåˆ°å“ªé‡Œå»ã€‚</li>
<li>loaderï¼šwebpackåªèƒ½å¤„ç†jså†…å®¹ï¼Œloaderçš„ä½œç”¨å°±æ˜¯å°†éjsçš„å†…å®¹ï¼ˆæ¯”å¦‚css/imageï¼‰è½¬æ¢æˆwebpackå¯ä»¥è¯†åˆ«çš„å†…å®¹ã€‚</li>
<li>pluginsï¼šç›¸è¾ƒäºloaderåªèƒ½ç”¨ä½œä»£ç ç¿»è¯‘ï¼Œpluginså¯ä»¥åšæ›´å¤šå¤æ‚å¼ºå¤§çš„äº‹æƒ…ã€‚</li>
<li>modeï¼šä¸»è¦åˆ†ä¸ºdevelopmentä»¥åŠproductionæ¨¡å¼ã€‚ç›¸è¾ƒäºç”Ÿäº§æ¨¡å¼ï¼Œå¼€å‘æ¨¡å¼çš„é…ç½®ä¼šæ¯”è¾ƒç®€å•ï¼Œå…·ä½“çš„åŒºåˆ«å¯ä»¥å‚ç…§ä¸‹è¡¨ï¼š<br>
| ç¯å¢ƒ | æè¿° | ç‰¹ç‚¹ |<br>
| ------ | ------ | ------ |<br>
| development | ä¼šå°† <code>process.env.NODE_ENV</code> çš„å€¼è®¾ä¸º <code>development</code>ã€‚<br>å¯ç”¨ <code>NamedChunksPlugin</code> å’Œ <code>NamedModulesPlugin</code>ã€‚  | èƒ½æœ¬åœ°è°ƒè¯• |<br>
| production | ä¼šå°† <code>process.env.NODE_ENV</code> çš„å€¼è®¾ä¸º <code>production</code>ã€‚<br>å¯ç”¨ <code>FlagDependencyUsagePlugin</code>, <code>FlagIncludedChunksPlugin</code>, <code>ModuleConcatenationPlugin</code>, <code>NoEmitOnErrorsPlugin</code>, <code>OccurrenceOrderPlugin</code>, <code>SideEffectsFlagPlugin</code> å’Œ <code>UglifyJsPlugin</code>ã€‚ | èƒ½ä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„ä»£ç  |</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°äºŒï¼šWebpackåˆä½“éªŒ]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-er-webpack-chu-ti-yan/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-er-webpack-chu-ti-yan/">
        </link>
        <updated>2021-12-24T08:43:24.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>webpackçš„ä½¿ç”¨ä¾æ‰˜äºnodejsï¼Œæœ¬æ–‡åŠä¹‹åçš„ç¯‡å¹…é‡Œï¼Œä½¿ç”¨çš„nodeç‰ˆæœ¬ä¸ºï¼š<code>10.17.0</code>ã€‚</p>
</blockquote>
<h1 id="åˆå§‹åŒ–nodeé¡¹ç›®">åˆå§‹åŒ–nodeé¡¹ç›®</h1>
<p>å¼€å§‹ä¹‹å‰ï¼Œåˆ‡æ¢åˆ°å­˜æ”¾é¡¹ç›®çš„è·¯å¾„ï¼Œåœ¨æœ¬åœ°ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ªnodeé¡¹ç›®ï¼Œæœ¬æ–‡æ˜¯åœ¨ <code>webpack-study</code> ç›®å½•ä¸‹ã€‚åˆå§‹åŒ–çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">cd webpack-study
npm init
</code></pre>
<p>æ ¹æ®æ­¥éª¤è®¾ç½®ä¸‹é¡¹ç›®åç§°ç­‰ä¸€äº›åŸºç¡€ä¿¡æ¯ï¼Œå…¶ä»–çš„æ­¥éª¤æŒ‰ç…§é»˜è®¤é…ç½®ä¸€è·¯å›è½¦åˆ°åº•å³å¯ã€‚åˆ›å»ºå®Œæˆåï¼Œåœ¨ <code>webpack-study</code> ç›®å½•ä¸‹ä¼šç”Ÿæˆæœ€åŸºæœ¬çš„package.jsonæ–‡ä»¶ã€‚</p>
<h1 id="åˆ›å»ºä»£ç ç›®å½•">åˆ›å»ºä»£ç ç›®å½•</h1>
<p>åœ¨ <code>webpack-study</code> ç›®å½•ä¸‹åˆ›å»º <code>src</code> ç›®å½•ï¼Œç”¨äºå­˜æ”¾æºä»£ç ã€‚å¹¶åœ¨srcä¸‹åˆ›å»ºindex.jsä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œè¿™é‡Œå…ˆå†™ä¸€æ®µç®€å•çš„ä»£ç ç”¨ä½œç¤ºä¾‹ï¼š</p>
<pre><code class="language-js">const add = (x, y) =&gt; x + y
console.log(add(1, 2))
</code></pre>
<h1 id="å®‰è£…webpack">å®‰è£…Webpack</h1>
<pre><code class="language-js">npm i webpack webpack-cli
</code></pre>
<p>è¿™é‡Œé™¤äº†ç”¨åˆ° <code>webpack</code> ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç”¨åˆ° <code>webpack-cli</code>, å®ƒæ˜¯webpackçš„è„šæ‰‹æ¶ã€‚</p>
<h1 id="åˆ›å»ºwebpacké…ç½®æ–‡ä»¶">åˆ›å»ºWebpacké…ç½®æ–‡ä»¶</h1>
<p>æƒ³è¦ä½¿ç”¨webpackå¯¹èµ„æºè¿›è¡Œæ‰“åŒ…ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦é…ç½®ä¸‹webpackçš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>webpack.config.js</code> æ–‡ä»¶ã€‚ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬æåˆ°webpackçš„5ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œ(å¦‚æœå°è±¡ä¸æ˜¯å¾ˆæ·±çš„å°ä¼™ä¼´å¯ä»¥å›çœ‹ï¼š<a href="https://juejin.cn/post/6902441939560300558#heading-3">Webpackå­¦ä¹ ç¬”è®°ä¸€ï¼šä¸€äº›åŸºç¡€çŸ¥è¯†</a>ã€‚)ç°åœ¨æˆ‘ä»¬æ ¹æ®ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„5ä¸ªåŸºç¡€æ¦‚å¿µæ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„webpacké…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-js">// å¼•å…¥nodeçš„pathæ¨¡å—
const { resolve } = require('path')

module.exports = {
    // å…¥å£æ–‡ä»¶
    entry: './src/index.js',
    // æ–‡ä»¶è¾“å‡ºé…ç½®
    output: {
    	// è¾“å‡ºçš„æ–‡ä»¶åç§°
        // é…ç½®[name]åˆ™å–çš„æ˜¯å…¥å£æ–‡ä»¶çš„åç§°
    	filename: 'js/[name].js',
        // è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„
        // è¿™é‡Œæ˜¯æŒ‡è¾“å‡ºåˆ°æ ¹ç›®å½•ä¸‹çš„buildç›®å½•ä¸‹ï¼Œå¦‚æœå¯¹__dirnameä¸æ˜¯å¾ˆäº†è§£çš„å°ä¼™ä¼´å¯ä»¥å»nodejså®˜ç½‘äº†è§£ä¸€ä¸‹
        path: resolve(__dirname, 'build')
    },
    // ç”¨äºé…ç½®loader
    module: {},
    // ç”¨äºé…ç½®æ’ä»¶ä¿¡æ¯
    plugins: [],
    // å¯ç”¨å¼€å‘æ¨¡å¼
    mode: 'development'
}
</code></pre>
<h1 id="æ·»åŠ æ‰“åŒ…å‘½ä»¤">æ·»åŠ æ‰“åŒ…å‘½ä»¤</h1>
<p>webpackçš„æ‰“åŒ…å‘½ä»¤å°±æ˜¯ <code>webpack</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŒ‡ä»¤è„šæœ¬ä¸­æ·»åŠ ä¸€äº›è®¾ç½®å‚æ•°ï¼š</p>
<pre><code class="language-js">// å¼€å‘ç¯å¢ƒ
webpack ./src/index.js -o ./build/index.js --mode=development
// ç”Ÿäº§ç¯å¢ƒ
webpack ./src/index.js -o ./build/index.js --mode=production
</code></pre>
<p>ç¨å¾®è§£é‡Šä¸‹ä¸Šé¢çš„è„šæœ¬ï¼Œä¸Šè¿°è„šæœ¬çš„å«ä¹‰æ˜¯ï¼šwebpackä½¿ç”¨ <code>å¼€å‘/ç”Ÿäº§</code> æ¨¡å¼( <code>mode</code> )ï¼Œå°† <code>./src/index.js</code> æ‰“åŒ…è¾“å‡º( <code>-o</code> )åˆ° <code>./build/index.js</code> ä¸­ã€‚<br><br>
ç»†å¿ƒçš„å°ä¼™ä¼´å„¿åº”è¯¥å·²ç»å‘ç°ï¼Œä¸Šè¿°ä¸¤ç§æŒ‡ä»¤çš„å”¯ä¸€åŒºåˆ«åœ¨äº <code>mode</code> çš„å‚æ•°ä¸åŒï¼Œä¸€ä¸ªæ˜¯ <code>development</code>,ä»£è¡¨å¼€å‘ç¯å¢ƒ; å¦ä¸€ä¸ªæ˜¯ <code>production</code> ï¼Œä»£è¡¨ç”Ÿäº§ç¯å¢ƒã€‚é‚£ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ<br><br>
æˆ‘ä»¬å…ˆå°†ä¸¤ç§æŒ‡ä»¤é…ç½®åˆ° <code>package.json</code> çš„ <code>scripts</code> ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬åæœŸå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>npm</code> æˆ–è€… <code>yarn</code> å‘½ä»¤æ¥æ‰§è¡Œå®ƒä»¬ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥å°†è¿™ä¸¤ç§æŒ‡ä»¤å¤åˆ¶åˆ°æ§åˆ¶å°ä¸­è¿è¡Œï¼Œä½†æ˜¯æ˜¾ç„¶è¿™æ ·å°±ä¸æ˜¯å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;webpack_study&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;build:dev&quot;: &quot;webpack ./src/index -o ./build/index.js --mode=development&quot;,
    &quot;build:prd&quot;: &quot;webpack ./src/index -o ./build/index.js --mode=production&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;dependencies&quot;: {
    &quot;webpack&quot;: &quot;4.41.6&quot;,
    &quot;webpack-cli&quot;: &quot;3.3.11&quot;
  }
}
</code></pre>
<p>ç„¶åæˆ‘ä»¬åˆ†åˆ«é€šè¿‡æ‰§è¡Œ <code>build:dev</code> ä»¥åŠ <code>build:prd</code> æ¥çœ‹ä¸‹æ‰“åŒ…åçš„åŒºåˆ«ã€‚</p>
<blockquote>
<p>Tips: <br><br>
å¯èƒ½æœ‰å°ä¼™ä¼´æ³¨æ„åˆ°äº†ï¼Œåœ¨ <code>webpack.config.js</code> æ–‡ä»¶ä¸­é…ç½®äº† <code>mode: 'development'</code>ï¼Œè€Œåœ¨æˆ‘ä»¬ <code>package.json</code> çš„æŒ‡ä»¤ä¸­ä¹ŸæŒ‡å®šäº† <code>--mode='development'</code>ï¼Œé‚£ä¹ˆä¸¤è€…ç©¶ç«Ÿä»¥è°ä¸ºå‡†å‘¢ï¼Ÿ<br><br>
ç­”æ¡ˆæ˜¯ä»¥ <code>package.json</code> ä¸­é…ç½®çš„ä¸ºå‡†ã€‚æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å»è¯•è¯•çœ‹~</p>
</blockquote>
<h2 id="builddev">build:dev</h2>
<pre><code class="language-js">npm run build:dev
</code></pre>
<p>è¿è¡Œè¿™ä¸ªæŒ‡ä»¤åï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•çš„ <code>build/js</code> è·¯å¾„ä¸‹å¯ä»¥çœ‹åˆ°æ‰“åŒ…åç”Ÿæˆçš„ <code>index.js</code> æ–‡ä»¶ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶:</p>
<pre><code class="language-js">/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode &amp; 1: value is a module id, require it
/******/ 	// mode &amp; 2: merge all properties of value into the ns
/******/ 	// mode &amp; 4: return value when already ns object
/******/ 	// mode &amp; 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode &amp; 1) value = __webpack_require__(value);
/******/ 		if(mode &amp; 8) return value;
/******/ 		if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module &amp;&amp; module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = &quot;&quot;;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = &quot;./src/js/index.js&quot;);
/******/ })
/************************************************************************/
/******/ ({

/***/ &quot;./src/js/index.js&quot;:
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval(&quot;const add = (x, y) =&gt; x + y;\n\nconsole.log(add(1, 2));\n\n\n//# sourceURL=webpack:///./src/js/index.js?&quot;);

/***/ })

/******/ });
</code></pre>
<p>æ»‘åŠ¨åˆ°æœ€åº•éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¹‹å‰å†™çš„ä»£ç è¢«è½¬æ¢æˆäº†å­—ç¬¦ä¸²å½¢å¼å†™å…¥åˆ°äº† <code>eavl</code> æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”ä»¥ <code>æºç è·¯å¾„</code> ä¸ºkeyï¼ŒåŒæ—¶å°†ä¹‹ä½œä¸ºvalueï¼Œä»¥å¯¹è±¡çš„å½¢å¼ä½œä¸ºå…¥å‚ï¼Œä¼ å…¥æ‰“åŒ…ç”Ÿæˆçš„æ–¹æ³•ä¸­ã€‚</p>
<h2 id="buildprd">build:prd</h2>
<p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹é€šè¿‡è¿è¡Œ <code>build:prd</code> æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼š</p>
<pre><code class="language-js">npm run build:prd
</code></pre>
<p>è¿è¡Œå®Œæˆåç”Ÿæˆå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-js">!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},n.t=function(e,t){if(1&amp;t&amp;&amp;(e=n(e)),8&amp;t)return e;if(4&amp;t&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;e&amp;&amp;e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,&quot;default&quot;,{enumerable:!0,value:e}),2&amp;t&amp;&amp;&quot;string&quot;!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return n.d(t,&quot;a&quot;,t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=&quot;&quot;,n(n.s=0)}([function(e,t){console.log(1+2)}]);
</code></pre>
<p>æˆ‘ä»¬å‘ç°ä»£ç ç²¾ç®€äº†è®¸å¤šï¼Œæ²¡æœ‰äº†æ³¨é‡Šï¼Œæ²¡æœ‰äº†ç©ºæ ¼æŠ˜è¡Œï¼Œæ˜¾ç„¶ä»£ç è¢«å‹ç¼©è¿‡äº†ã€‚ç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p>
<blockquote>
<p>ç›¸è¾ƒäºdevelopmentæ¨¡å¼ï¼Œproductionæ¨¡å¼ä¼šå¯¹æ‰“åŒ…åçš„ä»£ç è¿›è¡Œå‹ç¼©ã€‚ä¸»è¦æ˜¯å› ä¸ºproductionæ¨¡å¼ä¸‹å¯ç”¨äº†webpackçš„ <code>UglifyJsPlugin</code> æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶çš„ä½œç”¨å°±æ˜¯å¯¹ä»£ç è¿›è¡Œå‹ç¼©ã€‚</p>
</blockquote>
<h1 id="æ§åˆ¶å°è¾“å‡ºä¿¡æ¯">æ§åˆ¶å°è¾“å‡ºä¿¡æ¯</h1>
<p>æ‰“åŒ…å®Œæˆåï¼Œè®©æˆ‘ä»¬å›è¿‡å¤´æ¥ï¼Œå†æ¥ä¸€èµ·çœ‹ä¸‹æ§åˆ¶å°ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯ï¼Œå¹¶å¯¹è¿™äº›ä¿¡æ¯åšä¸€ä¸ªç®€å•çš„äº†è§£ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åˆšæ‰æ‰“åŒ…å®Œæˆåçš„æ§åˆ¶å°è¾“å‡º:</p>
<figure data-type="image" tabindex="1"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f2ba8e9346040388a50d65a6c7b9d46~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
<p>æˆ‘ä»¬ä¾æ¬¡çœ‹ä¸‹è¿™äº›å‚æ•°çš„å«ä¹‰ï¼š</p>
<blockquote>
<p>Hash: æ‰“åŒ…ä¹‹åç”Ÿæˆçš„å”¯ä¸€IDï¼Œåç»­å¯ç”¨ä½œæ–‡ä»¶åä¸­çš„å”¯ä¸€è¡¨ç¤ºï¼Œé˜²æ­¢è®¿é—®ç¼“å­˜ï¼›<br><br>
Version: webpackçš„ç‰ˆæœ¬ï¼›<br><br>
Time:  æ‰“åŒ…æ‰€è€—çš„æ—¶é—´ï¼›<br><br>
Built at: æ‰“åŒ…å¼€å§‹çš„æ—¶é—´; <br><br>
Assetï¼šæ‰“åŒ…çš„èµ„æºï¼›<br><br>
Sizeï¼šæ–‡ä»¶å¤§å°ï¼›<br><br>
Chunks: æ‰€å±çš„chunkåç§°ï¼›<br><br>
Chunk Namesï¼šchunkåç§°ï¼›<br><br>
EntryPoint main: å…¥å£æ–‡ä»¶åç§°ï¼›<br><br>
[....]:  å‚ä¸æ‰“åŒ…çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„é™æ€æ¨¡å—ã€‚</p>
</blockquote>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ç®€å•çš„webpackæ‰“åŒ…åŠŸèƒ½ï¼Œå¹¶ä¸”å¯¹webpackçš„ä¸€äº›åŸºæœ¬é…ç½®ã€æ‰“åŒ…å‘½ä»¤ä»¥åŠä¸åŒæ¨¡å¼ä¸‹æ‰“åŒ…çš„åŒºåˆ«åšäº†ä¸€ä¸ªç®€å•çš„äº†è§£ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯¹æ§åˆ¶å°ä¸­è¾“å‡ºä¿¡æ¯çš„å«ä¹‰ä¹Ÿäº†ç„¶äºèƒ¸ã€‚<br><br>
åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä¼šä¾æ¬¡ä»‹ç»webpackçš„å…¶ä»–åŠŸèƒ½ï¼Œå€Ÿæ­¤å¯ä»¥å¸®åŠ©å¤§å®¶é€æ­¥ç†Ÿæ‚‰webpackçš„é…ç½®ï¼Œè®©å°ä¼™ä¼´ä»¬åœ¨ä¹‹åçš„å¼€å‘è¿‡ç¨‹ä¸­ä¸ä¼šå†å¯¹webpackçš„é…ç½®æ„Ÿåˆ°æ™¦æ¶©é™Œç”Ÿã€‚ç¯‡å¹…ä¹Ÿè®¸ä¸ä¼šå¤ªé•¿ï¼Œä½†æ˜¯å¸Œæœ›å¯¹å°ä¼™ä¼´ä»¬æœ‰æ‰€åŠ©ç›Š~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°ä¸‰ï¼šjsçš„å…¼å®¹æ€§å¤„ç†]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-san-js-de-jian-rong-xing-chu-li/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-san-js-de-jian-rong-xing-chu-li/">
        </link>
        <updated>2021-12-24T08:42:42.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://juejin.cn/post/6903529588271136782">ä¸Šä¸€èŠ‚</a>ä¸­æˆ‘ä»¬ç®€å•å®ç°äº†webpackçš„æ‰“åŒ…åŠŸèƒ½ï¼Œå¹¶ä¸”å¯¹webpackçš„ä¸€äº›åŸºæœ¬é…ç½®ã€æ‰“åŒ…å‘½ä»¤ä»¥åŠä¸åŒæ¨¡å¼ä¸‹æ‰“åŒ…çš„åŒºåˆ«åšäº†ä¸€ä¸ªç®€å•çš„äº†è§£ï¼Œä¹Ÿäº†è§£äº†ä¸‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯çš„å«ä¹‰ã€‚æ¥ä¸‹æ¥çš„å‡ èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸‹ï¼Œé’ˆå¯¹äºä¸åŒç±»å‹çš„èµ„æºï¼Œwebpackæ˜¯å¦‚ä½•è¿›è¡Œç¼–è¯‘æ‰“åŒ…çš„ï¼Œåœ¨æ‰“åŒ…æœŸé—´åˆéœ€è¦åšä¸€äº›ä»€ä¹ˆå¤„ç†ã€‚</p>
<h1 id="jså…¼å®¹æ€§å¤„ç†">jså…¼å®¹æ€§å¤„ç†</h1>
<p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å†™äº†ä¸€æ®µç®€å•çš„jsä»£ç ï¼Œç”¨æ¥åšæ‰“åŒ…ç¤ºä¾‹ï¼Œå¹¶å¯¹jsçš„æ‰“åŒ…æœ‰äº†åˆæ­¥çš„äº†è§£ï¼š</p>
<pre><code class="language-js">const add = (x, y) =&gt; x + y
console.log(add(1, 2))
</code></pre>
<p>æˆ‘ä»¬æˆªå–æ‰“åŒ…åçš„ä»£ç ï¼š</p>
<pre><code class="language-js">eval(&quot;const add = (x, y) =&gt; x + y;\n\nconsole.log(add(1, 2));\n\n\n//# sourceURL=webpack:///./src/js/index.js?&quot;);
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰“åŒ…å‡ºæ¥çš„ä»£ç ä¸­ï¼Œ<code>add</code> çš„å®šä¹‰ä¾æ—§æ˜¯ä½¿ç”¨çš„ <code>const</code>ï¼Œè€Œä¸æ˜¯å…¼å®¹æ€§æœ€å¥½çš„ <code>var</code>ã€‚ç°é˜¶æ®µï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­åŸºæœ¬ä¸Šä½¿ç”¨çš„éƒ½æ˜¯ES6è¯­æ³•ï¼Œä½†æ˜¯ä¸€äº›ç‰ˆæœ¬è¾ƒä½çš„æµè§ˆå™¨å¹¶ä¸èƒ½å®Œå…¨å…¼å®¹ES6è¯­æ³•ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è¦å¯¹jsä»£ç åšå…¼å®¹æ€§å¤„ç†ã€‚<br><br>
è¦å¯¹jsåšå…¼å®¹æ€§å¤„ç†ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå·¥å…·ï¼š<code>babel-loader</code> ä»¥åŠ <code>@babel/core</code>ã€‚æˆ‘ä»¬å…ˆæ¥å®‰è£…ä¸‹è¿™ä¸¤ä¸ªå·¥å…·ï¼š</p>
<pre><code class="language-js">yarn add babel-loader @babel/core
</code></pre>
<p>å®‰è£…å®Œæˆåè¦æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°webpackäº”ä¸ªåŸºæœ¬æ¦‚å¿µä¸­çš„ <code>loader</code>ã€‚åœ¨ä¸Šä¸€ç¯‡é…ç½®çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åŠ å…¥ <code>loader</code> çš„é…ç½®ã€‚<code>loader</code> çš„ç›¸å…³é…ç½®å†™åˆ°é…ç½®æ–‡ä»¶çš„ <code>module</code> ä¸­ï¼š</p>
<pre><code class="language-js">// å¼•å…¥nodeçš„pathæ¨¡å—
const { resolve } = require('path')

module.exports = {
    // å…¥å£æ–‡ä»¶
    entry: './src/index.js',
    // æ–‡ä»¶è¾“å‡ºé…ç½®
    output: {
    	// è¾“å‡ºçš„æ–‡ä»¶åç§°
        // é…ç½®[name]åˆ™å–çš„æ˜¯å…¥å£æ–‡ä»¶çš„åç§°
    	filename: 'js/[name].js',
        // è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„
        // è¿™é‡Œæ˜¯æŒ‡è¾“å‡ºåˆ°æ ¹ç›®å½•ä¸‹çš„buildç›®å½•ä¸‹ï¼Œå¦‚æœå¯¹__dirnameä¸æ˜¯å¾ˆäº†è§£çš„å°ä¼™ä¼´å¯ä»¥å»nodejså®˜ç½‘äº†è§£ä¸€ä¸‹
        path: resolve(__dirname, 'build')
    },
    // ç”¨äºé…ç½®loader
    module: {
      rules: [
      	{
          // åŒ¹é….jsæ–‡ä»¶
          test: /\.js$/,
          // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥, ä¼šé™ä½æ‰“åŒ…çš„æ€§èƒ½
          exclude: /node_modules/, 
          // ä½¿ç”¨babel-loader
          loader: 'babel-loader',
          // loaderçš„ç›¸å…³é…ç½®
          options: {}
        }
      ]
    },
    // ç”¨äºé…ç½®æ’ä»¶ä¿¡æ¯
    plugins: [],
    // å¯ç”¨å¼€å‘æ¨¡å¼
    mode: 'development'
}
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬è¿è¡Œ <code>yarn build:dev</code> å‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šå‘ç°ç»“æœè·Ÿä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼ŒES6çš„ä»£ç å¹¶æ²¡æœ‰è¢«è½¬æ¢ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰â€œå‘Šè¯‰â€ <code>babel-loader</code> è¦æ€ä¹ˆå»åšå…¼å®¹æ€§å¤„ç†ã€‚é‚£å…·ä½“è¯¥æ€ä¹ˆå»å¤„ç†jsçš„å…¼å®¹æ€§é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚</p>
<h1 id="å¤„ç†jså…¼å®¹çš„ä¸‰ç§æ–¹å¼">å¤„ç†jså…¼å®¹çš„ä¸‰ç§æ–¹å¼</h1>
<p>é’ˆå¯¹jsçš„å…¼å®¹æ€§å¤„ç†ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¾æ¬¡æ¥äº†è§£ä¸€ä¸‹ã€‚</p>
<h2 id="æ–¹æ³•ä¸€åŸºæœ¬å…¼å®¹æ€§å¤„ç†">æ–¹æ³•ä¸€ï¼šåŸºæœ¬å…¼å®¹æ€§å¤„ç†</h2>
<p>åŸºæœ¬å…¼å®¹æ€§å¤„ç†æ˜¯æŒ‡å¯ä»¥å¤„ç†ä¸€äº›åŸºæœ¬çš„jså…¼å®¹æ€§é—®é¢˜ï¼Œæ¯”å¦‚jsä¸­çš„const/letå®šä¹‰çš„è½¬æ¢ï¼Œç®­å¤´å‡½æ•°çš„è½¬æ¢ç­‰ç­‰ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªå·¥å…·ï¼š<code>@babel/preset-env</code>ã€‚è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¤„ç†ä¸€äº›åŸºæœ¬çš„jså…¼å®¹æ€§é—®é¢˜ã€‚</p>
<pre><code class="language-js">yarn add -D @babel/preset-env
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨ <code>babel-loader</code> çš„ <code>options</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">/* ... */
module: {
  rules: [
    {
      // åŒ¹é….jsæ–‡ä»¶
      test: /\.js$/,
      // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥, ä¼šé™ä½æ‰“åŒ…çš„æ€§èƒ½
      exclude: /node_modules/, 
      // ä½¿ç”¨babel-loader
      loader: 'babel-loader',
      // loaderçš„ç›¸å…³é…ç½®
      options: {
        presets: ['@babel/preset-env']
      }
    }
  ]
},
/* ... */
</code></pre>
<p>é…ç½®å®Œæˆå ï¼Œæˆ‘é¢å†å»æ‰§è¡Œåˆšæ‰çš„æ‰“åŒ…å‘½ä»¤, ç„¶åæˆªå–å‡ºæˆ‘ä»¬æ‰€å†™çš„ä»£ç ï¼š</p>
<pre><code class="language-js">eval(&quot;var add = function add(x, y) {\n  return x + y;\n};\n\nconsole.log(add(1, 2));\n\n//# sourceURL=webpack:///./src/js/index.js?&quot;);
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä»£ç ä¸­çš„ <code>const</code> å£°æ˜å·²ç»è¢«è½¬æ¢æˆäº† <code>var</code>, è€ŒåŸå…ˆçš„ <code>ç®­å¤´å‡½æ•°</code> ä¹Ÿè¢«è½¬æ¢æˆäº†æ™®é€šçš„å‡½æ•°å½¢å¼ã€‚è¯´æ˜loaderå·²ç»ç”Ÿæ•ˆäº†ã€‚<br><br>
åœ¨ä»‹ç»è¿™ç§å…¼å®¹æ€§å¤„ç†æ–¹å¼çš„æ—¶å€™æœ‰æåˆ°è¿‡æ­¤ç§æ–¹å¼åªèƒ½å¤„ç†ä¸€äº›åŸºæœ¬çš„jsé—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­åŠ å…¥ä¸€äº›ç¨å¾®å¤æ‚çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ <code>Promise</code>ï¼Œ ç„¶åæ‰§è¡Œæ‰“åŒ…ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<pre><code class="language-js">const add = (x, y) =&gt; x + y;
console.log(add(1, 2));

const promiseHandle = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    resolve('å®Œæˆ');
  }, 1000)
})
console.log(promiseHandle);
</code></pre>
<p>æ‰§è¡Œæ‰“åŒ…å‘½ä»¤åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹æˆ‘ä»¬æ‰€å†™çš„ä»£ç ï¼š</p>
<pre><code class="language-js">eval(&quot;var add = function add(x, y) {\n  return x + y;\n};\n\nconsole.log(add(1, 2));\nvar promiseHandle = new Promise(function (resolv
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç±»ä¼¼äº <code>const</code> ä»¥åŠ <code>ç®­å¤´å‡½æ•°</code> çš„å®šä¹‰éƒ½è¢«è½¬æ¢æˆäº†ES5çš„è¯­æ³•ï¼Œä½†æ˜¯ <code>Promise</code> çš„å†…å®¹å¹¶æ²¡æœ‰è¢«è½¬æ¢ï¼Œè€Œä¸”ä»£ç ä¸­ä¹Ÿæ²¡æœ‰å…¶ä»–å¯¹ <code>Promise</code> è¿›è¡Œå¤„ç†çš„æ–¹æ³•ã€‚æ­¤æ—¶è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿè«æ…Œï¼Œæˆ‘ä»¬æ¥çœ‹ç¬¬äºŒç§jsçš„å…¼å®¹æ€§å¤„ç†æ–¹å¼ã€‚</p>
<h2 id="æ–¹æ³•äºŒbabelpolyfill">æ–¹æ³•äºŒï¼š@babel/polyfill</h2>
<p>å¦‚é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¦å¤–ä¸€ç§å·¥å…·ï¼š<code>@babel/polyfill</code>ã€‚è¿™ç§å…¼å®¹æ–¹æ³•æ¯”è¾ƒå…¨é¢ï¼Œå®ƒå¯ä»¥å¯¹ <strong>å…¨éƒ¨js</strong> åšå…¼å®¹æ€§å¤„ç†ã€‚</p>
<pre><code class="language-js">yarn add -D @babel/polyfill
</code></pre>
<p>è¿™ä¸ªå·¥å…·ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå®‰è£…å®Œæˆåï¼Œåªéœ€åœ¨éœ€è¦ä½¿ç”¨çš„jsæ–‡ä»¶ä¸­å¼•å…¥å³å¯ã€‚æˆ‘ä»¬åœ¨åˆšæ‰çš„jsæ–‡ä»¶åŸºç¡€ä¸Šï¼Œå¼•å…¥è¿™ä¸ªåŒ…ã€‚</p>
<pre><code class="language-js">import '@babel/polyfill'

const add = (x, y) =&gt; x + y;
console.log(add(1, 2));

const promiseHandle = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; {
    resolve('å®Œæˆ');
  }, 1000)
})
console.log(promiseHandle);
</code></pre>
<p>å†æ¬¡æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰“å¼€æ‰“åŒ…ä¹‹åçš„jsæ–‡ä»¶ï¼Œä¼šå‘ç°jsæ–‡ä»¶ä¸­å¼•å…¥äº†å¤§é‡çš„polyfillæ¥å¯¹jså…¼å®¹æ€§çš„å¤„ç†ï¼Œå…¶ä¸­å°±æœ‰å¯¹Promiseçš„å…¼å®¹å¤„ç†(ç”±äºå†…å®¹å¤ªé•¿ï¼Œæ­¤å¤„å°±ä¸è´´ä»£ç äº†ï¼Œå»ºè®®å°ä¼™ä¼´ä»¬åŠ¨æ‰‹è¯•ä¸€ä¸‹~)ã€‚æ­¤ç§æ–¹å¼å¯ä»¥è§£å†³æˆ‘ä»¬ç¬¬ä¸€ç§å…¼å®¹æ€§å¤„ç†ä¸­çš„é—®é¢˜ã€‚<br><br>
ä½†æ˜¯ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼åˆä¼šå¼•å‘å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹æ‰“åŒ…åçš„æ–‡ä»¶è¾“å‡ºï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/816a05df0ea642a38d0367050c9552ed~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
<p>ä¸éš¾å‘ç°ï¼Œç”±äºå¼•å…¥äº†å¤§é‡çš„polyfillï¼Œå¯¼è‡´æˆ‘ä»¬åŸå…ˆä»…ä»…åªæœ‰å‡ kçš„æ–‡ä»¶ï¼Œè†¨èƒ€åˆ°äº†511k, å› ä¸ºå¼•å…¥çš„polyfillå›Šæ‹¬äº†æ‰€æœ‰çš„å…¼å®¹æ€§å¤„ç†ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æ„¿æ„çœ‹åˆ°çš„ã€‚è€Œä¸”äº‹å®ä¸Šæˆ‘ä»¬ä¹Ÿç”¨ä¸åˆ°è¿™ä¹ˆå¤šçš„å…¼å®¹æ€§å¤„ç†ã€‚é‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹ç¬¬ä¸‰ç§å…¼å®¹æ€§å¤„ç†æ–¹æ¡ˆã€‚</p>
<h2 id="æ–¹æ³•ä¸‰core-js">æ–¹æ³•ä¸‰ï¼šcore-js</h2>
<p>è¯´ç™½äº†ï¼Œè¦è§£å†³æ–¹æ³•äºŒä¸­çš„å¼Šç«¯ï¼Œæ ¸å¿ƒæ€è·¯å°±æ˜¯ <code>æŒ‰éœ€å¼•å…¥</code>ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ° <code>code-js</code>ã€‚å…¶å®åœ¨æ–¹æ³•äºŒä¸­ç”¨åˆ°çš„ <code>@babel/polyfill</code>ä¸­ä¹Ÿæœ‰å®ƒçš„å½±å­, æœ‰å…´è¶£çš„å°ä¼™ä¼´ä»¬å¯ä»¥å»æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ä¸­æ‰¾æ‰¾çœ‹~è¿™é‡Œæˆ‘ä»¬å•ç‹¬å®‰è£…ä¸€ä»½ <code>core-js</code>:</p>
<pre><code class="language-js">yarn add -D core-js
</code></pre>
<p>æƒ³è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦å¯¹åˆšæ‰çš„ <code>babel-loader</code> é…ç½®å†è¿›è¡Œä¸€äº›æ”¹é€ ï¼š</p>
<pre><code class="language-js">/* ... */
module: {
  rules: [
    {
      // åŒ¹é….jsæ–‡ä»¶
      test: /\.js$/,
      // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥, ä¼šé™ä½æ‰“åŒ…çš„æ€§èƒ½
      exclude: /node_modules/, 
      // ä½¿ç”¨babel-loader
      loader: 'babel-loader',
      // loaderçš„ç›¸å…³é…ç½®
      options: {
        &quot;presets&quot;: [
          [
            &quot;@babel/preset-env&quot;,
            {
              // æŒ‡å®šæŒ‰éœ€åŠ è½½
              &quot;useBuiltIns&quot;: &quot;usage&quot;,
              // æŒ‡å®šcore-jsçš„ç‰ˆæœ¬
              &quot;corejs&quot;: {
                &quot;version&quot;: 3
              },
              // æŒ‡å®šå…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬
              &quot;targets&quot;: {
                &quot;chrome&quot;: &quot;60&quot;,
                &quot;firefox&quot;: &quot;60&quot;,
                &quot;ie&quot;: &quot;9&quot;,
                &quot;safari&quot;: &quot;10&quot;,
                &quot;edge&quot;: &quot;17&quot;
              }
            }
          ]
        ]
      }
    }
  ]
},
/* ... */
</code></pre>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šäº†æŒ‰éœ€åŠ è½½ï¼ŒæŒ‡å®šäº†coreJsçš„ç‰ˆæœ¬æ˜¯3ï¼ŒæŒ‡å®šäº†éœ€è¦å…¼å®¹çš„å…·ä½“çš„æµè§ˆå™¨çš„ç‰ˆæœ¬ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œéœ€è¦æŠŠç¬¬äºŒç§æ–¹å¼ä¸­å¼•å…¥çš„@babel/polyfillæ³¨é‡Šæ‰ï¼Œä¸¤è€…ä¸å¯å…±ç”¨ï¼ï¼</p>
</blockquote>
<p>ç„¶åæˆ‘ä»¬å†æ¬¡è¿›è¡Œæ‰“åŒ…ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c69c325e1b14ecb9a607f7e39156d07~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
<p>å†æ¬¡æ‰“åŒ…åæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒPromiseçš„å…¼å®¹æ€§å¤„ç†ä¼šè¢«å¼•å…¥è¿›æ¥ï¼Œå¹¶ä¸”æ–‡ä»¶å¤§å°ä¹Ÿç¼©å°è‡³105k, ç›¸è¾ƒäºç¬¬äºŒç§æ–¹å¼ï¼Œæ˜¾ç„¶æ­¤ç§æ–¹å¼æ›´ä½³~å¦‚æœæœ‰å°ä¼™ä¼´è§‰å¾—è¿™æ ·é…ç½®æ˜¾å¾—ä»£ç æœ‰äº›å†—ä½™ï¼Œä¸å¤Ÿä¼˜é›…ï¼Œæˆ‘ä»¬ä¹Ÿå¯å°† <code>presets</code> ä¸­é…ç½®çš„å†…å®¹ç§»åŠ¨åˆ°æ ¹ç›®å½•çš„ <code>.babelrc</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-json">{
  &quot;presets&quot;: [
    [
      &quot;@babel/preset-env&quot;,
      {
        // æŒ‡å®šæŒ‰éœ€åŠ è½½
        &quot;useBuiltIns&quot;: &quot;usage&quot;,
        // æŒ‡å®šcore-jsçš„ç‰ˆæœ¬
        &quot;corejs&quot;: {
          &quot;version&quot;: 3
        },
        // æŒ‡å®šå…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬
        &quot;targets&quot;: {
          &quot;chrome&quot;: &quot;60&quot;,
          &quot;firefox&quot;: &quot;60&quot;,
          &quot;ie&quot;: &quot;9&quot;,
          &quot;safari&quot;: &quot;10&quot;,
          &quot;edge&quot;: &quot;17&quot;
        }
      }
    ]
  ]
}
</code></pre>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œjsçš„æ‰“åŒ…æ–¹å¼ä»¥åŠå¤„ç†å…¼å®¹çš„å‡ ç§æ–¹å¼éƒ½å·²ç»ä»‹ç»å®Œæ¯•ã€‚å½“ç„¶loaderçš„é…ç½®ä¸æ­¢è¿™äº›ï¼Œåœ¨æ—¥åçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦å»æŸ¥è¯¢å¯¹åº”loaderçš„æ–‡æ¡£ï¼Œæ¥å®šåˆ¶åŒ–é€‚åˆè‡ªå·±é¡¹ç›®çš„é…ç½®ã€‚<br><br>
å¤„ç†å®Œjsçš„å…¼å®¹æ€§é—®é¢˜ï¼Œé‚£ä¹ˆå¼€å‘å›¢é˜Ÿåœ¨æ—¥å¸¸å¼€å‘ä¸­çš„jsé£æ ¼ç»Ÿä¸€åŒ–åˆè¯¥æ€ä¹ˆå»å¤„ç†ï¼Ÿä¸€äº›å®¹æ˜“çŠ¯çš„ä½çº§é”™è¯¯åˆè¯¥æ€ä¹ˆå»é¿å…å‘¢ï¼Ÿä¸‹ä¸€ç« èŠ‚æˆ‘ä»¬å°±æ¥ä»‹ç»å¤„ç†è¿™äº›é—®é¢˜çš„æ–¹æ³•~<br><br>
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90b2c8f2bb0447828ffbea8e6eab02a6~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°å››ï¼šeslintè¯­æ³•æ£€æŸ¥]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-si-eslint-yu-fa-jian-cha/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-si-eslint-yu-fa-jian-cha/">
        </link>
        <updated>2021-12-24T08:42:08.000Z</updated>
        <content type="html"><![CDATA[<p>åœ¨<a href="https://juejin.cn/post/6903910160184868878">ä¸Šä¸€èŠ‚</a>æ–‡ç« æœ«å°¾ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>æˆ‘ä»¬è¦å¦‚ä½•æ§åˆ¶ä»£ç é£æ ¼çš„ç»Ÿä¸€ï¼Œé¿å…ä¸€äº›ä½çº§é”™è¯¯</strong>ã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„æ–¹æ³•ï¼š<strong>eslintè¯­æ³•æ£€æŸ¥</strong>ã€‚</p>
<h1 id="èƒŒæ™¯">èƒŒæ™¯</h1>
<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯å¤šäººåˆä½œã€‚ä¸ºäº†ä¿è¯ä»£ç çš„ç»Ÿä¸€å’Œè§„èŒƒï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©eslintå»å®Œæˆã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°<code>eslint-loader</code> ä»¥åŠ <code>eslint</code>ã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D eslint eslint-loader
</code></pre>
<h3 id="åŸºæœ¬é…ç½®">åŸºæœ¬é…ç½®</h3>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨webpack.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">/* ... */
module: {
  rules: [
    {
        test: /\.js$/,
        exclude: /node_modules/, // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥
        loader: 'eslint-loader',
        options: {}
    }
  ]
}
/* ... */
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œeslintè¿˜éœ€è¦çŸ¥é“å…·ä½“çš„è§„åˆ™æ˜¯ä»€ä¹ˆã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­é…ç½® <code>eslintConfig</code> å±æ€§ï¼Œæˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ  <code>.eslintrc</code> æ–‡ä»¶æ¥é…ç½®eslintçš„è§„åˆ™ã€‚<br><br>
ä½†æ˜¯æ‰‹åŠ¨é…ç½®è§„åˆ™æ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹çš„å·¥å…·æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>airbnb</code> çš„é…ç½®ã€‚<br><br>
æƒ³è¦ä½¿ç”¨airbnbçš„eslintè§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…å‡ ä¸ªæ’ä»¶ï¼š<code>eslint-config-arbnb-base</code> ä¸ <code>eslint-plugin-import</code>ã€‚</p>
<pre><code class="language-js">yarn add -D eslint-config-airbnb-base  eslint-plugin-import
</code></pre>
<p>ä¹‹ååœ¨ <code>package.json</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">&quot;eslintConfig&quot;: {
  &quot;extends&quot;: &quot;airbnb-base&quot;
}
</code></pre>
<p>æˆ–è€…åœ¨ <code>.eslintrc</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-js"> &quot;extends&quot;: &quot;airbnb-base&quot;
</code></pre>
<p>è¿™æ ·å°±ä¼šç»§æ‰¿airbnbçš„eslinté…ç½®ã€‚å†æ¬¡æ‰“åŒ…æˆ–è€…è¿è¡Œæ—¶ï¼Œæ§åˆ¶å°å°±ä¼šç»™å‡ºç›¸åº”çš„æŠ¥é”™æç¤ºï¼š<br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d666da14a1b644da8d910166ffd750a3~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></p>
<blockquote>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ  <code>VScode</code>, æˆ–è€…å°ä¼™ä¼´ä»¬æ‰€ç”¨çš„å…¶ä»–IDEçš„ <code>ESlintæ’ä»¶</code> å»è¾…åŠ©æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ã€‚åœ¨è¿™é‡Œï¼Œç¬”è€…ä½¿ç”¨çš„æ˜¯ <code>VScode</code>ï¼Œå¦‚æœæœ‰è·Ÿç¬”è€…ä¸€æ ·ä½¿ç”¨è¿™ä¸ªIDEçš„å°ä¼™ä¼´ï¼Œæ¨èå®‰è£…è¿™ä¸ªæ’ä»¶ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9eae5c1e455844d3b3ab03fdefe8bd0f~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
<p>å®‰è£…å¹¶å¯ç”¨è¿™ä¸ªæ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°eslintç»™å‡ºçš„ç›¸åº”æç¤ºï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7187fa4a4f9473d801b9d3d439709bb~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
<p>å½“æˆ‘ä»¬å°†å…‰æ ‡ç§»åŠ¨è‡³æ³¢æµªçº¿ä¸Šæ—¶ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­ç‚¹å‡» <code>Quick Fix</code>é€‰é¡¹åï¼Œæ’ä»¶ä¹Ÿä¼šæä¾›ä¸€äº›å¿«é€Ÿä¿®å¤çš„æ–¹æ³•, ä½¿å¾—ä¿®å¤æ›´åŠ ä¾¿æ·ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/438ed3f9940c41abad755558f8411fbb~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
</blockquote>
<h3 id="è‡ªåŠ¨ä¿®å¤é…ç½®">è‡ªåŠ¨ä¿®å¤é…ç½®</h3>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªåŠ¨ä¿®å¤è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€é¡¹é…ç½®ï¼š</p>
<pre><code class="language-js">module: {
  rules: [
    {
      test: /\.js$/,
      exclude: /node_modules/, // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥
      loader: 'eslint-loader',
      options: {
          fix: true // è‡ªåŠ¨ä¿®å¤ä¸€äº›eslinté—®é¢˜
      }
    }
  ]
}
</code></pre>
<p>è¿™æ ·åˆ™ä¼šè‡ªåŠ¨ä¿®å¤ä¸€äº›é—®é¢˜ã€‚ä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„é—®é¢˜éƒ½ä¼šè¢«è‡ªåŠ¨ä¿®å¤ï¼Œæœ‰ä¸€äº›ä»éœ€è¦æ‰‹åŠ¨ä¿®å¤ï¼š<br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96d4612c60024378a027b819b8124953~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"><br>
æ­¤æ—¶æˆ‘ä»¬åªè¦æ ¹æ®ç»™å‡ºçš„æç¤ºé€ä¸€ä¿®å¤å³å¯ã€‚</p>
<h3 id="é…åˆbabel-loaderä¸€èµ·ä½¿ç”¨">é…åˆbabel-loaderä¸€èµ·ä½¿ç”¨</h3>
<p>è¡Œæ–‡è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº† <code>ESlint</code> æ€ä¹ˆå»ä½¿ç”¨ã€‚é‚£ä¹ˆåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¦‚æœå…ˆå¯¹æ‰€å†™çš„ä»£ç åšè¿‡æ£€æŸ¥ï¼Œç„¶åå†ä½¿ç”¨ <code>babel-loader</code> è½¬æ¢ä¸€ä¸‹ï¼Œå²‚ä¸æ˜¯ç¾æ»‹æ»‹ï¼Ÿï¼ˆæ‰‹åŠ¨æ»‘ç¨½ï¼‰<br><br>
é‚£å¦‚ä½•æ‰èƒ½ä¸ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„ <code>babel-loader</code> ä¸€èµ·å»ä½¿ç”¨å‘¢ï¼Ÿå½“ç„¶æ˜¯ä¸€èµ·å†™åˆ°loaderé…ç½®é‡Œå°±å¥½å•¦~è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼š<strong>loaderçš„æ‰§è¡Œé¡ºåºæ˜¯è‡ªå·¦å‘å³ï¼Œè‡ªä¸‹å‘ä¸Šçš„ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯æŒ‰ç…§ä»åå¾€å‰çš„é¡ºåºæ‰§è¡Œ</strong>ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦å…ˆæ£€æŸ¥ä»£ç ï¼Œä¹‹åå†å¯¹ä»£ç æ‰“åŒ…çš„è¯ï¼Œé‚£ä¹ˆ <code>eslint-loader</code> éœ€è¦é…ç½®åœ¨ <code>babel-loader</code> ä¹‹åï¼š</p>
<pre><code class="language-js">// è¿™é‡Œç”±äºéƒ½æ˜¯åŒ¹é…çš„jsæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¸¤ä¸ªloaderå†™åœ¨ä¸€èµ·
// æ³¨æ„å†™æ³•çš„æ”¹å˜ï¼ŒåŸå…ˆç›´æ¥æ˜¯å†™çš„loaderï¼Œç°åœ¨æ”¹ä¸ºuseæ•°ç»„çš„å½¢å¼
module: {
  rules: [
    {
      // åŒ¹é….jsæ–‡ä»¶
      test: /\.js$/,
      // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥, ä¼šé™ä½æ‰“åŒ…çš„æ€§èƒ½
      exclude: /node_modules/,
      use: [
      	// ä½¿ç”¨ babel-loader
        {
          loader: 'babel-loader',
          // loaderçš„ç›¸å…³é…ç½®
          options: {
            presets: ['@babel/preset-env'],
          },
        }, 
        // ä½¿ç”¨ eslint-loader, é…ç½®å†™åœ¨ babel-loaderä¹‹åï¼Œä¼˜å…ˆæ‰§è¡Œ
        {
          loader: 'eslint-loader',
          options: {
            fix: true,
          },
        },
      ],
    },
  ],
},
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å…ˆåšä»£ç æ£€æŸ¥ï¼Œåè¿›è¡Œè¯­æ³•è½¬æ¢å•¦~ <br></p>
<h1 id="é¢„å‘Š">é¢„å‘Š</h1>
<p>ç»“åˆä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬ä»‹ç»äº†webpackåœ¨å¯¹jsæ–‡ä»¶åšå¤„ç†æ—¶çš„ä¸€äº›åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬ <code>è¯­æ³•è½¬æ¢</code> ä»¥åŠ <code>è¯­æ³•æ£€æŸ¥</code>ã€‚ä»‹ç»å®Œäº†jsï¼Œåœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹webpackåœ¨å¤„ç†cssæ–‡ä»¶çš„æ—¶å€™åˆä¼šåšå“ªäº›åŸºæœ¬æ“ä½œå‘¢ï¼Ÿæ‹­ç›®ä»¥å¾…å§~</p>
<figure data-type="image" tabindex="4"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd370ca53e2c47eeb502d251080d7f90~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°äº”ï¼šæ‰“åŒ…cssæ–‡ä»¶]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-wu-da-bao-css-wen-jian/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-wu-da-bao-css-wen-jian/">
        </link>
        <updated>2021-12-24T08:41:39.000Z</updated>
        <content type="html"><![CDATA[<p>ä¸Šä¸¤èŠ‚æˆ‘ä»¬äº†è§£äº†webpackæ˜¯å¦‚ä½•æ‰“åŒ…jsæ–‡ä»¶çš„ï¼Œä»¥åŠåœ¨æ‰“åŒ…jsæ–‡ä»¶è¿‡ç¨‹ä¸­è¿˜åšäº†å…¼å®¹æ€§å¤„ç†å’Œè¯­æ³•æ£€æŸ¥çš„æ“ä½œã€‚è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸‹webpackæ˜¯å¦‚ä½•å¤„ç†cssæ–‡ä»¶çš„ã€‚<br><br>
æˆ‘ä»¬çŸ¥é“ï¼Œwebpackåªèƒ½è¯†åˆ«jsçš„å†…å®¹ï¼Œæ˜¾ç„¶ç›´æ¥è®©webpackè¯†åˆ«cssæ–‡ä»¶æ˜¯ä¸å¯è¡Œçš„ã€‚é‚£è¦å¦‚ä½•å°†cssæ–‡ä»¶ä¸­çš„å†…å®¹è½¬æ¢æˆwebpackå¯ä»¥è¯†åˆ«çš„jså†…å®¹å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬åˆéœ€è¦å€ŸåŠ©â€œç¿»è¯‘å®˜â€ <code>loader</code> çš„å¸®åŠ©äº†ã€‚<br><br>
è¦æƒ³å°†cssè½¬æ¢æˆjsï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªloaderï¼š<code>style-loader</code> ä»¥åŠ <code>css-loader</code>ã€‚æˆ‘ä»¬å…ˆæ¥ç®€å•çœ‹ä¸‹è¿™ä¸¤ä¸ªloaderçš„ä½œç”¨ï¼š</p>
<blockquote>
<p>style-loaderï¼šç”Ÿæˆstyleæ ‡ç­¾ ï¼Œå°†jsä¸­çš„csså†…å®¹å†™å…¥styleæ ‡ç­¾ä¸­ï¼Œå¹¶å°†å…¶æ’å…¥headæ ‡ç­¾ä¸­ã€‚<br><br>
css-loaderï¼šå°†csså†…å®¹å˜æˆ <code>commonjs</code> æ¨¡å—åŠ è½½åˆ°jsä¸­ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<h1 id="å®‰è£…">å®‰è£…</h1>
<pre><code class="language-js">yarn add -D style-loader css-loader
</code></pre>
<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>
<p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°loaderçš„æ‰§è¡Œæ˜¯æœ‰é¡ºåºçš„ï¼Œå³<strong>æŒ‰ç…§ä»åå¾€å‰çš„é…ç½®é¡ºåºæ‰§è¡Œ</strong>ã€‚æ ¹æ®ä¸Šé¢å¯¹ä¸¤ä¸ªloaderçš„æè¿°ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé€šè¿‡ <code>css-loader</code> å°†csså†…å®¹è½¬æ¢æˆjsï¼Œç„¶åé€šè¿‡ <code>style-loader</code> å°†jsä¸­çš„csså†…å®¹å†™å…¥åˆ°styleæ ‡ç­¾ä¸­ã€‚æ‰€ä»¥loaderçš„é¡ºåºåº”è¯¥æ˜¯ <code>css-loader</code> å…ˆäº <code>style-loader</code> æ‰§è¡Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>webpack.config.js</code> ä¸­æ·»åŠ çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')

module.exports = {
  // å…¥å£æ–‡ä»¶
  entry: './src/index.js',
  // è¾“å‡º
  output: {
    filename: '[name].js',
    //   __dirnameè¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
    path: resolve(__dirname, 'build'),
  },
  // loaderé…ç½®
  module: {
    rules: [
      {
        test: /\.css$/, // åŒ¹é…ä»¥cssç»“å°¾çš„æ–‡ä»¶
        // ä½¿ç”¨å“ªäº›loaderåŒ…å¤„ç†ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»åå¾€å‰
        use: [
          // ç”Ÿæˆstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºå†™å…¥å…¶ä¸­ï¼Œå¹¶æ·»åŠ åˆ°headæ ‡ç­¾ä¸­
          'style-loader',
          // å°†cssçš„å†…å®¹å˜æˆcommonjsæ¨¡å—åŠ è½½åˆ°jsä¸­ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²
          'css-loader'
        ]
      }
    ]
  },
  // æ’ä»¶
  plugins: [],
  // æ¨¡å¼ development / production
  mode: 'development'
}
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ªç®€å•çš„cssæ–‡ä»¶ï¼Œä¿å­˜åœ¨ <code>src/css/index.css</code>ä¸­ï¼š</p>
<pre><code class="language-css">html, body {
  padding: 0;
  margin: 0;
  background: #ff5512;
}
</code></pre>
<p>ç„¶ååœ¨å…¥å£ <code>index.js</code> æ–‡ä»¶ä¸­å¼•å…¥ <code>index.css</code> æ–‡ä»¶ï¼Œä¹‹åæ‰§è¡Œæ‰“åŒ…æ“ä½œã€‚åœ¨æ‰“åŒ…ç”Ÿæˆçš„jsæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ° <code>index.css</code> ä¸­çš„å†…å®¹ï¼š<br>
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db759eb2c3bf4db4b38563e9a3f2680b~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"><br>
ä¹‹åï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>index.html</code> æ–‡ä»¶ï¼Œå°†æ‰“åŒ…ä¹‹åçš„jsæ–‡ä»¶å¼•å…¥é¡µé¢ï¼Œå³å¯ä»¥çœ‹åˆ°æ ·å¼ç”Ÿæ•ˆã€‚</p>
<h1 id="sass-loader">sass-loader</h1>
<p>åœ¨ç°é˜¶æ®µé¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°è¯¸å¦‚ <code>sass</code>ã€<code>less</code>ã€<code>stylus</code>ç­‰ç­‰çš„ <code>cssé¢„å¤„ç†å™¨</code>ã€‚é‚£åº”è¯¥å¦‚ä½•è®©webpackå¯ä»¥è¯†åˆ«å‡ºæˆ‘ä»¬ä½¿ç”¨è¿™äº› <code>cssé¢„å¤„ç†å™¨</code> å†™å‡ºçš„cssä»£ç å‘¢ï¼Ÿ<br><br>
å…¶å®ä¹Ÿå¹¶ä¸å¤æ‚ï¼ŒåŸºæœ¬çš„æ€è·¯å°±æ˜¯<strong>ä½¿ç”¨å¯¹åº” <code>cssé¢„å¤„ç†å™¨</code> çš„ <code>loader</code>ï¼Œå°†ä»£ç è½¬æ¢ä¸ºæ™®é€šçš„cssä»£ç ï¼Œç„¶åå†é€šè¿‡ <code>css-loader</code> ä¸ <code>style-loader</code> å°†cssè½¬æ¢æˆjsä»£ç ï¼Œå¹¶æ’å…¥åˆ°é¡µé¢çš„styleæ ‡ç­¾ä¸­å»ã€‚</strong><br><br>
æœ¬æ–‡ä¸­ä»¥ <code>sass</code> ä¸ºä¾‹ã€‚æƒ³è¦å°† <code>sass</code> ä»£ç è½¬æ¢ä¸ºæ™®é€šçš„cssä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸¤ä¸ªå·¥å…·ï¼š</p>
<pre><code class="language-js">yarn add -D sass sass-loader
</code></pre>
<p>ä¹‹ååªéœ€è¦åœ¨ <code>webpack.config.js</code> æ–‡ä»¶ä¸­åŠ å…¥ç›¸åº”çš„loaderé…ç½®ï¼Œå¹¶å°†æ–‡ä»¶åŒ¹é…çš„æ­£åˆ™è°ƒæ•´ä¸‹å³å¯ï¼š</p>
<pre><code class="language-js">/* ... */
// loaderé…ç½®
module: {
  rules: [
    {
      test: /\.s[ac]ss$/, // åŒ¹é…ä»¥.scssæˆ–è€….sassç»“å°¾çš„æ–‡ä»¶
      // ä½¿ç”¨å“ªäº›loaderåŒ…å¤„ç†ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»åå¾€å‰
      use: [
        // ç”Ÿæˆstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºå†™å…¥å…¶ä¸­ï¼Œå¹¶æ·»åŠ åˆ°headæ ‡ç­¾ä¸­
        'style-loader',
        // å°†cssçš„å†…å®¹å˜æˆcommonjsæ¨¡å—åŠ è½½åˆ°jsä¸­ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²
        'css-loader',
        // å°†ä½¿ç”¨sassç¼–å†™çš„ä»£ç è½¬æ¢ä¸ºæ™®é€šçš„cssä»£ç  
        'sass-loader'
      ]
    }
  ]
},
/* ... */
</code></pre>
<p>ä¿®æ”¹å®Œé…ç½®åï¼Œæˆ‘ä»¬å°† <code>index.css</code> æ–‡ä»¶ä¿®æ”¹ä¸º <code>index.scss</code>ï¼Œå¹¶åœ¨å…¶ä¸­åŠ å…¥sassçš„è¯­æ³•ï¼š</p>
<pre><code class="language-css">html, body {
  padding: 0;
  margin: 0;
  background: #ff5512;
  div {
    background: blue
  }
}
</code></pre>
<p>ç„¶åè¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œæ‰“å¼€æ‰“åŒ…åçš„jsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°sassçš„å†…å®¹ä¼šè¢«è½¬æ¢ä¸ºæ™®é€šçš„csså†…å®¹ï¼š<br>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af9c3a2e6a724c1094fa9048b93a37b2~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></p>
<h1 id="é¢„å‘Š">é¢„å‘Š</h1>
<p>è¿™ä¸€èŠ‚æˆ‘ä»¬çŸ¥é“äº†åœ¨webpackä¸­å¦‚ä½•å¯¹cssæ–‡ä»¶åšå¤„ç†ï¼Œä»¥åŠåœ¨ä½¿ç”¨ <code>cssé¢„å¤„ç†å™¨</code> æ—¶å¦‚ä½•å¯¹å…¶å†…å®¹åšç›¸åº”çš„è½¬æ¢ã€‚<br><br>
ä½†æ˜¯cssçš„å†…å®¹åœ¨è½¬æ¢è¿‡åï¼Œä¾æ—§å­˜åœ¨äºjsæ–‡ä»¶ä¸­ã€‚éšç€æˆ‘ä»¬é¡¹ç›®å¼€å‘çš„æ¨è¿›ï¼Œæ‰“åŒ…å‡ºæ¥çš„jsæ–‡ä»¶ä¼šæ„ˆå‘åºå¤§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé’ˆå¯¹äºä¸åŒå¹³å°ä»¥åŠä¸åŒè®¾å¤‡ï¼Œæˆ‘ä»¬æ‰€å†™çš„cssä»£ç ä¹Ÿéœ€è¦åšç›¸åº”çš„å…¼å®¹æ€§å¤„ç†ã€‚<br><br>
é’ˆå¯¹ä»¥ä¸Šçš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸‹èŠ‚ä¸€èµ·æ¥çœ‹ä¸‹å¦‚ä½•å°†jsä¸­çš„cssä»£ç æå–æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œå¹¶å¯¹å…¶åšç›¸åº”çš„å…¼å®¹æ€§ä¸ä»£ç å‹ç¼©å¤„ç†ã€‚æ•¬è¯·æœŸå¾…~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°å…­ï¼šcsså…¼å®¹æ€§å¤„ç†ä»¥åŠæ–‡ä»¶æå–]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-liu-css-jian-rong-xing-chu-li-yi-ji-wen-jian-ti-qu/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-liu-css-jian-rong-xing-chu-li-yi-ji-wen-jian-ti-qu/">
        </link>
        <updated>2021-12-24T08:40:37.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://juejin.cn/post/6905647041368555527">ä¸Šä¸€èŠ‚</a>æˆ‘ä»¬å­¦ä¹ åˆ°webpackä¸­å¦‚ä½•å¤„ç†cssæ–‡ä»¶ï¼Œä»¥åŠåœ¨ä½¿ç”¨äº† <code>cssé¢„å¤„ç†å™¨</code> ååˆæ”¹æ€ä¹ˆå¤„ç†ã€‚æ–‡ç« æœ«å°¾æˆ‘ä»¬ä¹Ÿæåˆ°äº†ä¸¤ä¸ªéœ€è¦è§£å†³çš„é—®é¢˜ï¼š</p>
<blockquote>
<ol>
<li>éšç€é¡¹ç›®æ¨è¿›ï¼Œä¸€ç›´å°†csså†™å…¥jsä¸­ä¼šå¯¼è‡´æ–‡ä»¶é€æ¸è‡ƒè‚¿ï¼›</li>
<li>csså…¼å®¹æ€§<br>
è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†é’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜æå‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
</blockquote>
<h1 id="cssæ–‡ä»¶æå–">cssæ–‡ä»¶æå–</h1>
<p>ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä½¿ç”¨åˆ°äº† <code>style-loader</code> ã€ <code>css-loader</code> ä»¥åŠ <code>sass-loader</code> ä¸‰ç§loaderï¼Œåœ¨è¿™ä¸‰ç§loaderçš„ååŒä½œç”¨ä¸‹ï¼Œ.scssæ–‡ä»¶å…ˆé€šè¿‡sass-loaderè½¬æˆæ™®é€šçš„cssæ–‡ä»¶ï¼Œå†é€šè¿‡css-loaderå°†cssè½¬æ¢æˆcommonjsæ¨¡å—å¹¶æ‰“åŒ…åˆ°jsä¸­ï¼Œæœ€åé€šè¿‡style-loaderå°†jsæ–‡ä»¶ä¸­çš„cssæ ·å¼åŠ è½½åˆ°headé‡Œçš„styleæ ‡ç­¾ä¸­å»ã€‚<br><br>
é™¤äº†ä¸Šé¢æåˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜å¤–ï¼Œè¿™æ ·ä¹Ÿä¼šå¯¼è‡´é¡µé¢ä¼šæœ‰çŸ­æš‚çš„é”™ä¹±ï¼Œç„¶åç­‰jsæ–‡ä»¶åŠ è½½å®Œæˆåï¼Œé¡µé¢æ ·å¼æ‰ä¼šæ¢å¤æ­£å¸¸ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œç”¨æˆ·çš„ä½“éªŒä¹Ÿéå¸¸ä¸å¥½ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†jsä¸­çš„csså•ç‹¬æå–å‡ºæ¥ï¼Œä½œä¸ºcssæ–‡ä»¶å¼•å…¥é¡µé¢ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è€Œä¸”jsçš„æ–‡ä»¶ä½“ç§¯ä¼šæ›´å°ï¼Œä¸Šè¿°ç¬¬ä¸€ä¸ªé—®é¢˜ä¹Ÿèƒ½è¢«è§£å†³ã€‚</p>
<h2 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</h2>
<p>è¦å°†jsä¸­çš„cssæå–æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ª <code>æ’ä»¶</code> ï¼š<code>mini-css-extract-plugin</code>ã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D mini-css-extract-plugin
</code></pre>
<h3 id="é…ç½®">é…ç½®</h3>
<p>å‰å‡ èŠ‚æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„æ˜¯webpackä¸­çš„ <code>loader</code> ï¼Œä¸ <code>loader</code> ä¸åŒçš„æ˜¯ï¼Œ<code>æ’ä»¶</code> åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå¼•å…¥è¿›æ¥ï¼Œç„¶ååœ¨wbepack.config.jsçš„ <code>plugin</code> å­—æ®µä¸­æ·»åŠ é…ç½®ï¼š</p>
<pre><code class="language-js">const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
    /* ... */
    plugins: [
    	new MiniCssExtractPlugin({
         filename: 'css/index.[contenthash:10].css',
       }),
    ]
    /* ... */
}
</code></pre>
<p>å…¶ä¸­ï¼Œåœ¨å®ä¾‹åŒ–è¿™ä¸ªæ’ä»¶æ—¶ï¼Œå¯ä»¥ä¼ å…¥é…ç½®ã€‚ä¸Šè¿°é…ç½®ä¸­æŒ‡å®šäº†æå–å‡ºcssæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ã€‚<br><br>
åœ¨é…ç½®å®Œæ’ä»¶ä¹‹åï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„å¤„ç†æ–¹å¼ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯<strong>é€šè¿‡ <code>style-loader</code> å°†cssçš„å†…å®¹æ’å…¥åˆ°é¡µé¢çš„styleæ ‡ç­¾ä¸­</strong>ã€‚è€Œç°åœ¨æˆ‘ä»¬è¦å®ç°çš„æ˜¯<strong>å°†cssæ–‡ä»¶å•ç‹¬æå–å‡ºæ¥</strong>ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† <code>style-loader</code> æ›¿æ¢æ‰ã€‚<br><br>
åœ¨ <code>mini-css-extract-plugin</code> æ’ä»¶å†…éƒ¨æä¾›äº†ä¸€ä¸ªç”¨äºæå–cssçš„loader: <code>MiniCssExtractPlugin.loader</code>ï¼Œæˆ‘ä»¬åªéœ€è¦å°† <code>style-loader</code> æ›¿æ¢ä¸º <code>MiniCssExtractPlugin.loader</code> å³å¯ï¼š</p>
<pre><code class="language-js">const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
    /* ... */
    module: {
        rules: [
            /* ... */
            {
              test: /\.s[ac]ss/,
              exclude: /(node_modules|build)/,
              use: [
                MiniCssExtractPlugin.loader,,
                'css-loader',
                'sass-loader'
              ],
            },
        ]
    },
    plugins: [
    	new MiniCssExtractPlugin({
         filename: 'css/index.[contenthash:10].css',
       }),
    ]
    /* ... */
}
</code></pre>
<h1 id="csså…¼å®¹æ€§å¤„ç†">csså…¼å®¹æ€§å¤„ç†</h1>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¸ºäº†è®©cssæ ·å¼èƒ½å¤Ÿé€‚ç”¨äºå¤§å¤šæ•°çš„è®¾å¤‡æˆ–è€…æµè§ˆå™¨ï¼Œæˆ‘ä»¬éœ€è¦å¯¹cssåšå¥½å…¼å®¹æ€§å¤„ç†ã€‚<br><br>
cssçš„å…¼å®¹æ€§å¤„ç†éœ€è¦ç”¨åˆ° <a href="https://www.postcss.com.cn/">postcss</a>ã€‚ <code>postcss</code> æ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢ CSS ä»£ç çš„å·¥å…·ã€‚åœ¨webpackä¸­ä½¿ç”¨å®ƒéœ€è¦ç”¨åˆ°ä¸¤ä¸ªåŒ…ï¼š<code>postcss-loader</code> ä»¥åŠ <code>postcss-preset-env</code>ã€‚<br><br>
å…¶ä¸­ï¼Œ<code>postcss-preset-env</code> çš„ä½œç”¨æ˜¯å¸®åŠ© <code>postcss-loader</code> æ‰¾åˆ° <code>browserslist</code> çš„é…ç½®ï¼ŒåŠ è½½æŒ‡å®šçš„å…¼å®¹æ€§ã€‚<code>browserslist</code> ä¸€èˆ¬ä¼šé…ç½®åˆ°package.jsonä¸‹ï¼Œæˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª <code>.browserslistrc</code> çš„æ–‡ä»¶å»å†™ç›¸å…³çš„é…ç½®ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼špackage.jsonä¸­çš„é…ç½®ä¸.browserslistrcæ–‡ä»¶ï¼Œä¸¤è€…åªèƒ½å­˜å…¶ä¸€ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ï¼</p>
</blockquote>
<h3 id="å®‰è£…-2">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D postcss-loader postcss-preset-env
</code></pre>
<h3 id="é…ç½®-2">é…ç½®</h3>
<p>æˆ‘ä»¬åœ¨ä¸Šé¢çš„loaderé…ç½®åŸºç¡€ä¸Šè¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š</p>
<pre><code class="language-js">{
  test: /\.s[ac]ss$/i,
  use: [
    MiniCssExtractPlugin.loader,
    'css-loader',
    {
      loader: 'postcss-loader',
      options: {
        postcssOptions: {
          plugins: [
            [
              'postcss-preset-env',
              {
                // Options
              },
            ],
          ],
        },
      }
    },
    // å°† Sass ç¼–è¯‘æˆ CSS
    'sass-loader',
  ],
},
</code></pre>
<p>ç„¶ååœ¨ <code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼ˆæ›´å¤šé…ç½®å¯ä»¥å‚è€ƒ:<a href="https://github.com/browserslist/browserslist">browserslist</a>ï¼‰ï¼š</p>
<pre><code class="language-json">&quot;browserslist&quot;: {
    &quot;development&quot;: [ // å¼€å‘ç¯å¢ƒ
      &quot;last 1 chrome version&quot;,
      &quot;last 1 safari version&quot;,
      &quot;last 1 firefox version&quot;
    ],
    &quot;production&quot;: [ // ç”Ÿäº§ç¯å¢ƒ
      &quot;&gt; 0.2%&quot;,
      &quot;not dead&quot;,
      &quot;not op_mini all&quot;
    ]
}
</code></pre>
<p>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º.browserslistrcæ–‡ä»¶ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šé…ç½®é¡¹æ˜¯æœ‰é¡ºåºçš„ï¼ï¼&gt; 0.2%å†™åˆ°åé¢ä¼šæŠ¥é”™</p>
</blockquote>
<pre><code class="language-json">&gt; 0.2%
not dead
not op_mini all
</code></pre>
<p>å…³äºpostcss-loaderæ›´å¤šçš„é…ç½®å¯ä»¥<a href="https://webpack.js.org/loaders/postcss-loader/#root">å‚è€ƒ</a>ã€‚</p>
<h1 id="cssæ–‡ä»¶å‹ç¼©">cssæ–‡ä»¶å‹ç¼©</h1>
<p>åœ¨å¯¹cssæ–‡ä»¶åšå®Œå…¼å®¹æ€§å¤„ç†å¹¶æå–æˆå•ä¸ªæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œå°†æŠ½å‡ºçš„cssæ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ’ä»¶ï¼š <code>optimize-css-assets-webpack-plugin</code>ã€‚</p>
<h3 id="å®‰è£…-3">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D optimize-css-assets-webpack-plugin
</code></pre>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<p>ä½¿ç”¨éå¸¸ç®€å• ï¼Œåªéœ€è¦åœ¨ <code>webpack.config.js</code> ä¸­å¼•å…¥ä½¿ç”¨å³å¯ã€‚é»˜è®¤é…ç½®å·²ç»å¯ä»¥æ»¡è¶³å‹ç¼©éœ€è¦ï¼Œå¦‚æœéœ€è¦æ·»åŠ é…ç½®ï¼Œå¯ä»¥<a href="https://www.npmjs.com/package/optimize-css-assets-webpack-plugin">å‚è€ƒ</a>ã€‚</p>
<pre><code class="language-js">const OptimizeCssAssetsWebpackPlugin = require('optimize-css-assets-webpack-plugin')
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
    /* ... */
    module: {
      rules: [
        /* ... */
        {
          test: /\.s[ac]ss$/i,
          use: [
            MiniCssExtractPlugin.loader,
            'css-loader',
            {
              loader: 'postcss-loader',
              options: {
                postcssOptions: {
                  plugins: [
                    [
                      'postcss-preset-env',
                      {
                        // Options
                      },
                    ],
                  ],
                },
              }
            },
            // å°† Sass ç¼–è¯‘æˆ CSS
            'sass-loader',
          ],
        },
      ]
    },
    plugins: [
    	new MiniCssExtractPlugin({
         filename: 'css/index.[contenthash:10].css',
       }),
       new OptimizeCssAssetsWebpackPlugin()
    ]
    /* ... */
}
</code></pre>
<h1 id="é¢„å‘Š">é¢„å‘Š</h1>
<p>é€šè¿‡è¿™ä¸¤èŠ‚ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†webpackä¸­å¦‚ä½•å¯¹cssæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­å¯¹å…¶åšäº†ä¸€äº›ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æå–å•ä¸ªcssæ–‡ä»¶ï¼Œå…¼å®¹æ€§å¤„ç†ä»¥åŠcssä»£ç å‹ç¼©ã€‚<br><br>
ä¸‹ä¸€èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹ï¼Œé™¤äº†cssæ–‡ä»¶ä¸jsæ–‡ä»¶å¤–ï¼Œå…¶ä»–çš„æ–‡ä»¶webpackè¦å¦‚ä½•è¿›è¡Œå¤„ç†å‘¢ï¼Ÿæ‹­ç›®ä»¥å¾…å§~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Webpackå­¦ä¹ ç¬”è®°ä¸ƒï¼šå…¶ä»–æ–‡ä»¶çš„æ‰“åŒ…]]></title>
        <id>https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-qi-qi-ta-wen-jian-de-da-bao/</id>
        <link href="https://luhaifeng666.github.io/post/webpack-xue-xi-bi-ji-qi-qi-ta-wen-jian-de-da-bao/">
        </link>
        <updated>2021-12-24T08:38:47.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://juejin.cn/post/6907627139198107655">ä¸Šä¸€èŠ‚</a>æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å¯¹cssåšå…¼å®¹æ€§å¤„ç†ï¼Œä»¥åŠå¦‚ä½•å°†ä»£ç ä¸­çš„csså•ç‹¬æå–æˆcssæ–‡ä»¶ï¼Œå¹¶å¯¹å…¶è¿›è¡Œå‹ç¼©å¤„ç†ã€‚ç»“åˆå‰å‡ ä¸ªç« èŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨webpackä¸­å¦‚ä½•å¯¹jsä»¥åŠcssæ–‡ä»¶å¤„ç†ã€‚é‚£ä¹ˆé™¤äº†jsä¸cssæ–‡ä»¶å¤–ï¼Œç±»ä¼¼äº <code>htmlèµ„æº</code>ã€ <code>å›¾ç‰‡èµ„æº</code> ä»¥åŠ <code>å…¶ä»–çš„èµ„æº</code> åˆè¯¥æ€ä¹ˆå»å¤„ç†å‘¢ï¼Ÿè¿™ä¸€èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹~</p>
<h1 id="æ‰“åŒ…htmlèµ„æº">æ‰“åŒ…htmlèµ„æº</h1>
<p>è¦æƒ³å¯¹htmlèµ„æºè¿›è¡Œæ‰“åŒ…ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ’ä»¶ï¼š<code>html-webpack-plugin</code>ã€‚è¿™ä¸ªæ’ä»¶çš„ä½œç”¨ä¸»è¦æ˜¯<strong>ç”Ÿæˆhtmlæ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å°†outputç”Ÿæˆçš„æ–‡ä»¶å¼•å…¥</strong>ã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D html-webpack-plugin
</code></pre>
<h3 id="é…ç½®">é…ç½®</h3>
<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>webpack.config.js</code> ä¸­å¼•å…¥æ’ä»¶ï¼Œå¹¶é…ç½®åˆ° <code>plugins</code> é€‰é¡¹ä¸­ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  entry: './src/js/index.js',
  // è¾“å‡º
  output: {
    filename: 'js/[name].[contenthash:10].js',
    //   __dirnameè¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
    path: resolve(__dirname, 'build'),
  },
  module: {
    rules: [/*...*/]
  },
  plugins: [
    new HtmlWebpackPlugin()
  ],
  mode: 'development'
}
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œä¼šçœ‹åˆ°åœ¨ <code>build</code> ç›®å½•ä¸‹å¤šå‡ºäº†ä¸€ä¸ª <code>index.html</code> æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯é€šè¿‡ <code>html-webpack-plugin</code> æ’ä»¶ç”Ÿæˆå‡ºæ¥çš„ã€‚</p>
<h3 id="jsä¸cssæ–‡ä»¶çš„è‡ªåŠ¨å¼•å…¥">jsä¸cssæ–‡ä»¶çš„è‡ªåŠ¨å¼•å…¥</h3>
<p>æ‰“å¼€ç”Ÿæˆçš„ <code>index.html</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“åŒ…å‡ºæ¥çš„jsæ–‡ä»¶è¢«è‡ªåŠ¨å¼•å…¥äº†ï¼š<br>
<img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d5fc7220af747ce826b51e9f028175e~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"><br>
è¿˜è®°çš„æˆ‘ä»¬ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„æå–cssæ–‡ä»¶çš„æ“ä½œä¹ˆï¼Ÿå¦‚æœæˆ‘ä»¬å°†cssæ–‡ä»¶ä¹Ÿæå–å‡ºæ¥ä¹‹åä¹Ÿä¼šè¢«è‡ªåŠ¨å¼•å…¥åˆ° <code>index.html</code> æ–‡ä»¶ä¸­ä¹ˆï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥è¯•ä¸€è¯•ï¼Œå°†ä¸ŠèŠ‚ä¸­çš„é…ç½®å†™å…¥è¿›æ¥ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  entry: './src/js/index.js',
  // è¾“å‡º
  output: {
    filename: 'js/[name].[contenthash:10].js',
    //   __dirnameè¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
    path: resolve(__dirname, 'build'),
  },
  module: {
    rules: [
    	{
        // åŒ¹é….jsæ–‡ä»¶
        test: /\.js$/,
        // éœ€è¦å¿½ç•¥æ‰node_modulesï¼Œä¸ç„¶ä¼šå¯¹å…¶ä¸­çš„å†…å®¹ä¹Ÿåšæ£€æŸ¥, ä¼šé™ä½æ‰“åŒ…çš„æ€§èƒ½
        exclude: /node_modules/,
        // ä½¿ç”¨babel-loader
        use: [
          {
            loader: 'babel-loader',
            // loaderçš„ç›¸å…³é…ç½®
            options: {
              presets: [
                [
                  '@babel/preset-env',
                  {
                    // æŒ‡å®šæŒ‰éœ€åŠ è½½
                    useBuiltIns: 'usage',
                    // æŒ‡å®šcore-jsçš„ç‰ˆæœ¬
                    corejs: {
                      version: 3,
                    },
                    // æŒ‡å®šå…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬
                    targets: {
                      chrome: '60',
                      firefox: '60',
                      ie: '9',
                      safari: '10',
                      edge: '17',
                    },
                  },
                ],
              ],
            },
          },
        ],
      },
      {
        test: /\.s[ac]ss/,
        exclude: /(node_modules|build)/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader',
          'sass-loader'
        ],
      },
    ]
  },
  plugins: [
    new HtmlWebpackPlugin(),
    new MiniCssExtractPlugin({
      filename: 'css/index.[contenthash:10].css', // è®¾ç½®cssæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„
    }),
  ],
  mode: 'development'
}
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å†æ¬¡æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œä¹‹åæ‰“å¼€ç”Ÿæˆçš„ <code>index.html</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æå–å‡ºæ¥çš„cssæ–‡ä»¶ä¹Ÿä¼šè¢«å¼•å…¥è¿›æ¥ï¼š<br>
<img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8827558e583a431f80e9abc49002de1d~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></p>
<h3 id="é…ç½®è‡ªå®šä¹‰htmlæ¨¡æ¿">é…ç½®è‡ªå®šä¹‰htmlæ¨¡æ¿</h3>
<p>åœ¨ä¸Šé¢çš„æ —å­ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯å•çº¯çš„ä½¿ç”¨äº† <code>html-webpack-plugin</code> è¿™ä¸ªæ’ä»¶ã€‚åœ¨ä¸ä¼ å…¥ä»»ä½•é…ç½®çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ’ä»¶ä¼šç”Ÿæˆä¸€ä¸ªæœ€ç®€å•çš„htmlæ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬å¯¹ç”Ÿæˆçš„htmlæ–‡ä»¶æœ‰å®šåˆ¶åŒ–çš„éœ€æ±‚ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªæ’ä»¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼Œç”¨æ¥å£°æ˜ç”Ÿæˆhtmlæ–‡ä»¶æ—¶æ‰€éœ€è¦ä½¿ç”¨çš„æ¨¡æ¿ã€‚<br><br>
åœ¨ä¼ å…¥é…ç½®ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>index.html</code> æ–‡ä»¶ï¼Œç”¨æ¥å®šä¹‰æˆ‘ä»¬è‡ªå®šä¹‰çš„é¡µé¢æ¨¡æ¿ï¼š</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;webpack-image&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;æˆ‘çš„è‡ªå®šä¹‰æ¨¡æ¿&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>ä¹‹åï¼Œæˆ‘ä»¬ç»™æ’ä»¶ä¼ å…¥å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  /* ... */
  plugins: [
    new HtmlWebpackPlugin({
    	template: resolve(__dirname, 'src/index.html')
    })
  ]
  /* ... */
}
</code></pre>
<p>æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬å†æ¬¡æ‰§è¡Œæ‰“åŒ…å‘½ä»¤åï¼Œç‚¹å¼€ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼š<br>
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79acb15065944aca998e86eeb4b5c002~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"><br>
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç”Ÿæˆçš„htmlæ–‡ä»¶ä¸­ï¼Œå­˜åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å†…å®¹ï¼Œä¸æ­¤åŒæ—¶ï¼Œcssä¸jsæ–‡ä»¶ä¹Ÿä¼šè¢«è‡ªåŠ¨å¼•å…¥è¿›æ¥ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong> <br><br>
ç”±äºjsä¸cssæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨å¼•å…¥è¿›æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥cssä¸jsï¼Œå¦åˆ™ä¼šå‡ºç°é‡å¤å¼•å…¥çš„æƒ…å†µï¼</p>
</blockquote>
<h3 id="æŒ‡å®šhtmlæ–‡ä»¶çš„ç”Ÿæˆç›®å½•">æŒ‡å®šhtmlæ–‡ä»¶çš„ç”Ÿæˆç›®å½•</h3>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šhtmlæ–‡ä»¶ç”Ÿæˆçš„è·¯å¾„ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
  /* ... */
  plugins: [
    new HtmlWebpackPlugin({
       template: resolve(__dirname, 'src/index.html'),
       filename: 'html/index.html'
    })
  ]
  /* ... */
}
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œhtmlæ–‡ä»¶å°±ä¼šè¢«æ‰“åŒ…è‡³ <code>build/html</code> è·¯å¾„ä¸‹ï¼Œæ–‡ä»¶åä¸º <code>index.html</code>ã€‚</p>
<h1 id="æ‰“åŒ…å›¾ç‰‡èµ„æº">æ‰“åŒ…å›¾ç‰‡èµ„æº</h1>
<p>å›¾ç‰‡èµ„æºä¸»è¦æœ‰ä¸¤ä¸ªæ¥æºï¼Œä¸€ä¸ªæ˜¯æ¥è‡ªäºhtmlæ–‡ä»¶ä¸­ï¼Œå¦ä¸€ä¸ªæ˜¯æ¥æºäºcssæ–‡ä»¶ä¸­ã€‚é’ˆå¯¹è¿™ä¸¤ç§ä¸åŒçš„æƒ…å†µï¼Œå¤„ç†çš„æ–¹å¼ä¹Ÿå„æœ‰ä¸åŒã€‚</p>
<h2 id="æ‰“åŒ…cssæ–‡ä»¶ä¸­çš„å›¾ç‰‡">æ‰“åŒ…cssæ–‡ä»¶ä¸­çš„å›¾ç‰‡</h2>
<p>è¦æƒ³æ‰“åŒ…cssæ–‡ä»¶ä¸­çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€ä¸ªloaderå·¥å…·ï¼š<code>url-loader</code>ã€‚è¿™ä¸ªloaderçš„ä½œç”¨æ˜¯<strong>å¤„ç†cssä¸­çš„å›¾ç‰‡</strong>(å…¶ä¾èµ–äºfile-loaderï¼Œæ‰€ä»¥ä¹Ÿè¦ä¸‹ä¸‹æ¥)ã€‚</p>
<h3 id="å®‰è£…-2">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D url-loader file-loader
</code></pre>
<h3 id="é…ç½®-2">é…ç½®</h3>
<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨ <code>webpack.config.js</code> ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®:</p>
<pre><code class="language-js">/* ... */
rules: [
  {
    test: /\.(jpeg|png|gif|jpg)$/,
    loader: 'url-loader',
    options: {
      // é™åˆ¶å›¾ç‰‡å¤§å°ä¸º8kbï¼Œå«ä¹‰æ˜¯å½“å›¾ç‰‡çš„å¤§å°å°äº8kbæ—¶ï¼Œä¼šè¢«ç¼–è¯‘æˆbase64çš„å½¢å¼å†™å…¥æ ·å¼ï¼Œè€Œè¶…è¿‡8kbåˆ™ä¼šå¼•å…¥å›¾ç‰‡ã€‚
      // ä¼˜ç‚¹ï¼šå‡å°‘è¯·æ±‚
      // ç¼ºç‚¹ï¼šbase64ä¹‹åçš„å¤§å°å¯èƒ½ä¼šæ¯”åŸå…ˆå›¾ç‰‡çš„å¤§å°æ›´å¤§
      limit: 8 * 1024, 
      // è®¾ç½®æ‰“åŒ…å‡ºæ¥çš„å›¾ç‰‡åç§°ï¼Œå…¶ä¸­hashè¡¨ç¤ºhashå€¼ï¼Œ10è¡¨ç¤ºæˆªå–hashå€¼çš„å‰10ä½ï¼Œextè¡¨ç¤ºä¿ç•™å›¾ç‰‡åŸæœ¬çš„åç¼€å
      // å¯ä»¥è®¾ç½®å›¾ç‰‡æ‰“åŒ…å‡ºå»çš„è·¯å¾„
      // æ¯”å¦‚'img/[hash:10].[ext]'è¡¨ç¤ºå°†å›¾ç‰‡æ‰“åŒ…åˆ°buildä¸‹çš„imgæ–‡ä»¶å¤¹ä¸­
      // æ³¨æ„ï¼š1ã€æ­¤å¤„çš„è·¯å¾„è®¾ç½®æ˜¯ç›¸å¯¹äºbuildæ–‡ä»¶å¤¹çš„ï¼Œå¦‚æœè®¾ç½®'../[hash:10].[ext]'å°±æ˜¯æ‰“åŒ…åˆ°buildçš„ä¸Šä¸€çº§ç›®å½•ã€‚
      // 2ã€è¿™é‡Œè®¾ç½®çš„è·¯å¾„ï¼Œä¹Ÿæ˜¯æœ€åcssæ–‡ä»¶ä¸­å¼•å…¥çš„è·¯å¾„ã€‚æ¯”å¦‚è®¾ç½®çš„'img/[hash:10].[ext]'ï¼Œé‚£åœ¨cssä¸­å¼•å…¥çš„å°±æ˜¯ï¼šbackground: url(img/....)ã€‚
      name: '[hash:10].[ext]'
    }
  }
]
/* ... */
</code></pre>
<h2 id="æ‰“åŒ…htmlæ–‡ä»¶ä¸­çš„å›¾ç‰‡">æ‰“åŒ…htmlæ–‡ä»¶ä¸­çš„å›¾ç‰‡</h2>
<p>å¤„ç†htmlä¸­çš„å›¾ç‰‡æ–‡ä»¶éœ€è¦ä½¿ç”¨åˆ°å¦å¤–ä¸€ä¸ªloaderï¼š<code>html-loader</code>ã€‚è¿™ä¸ªloaderçš„ä½œç”¨æ˜¯<strong>å¼•å…¥htmlæ–‡ä»¶ä¸­çš„imgï¼Œä»è€Œå¯ä»¥ä½¿å…¶è¢«url-loaderå¤„ç†</strong>ã€‚</p>
<h3 id="å®‰è£…-3">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D html-loader
</code></pre>
<h3 id="é…ç½®-3">é…ç½®</h3>
<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>webpack.config.js</code> çš„ <code>rules</code> é…ç½®é¡¹ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-js">{
  test: /\.html$/,
  loader: 'html-loader'
}
</code></pre>
<p>ç„¶ååœ¨ä¸Šè¿°çš„ <code>src/index.html</code> æ¨¡æ¿ä¸­ï¼Œå¼•å…¥ä¸€å¼ å›¾ç‰‡ï¼š</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;webpack-image&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;æˆ‘çš„è‡ªå®šä¹‰æ¨¡æ¿&lt;/p&gt;
  &lt;img src=&quot;./images/luoxiaohei1.jpeg&quot; alt=&quot;&quot;&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>ä¹‹åè¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œæ‰“å¼€ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å³å¯çœ‹åˆ°å¼•å…¥çš„å›¾ç‰‡ã€‚<br>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8c1209c0e30e46968d9d375cae4350e2~tplv-k3u1fbpfcp-watermark.image" alt="" loading="lazy"></p>
<blockquote>
<p><strong>æ³¨æ„</strong> <br><br>
å¦‚æœå›¾ç‰‡çš„æ˜¾ç¤ºè·¯å¾„æ˜¯&quot;[Object Module]&quot;ï¼ŒåŸå› æ˜¯url-loaderé»˜è®¤è¯•ç”¨ES6çš„æ–¹å¼è§£æï¼Œè€Œhtml-loaderå¼•å…¥çš„å›¾ç‰‡æ˜¯commonjsï¼Œæ‰€ä»¥åœ¨è§£ææ—¶ä¼šæŠ¥é”™ã€‚æ­¤æ—¶éœ€è¦å°†url-loaderçš„ <code>esModule</code> å±æ€§è®¾ç½®ä¸ºfasle:</p>
<pre><code class="language-js">{
  test: /\.(jpeg|png|gif|jpg)$/,
  loader: 'url-loader',
  options: {
    limit: 8 * 1024,
    name: '[name].[hash:10].[ext]',
    esModule: false
  },
},
</code></pre>
</blockquote>
<h1 id="æ‰“åŒ…å…¶ä»–èµ„æº">æ‰“åŒ…å…¶ä»–èµ„æº</h1>
<p>æ‰“åŒ…å…¶ä»–èµ„æºï¼ˆæ¯”å¦‚å­—ä½“æ–‡ä»¶ç­‰ä¸éœ€è¦è¿›è¿‡loaderå¤„ç†çš„æ–‡ä»¶ï¼‰å°±æ˜¯å°†å…¶ä»–èµ„æºåŸå°ä¸åŠ¨åŸæ ·è¾“å‡ºã€‚è¿™éœ€è¦ç”¨åˆ° <code>file-loader</code>ã€‚åœ¨ä¸Šè¿°å¯¹cssä¸­çš„å›¾ç‰‡è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œæˆ‘ä»¬å·²ç»å®‰è£…è¿‡è¿™ä¸ªåŒ…äº†ã€‚æ¥ä¸‹æ¥çš„é…ç½®å¾ˆç®€å• ï¼Œåªéœ€è¦åœ¨ <code>webpack.config.js</code> ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">{
    exclude: /\.(html|js|css|sass)$/,
    loader: 'file-loader',
    options: {
      name: '[name]-[hash:10].[ext]'
    }
}
</code></pre>
<p>ä¸å…¶ä»–loaderé…ç½®ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç”¨testçš„å±æ€§å»åŒ¹é…å…·ä½“æ ¼å¼çš„æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡excludeçš„æ–¹å¼å°†ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶æ’é™¤å‡ºå»ï¼Œä¹‹åé€šè¿‡file-loaderè¿›è¡Œå¤„ç†è¾“å‡ºå³å¯ã€‚</p>
<h1 id="devserver">devServer</h1>
<p>åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç”¨æ¥åšä¸€äº›è¯¸å¦‚è‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨åˆ·æ–°ç­‰ç­‰çš„è‡ªåŠ¨åŒ–æ“ä½œã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>devServer</code>ã€‚ç›¸å¯¹äºæ‰“åŒ…è¾“å‡ºæ–‡ä»¶åˆ°å¯¹åº”ç›®å½•ï¼Œ<strong>devServerä¸ä¼šæœ‰ä»»ä½•æ–‡ä»¶è¾“å‡º</strong>ã€‚</p>
<h3 id="å®‰è£…-4">å®‰è£…</h3>
<pre><code class="language-js">yarn add -D webpack-dev-server
</code></pre>
<h3 id="é…ç½®-4">é…ç½®</h3>
<p>åœ¨ <code>webpack.config.js</code> æ–‡ä»¶ä¸‹ï¼Œæˆ‘ä»¬åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-js">const { resolve } = require('path')

module.exports = {
  entry: './src/js/index.js',
  // è¾“å‡º
  output: {
    filename: 'js/[name].[contenthash:10].js',
    //   __dirnameè¡¨ç¤ºå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
    path: resolve(__dirname, 'build'),
  },
  module: {
    rules: [/*...*/]
  },
  plugins: [
    /* ... */
  ],
  mode: 'development',
  devServer: {
    // è®¾ç½®è¿è¡Œçš„é¡¹ç›®è·¯å¾„
    contentBase: resolve(__dirname, 'build'),
    // å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨
    open: true,
    // å¯åŠ¨gzipå‹ç¼©
    compress: true,
    // ç«¯å£é…ç½®
    port: 3000
  }
}
</code></pre>
<h3 id="å¯åŠ¨">å¯åŠ¨</h3>
<p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¯åŠ¨å‘½ä»¤ï¼ˆä¹Ÿå¯ä»¥å°†å¯åŠ¨å‘½ä»¤å†™å…¥ <code>package.json</code> æ–‡ä»¶ä¸­ï¼‰ï¼š</p>
<pre><code class="language-js">npx webpack-dev-server
</code></pre>
<p>å¯åŠ¨å®Œæˆåï¼Œä¼šè‡ªåŠ¨å”¤èµ·æµè§ˆå™¨ï¼Œæ‰“å¼€ç«¯å£ä¸º3000çš„æœ¬åœ°é¡µé¢ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘å¬ä»£ç çš„æ”¹åŠ¨è¿›è¡Œè‡ªåŠ¨ç¼–è¯‘ï¼Œå¹¶åˆ·æ–°é¡µé¢ã€‚</p>
]]></content>
    </entry>
</feed>